        <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.8">
    <title>NOIR | Premium Casino</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&family=Rajdhani:wght@500;600;700&display=swap');
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --bg: #050505; --bg-secondary: #0a0a0a; --bg-tertiary: #111111; --bg-hover: #1a1a1a;
            --border: #1f1f1f; --border-light: #2a2a2a; --text: #ffffff; --text-secondary: #888888; --text-muted: #555555;
            --accent: #a855f7; --accent-hover: #c084fc; --accent-glow: rgba(168, 85, 247, 0.4);
            --green: #22c55e; --red: #ef4444; --purple: #a855f7; --purple-dim: #7c3aed;
            --gold: #fbbf24; --orange: #f97316; --cyan: #06b6d4;
            --radius: 12px; --radius-sm: 8px;
        }
        
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); overflow: hidden; height: 100vh; width: 100vw; font-size: 14px; }
        
        .neon-border { box-shadow: 0 0 10px var(--accent-glow), inset 0 0 10px rgba(168, 85, 247, 0.1); border: 1px solid var(--accent); }
        .neon-text { text-shadow: 0 0 10px var(--accent-glow), 0 0 20px var(--accent-glow); }
        
        .auth-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(ellipse at center, #1a0b2e 0%, var(--bg) 100%); display: flex; align-items: center; justify-content: center; z-index: 10000; }
        .auth-container { background: var(--bg-secondary); border: 1px solid var(--border); border-radius: var(--radius); width: 420px; padding: 40px; box-shadow: 0 0 40px rgba(168, 85, 247, 0.15), 0 25px 50px -12px rgba(0, 0, 0, 0.5); position: relative; }
        .auth-container::before { content: ''; position: absolute; top: -1px; left: -1px; right: -1px; bottom: -1px; background: linear-gradient(135deg, var(--accent), transparent, var(--accent)); border-radius: var(--radius); z-index: -1; opacity: 0.3; }
        .auth-logo { text-align: center; margin-bottom: 35px; }
        .auth-logo h1 { font-family: 'Rajdhani', sans-serif; font-size: 48px; font-weight: 700; letter-spacing: 8px; background: linear-gradient(135deg, #fff 0%, var(--accent) 50%, #fff 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; filter: drop-shadow(0 0 15px var(--accent-glow)); }
        .auth-logo p { color: var(--text-secondary); font-size: 12px; letter-spacing: 3px; text-transform: uppercase; margin-top: 5px; }
        .auth-tabs { display: flex; gap: 10px; margin-bottom: 25px; }
        .auth-tab { flex: 1; padding: 14px; text-align: center; cursor: pointer; color: var(--text-secondary); font-size: 13px; font-weight: 500; border-radius: var(--radius-sm); transition: all 0.2s; border: 1px solid var(--border); background: var(--bg-tertiary); }
        .auth-tab.active { background: var(--accent); color: white; border-color: var(--accent); box-shadow: 0 0 15px var(--accent-glow); }
        .input-group { margin-bottom: 18px; }
        .input-group label { display: block; font-size: 12px; font-weight: 500; color: var(--text-secondary); margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.5px; }
        .input-group input { width: 100%; padding: 12px 16px; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: var(--radius-sm); color: var(--text); font-size: 14px; transition: all 0.2s; }
        .input-group input:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.1), 0 0 15px var(--accent-glow); }
        .btn-primary { width: 100%; padding: 14px; background: var(--accent); color: white; border: none; border-radius: var(--radius-sm); font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s; margin-top: 10px; text-transform: uppercase; letter-spacing: 1px; box-shadow: 0 0 20px rgba(168, 85, 247, 0.3); }
        .btn-primary:hover { background: var(--accent-hover); transform: translateY(-1px); box-shadow: 0 0 30px rgba(168, 85, 247, 0.5); }
        .btn-primary:disabled { opacity: 0.5; cursor: not-allowed; transform: none; box-shadow: none; }
        
        .main-container { display: none; height: 100vh; width: 100vw; }
        .main-container.active { display: flex; }
        .sidebar { width: 280px; background: var(--bg-secondary); border-right: 1px solid var(--border); display: flex; flex-direction: column; height: 100%; box-shadow: 5px 0 20px rgba(0,0,0,0.3); overflow-y: auto; }
        .sidebar-header { padding: 24px 20px; border-bottom: 1px solid var(--border); }
        .brand { font-family: 'Rajdhani', sans-serif; font-size: 32px; font-weight: 700; letter-spacing: 4px; color: #fff; text-shadow: 0 0 20px var(--accent-glow); display: flex; align-items: center; gap: 10px; cursor: default; user-select: none; }
        .brand-icon { font-size: 24px; color: var(--accent); filter: drop-shadow(0 0 10px var(--accent-glow)); }
        .balance-display { margin-top: 16px; padding: 14px; background: var(--bg-tertiary); border-radius: var(--radius-sm); border: 1px solid var(--border); position: relative; overflow: hidden; }
        .balance-display::after { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px; background: linear-gradient(90deg, transparent, var(--accent), transparent); opacity: 0.5; }
        .balance-label { font-size: 10px; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 1px; }
        .balance-amount { font-family: 'JetBrains Mono', monospace; font-size: 22px; font-weight: 600; color: #fff; margin-top: 4px; text-shadow: 0 0 10px rgba(255,255,255,0.3); }
        .inventory-value { margin-top: 12px; padding: 12px; background: var(--bg-tertiary); border-radius: var(--radius-sm); border: 1px solid var(--border); position: relative; }
        .inventory-value::after { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px; background: linear-gradient(90deg, transparent, var(--purple-dim), transparent); opacity: 0.5; }
        .inv-label { font-size: 10px; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 1px; }
        .inv-amount { font-family: 'JetBrains Mono', monospace; font-size: 16px; font-weight: 600; color: var(--accent); margin-top: 4px; text-shadow: 0 0 10px var(--accent-glow); }
        
        .game-list { flex: 1; padding: 12px; }
        .game-category { font-size: 10px; text-transform: uppercase; letter-spacing: 1.5px; color: var(--text-muted); padding: 16px 12px 8px; font-weight: 700; }
        .game-item { display: flex; align-items: center; gap: 12px; padding: 12px; cursor: pointer; border-radius: var(--radius-sm); margin-bottom: 4px; color: var(--text-secondary); transition: all 0.2s; font-size: 14px; border: 1px solid transparent; }
        .game-item:hover { background: var(--bg-hover); color: var(--text); border-color: var(--border-light); }
        .game-item.active { background: linear-gradient(135deg, rgba(168, 85, 247, 0.2), rgba(168, 85, 247, 0.05)); color: white; border-color: var(--accent); box-shadow: 0 0 15px var(--accent-glow), inset 0 0 10px rgba(168, 85, 247, 0.1); }
        
        .sidebar-footer { padding: 16px; border-top: 1px solid var(--border); }
        .user-btn { display: flex; align-items: center; gap: 12px; padding: 10px; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: var(--radius-sm); cursor: pointer; transition: all 0.2s; width: 100%; }
        .user-btn:hover { border-color: var(--accent); box-shadow: 0 0 10px var(--accent-glow); }
        .user-avatar { width: 36px; height: 36px; border-radius: 50%; background: linear-gradient(135deg, var(--accent), var(--purple-dim)); display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 600; overflow: hidden; box-shadow: 0 0 10px var(--accent-glow); }
        
        .main-content { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
        .top-bar { height: 64px; background: var(--bg-secondary); border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; padding: 0 20px; box-shadow: 0 5px 20px rgba(0,0,0,0.3); }
        .top-left { display: flex; gap: 12px; }
        .top-btn { padding: 8px 16px; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: var(--radius-sm); color: var(--text-secondary); font-size: 13px; cursor: pointer; transition: all 0.2s; }
        .top-btn:hover { border-color: var(--accent); color: var(--text); box-shadow: 0 0 10px var(--accent-glow); }
        .btn-wallet { padding: 10px 20px; background: var(--accent); color: white; border: none; border-radius: var(--radius-sm); font-size: 13px; font-weight: 600; cursor: pointer; transition: all 0.2s; box-shadow: 0 0 15px var(--accent-glow); }
        .btn-wallet:hover { background: var(--accent-hover); box-shadow: 0 0 25px var(--accent-glow); }
        .btn-wallet:disabled { background: var(--text-muted); cursor: not-allowed; filter: none; box-shadow: none; }
        .btn-logout { padding: 10px 16px; background: transparent; border: 1px solid var(--red); color: var(--red); border-radius: var(--radius-sm); font-size: 13px; cursor: pointer; transition: all 0.2s; }
        .btn-logout:hover { background: var(--red); color: white; box-shadow: 0 0 15px rgba(239, 68, 68, 0.4); }
        
        .game-area { flex: 1; display: flex; overflow: hidden; padding: 20px; gap: 20px; }
        .bet-panel { width: 300px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: var(--radius); padding: 20px; display: flex; flex-direction: column; gap: 20px; overflow-y: auto; box-shadow: 0 0 20px rgba(0,0,0,0.3); }
        .game-display { flex: 1; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: var(--radius); display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 30px; position: relative; overflow: hidden; box-shadow: 0 0 20px rgba(0,0,0,0.3); }
        
        .bet-section h3 { font-size: 11px; font-weight: 600; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 10px; }
        .amount-input { display: flex; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: var(--radius-sm); overflow: hidden; }
        .amount-input input { flex: 1; padding: 12px; background: transparent; border: none; color: var(--text); font-size: 16px; font-family: 'JetBrains Mono', monospace; }
        .amount-input input:focus { outline: none; }
        .amount-btns { display: flex; }
        .amount-btn { padding: 0 12px; background: transparent; border: none; border-left: 1px solid var(--border); color: var(--text-secondary); font-size: 11px; cursor: pointer; transition: all 0.2s; }
        .amount-btn:hover { color: var(--accent); background: var(--bg-hover); }
        .quick-bets { display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; }
        .quick-bet { padding: 10px; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: var(--radius-sm); color: var(--text-secondary); font-size: 12px; cursor: pointer; transition: all 0.2s; }
        .quick-bet:hover { border-color: var(--accent); color: var(--accent); box-shadow: 0 0 10px var(--accent-glow); }
        .bet-btn { width: 100%; padding: 16px; background: var(--accent); color: white; border: none; border-radius: var(--radius-sm); font-size: 14px; font-weight: 700; cursor: pointer; transition: all 0.2s; margin-top: auto; text-transform: uppercase; letter-spacing: 1px; box-shadow: 0 0 20px var(--accent-glow); }
        .bet-btn:hover:not(:disabled) { background: var(--accent-hover); transform: translateY(-1px); box-shadow: 0 0 30px var(--accent-glow); }
        .bet-btn:disabled { opacity: 0.5; cursor: not-allowed; box-shadow: none; }
        .cashout-btn { width: 100%; padding: 16px; background: var(--purple-dim); color: white; border: none; border-radius: var(--radius-sm); font-size: 14px; font-weight: 700; cursor: pointer; transition: all 0.2s; margin-top: 10px; text-transform: uppercase; letter-spacing: 1px; box-shadow: 0 0 15px rgba(124, 58, 237, 0.3); }
        .cashout-btn:hover:not(:disabled) { background: var(--accent); box-shadow: 0 0 25px var(--accent-glow); }
        .cashout-btn:disabled { opacity: 0.3; cursor: not-allowed; box-shadow: none; }
        
        .roulette-container { width: 100%; display: flex; flex-direction: column; align-items: center; gap: 30px; }
        .roulette-wheel-area { position: relative; width: 350px; height: 350px; margin: 0 auto; }
        .roulette-wheel { width: 100%; height: 100%; border-radius: 50%; position: relative; transition: transform 6s cubic-bezier(0.25, 0.1, 0.25, 1); box-shadow: 0 0 60px rgba(168, 85, 247, 0.2), inset 0 0 50px rgba(0,0,0,0.5); }
        .roulette-wheel.spinning { animation: spinWheel 6s cubic-bezier(0.25, 0.1, 0.25, 1) forwards; }
        @keyframes spinWheel { from { transform: rotate(0deg); } to { transform: rotate(var(--final-rotation)); } }
        .wheel-center { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 80px; height: 80px; background: var(--bg-tertiary); border-radius: 50%; border: 3px solid var(--accent); display: flex; align-items: center; justify-content: center; font-size: 28px; z-index: 10; box-shadow: 0 0 20px var(--accent-glow); color: var(--accent); }
        .wheel-pointer { position: absolute; top: -10px; left: 50%; transform: translateX(-50%); width: 0; height: 0; border-left: 12px solid transparent; border-right: 12px solid transparent; border-top: 20px solid var(--accent); z-index: 20; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.5)); }
        .roulette-result-display { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 72px; font-weight: 700; opacity: 0; pointer-events: none; text-shadow: 0 0 30px currentColor; transition: all 0.5s; z-index: 15; }
        .roulette-result-display.show { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
        
        .roulette-table-container { display: flex; flex-direction: column; gap: 2px; background: var(--border); padding: 2px; border-radius: 4px; }
        .roulette-row { display: flex; gap: 2px; }
        .roulette-cell { width: 45px; height: 45px; display: flex; align-items: center; justify-content: center; font-size: 13px; font-weight: 600; cursor: pointer; position: relative; transition: all 0.2s; background: var(--bg-tertiary); }
        .roulette-cell:hover { transform: scale(1.05); z-index: 10; filter: brightness(1.2); box-shadow: 0 0 15px var(--accent-glow); }
        .roulette-cell.red { background: #7f1d1d; color: white; }
        .roulette-cell.black { background: #111827; color: white; }
        .roulette-cell.green { background: #064e3b; color: white; }
        .roulette-cell.wide { width: 93px; }
        .roulette-cell.selected { box-shadow: inset 0 0 0 3px var(--accent); }
        .chip { position: absolute; width: 26px; height: 26px; border-radius: 50%; background: var(--accent); color: white; font-size: 9px; font-weight: 800; display: flex; align-items: center; justify-content: center; border: 2px dashed rgba(255,255,255,0.3); pointer-events: none; z-index: 5; box-shadow: 0 2px 5px rgba(0,0,0,0.5), 0 0 10px var(--accent-glow); transform: translate(-50%, -50%); }
        
        .bj-container { width: 100%; height: 100%; display: flex; flex-direction: column; }
        .bj-table { flex: 1; background: linear-gradient(180deg, #0f172a 0%, #020617 100%); border-radius: var(--radius); position: relative; display: flex; flex-direction: column; align-items: center; justify-content: space-between; padding: 30px; box-shadow: inset 0 0 100px rgba(168, 85, 247, 0.1), inset 0 0 200px rgba(0,0,0,0.5); border: 2px solid var(--border); overflow: hidden; }
        .bj-table::before { content: 'NOIR'; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 180px; font-family: 'Rajdhani'; font-weight: 700; color: rgba(168, 85, 247, 0.03); pointer-events: none; letter-spacing: 30px; }
        .handbook-btn { position: absolute; top: 20px; right: 20px; padding: 10px 20px; background: rgba(168, 85, 247, 0.1); border: 1px solid var(--accent); border-radius: var(--radius-sm); color: var(--accent); font-size: 13px; cursor: pointer; transition: all 0.2s; text-transform: uppercase; letter-spacing: 1px; box-shadow: 0 0 10px var(--accent-glow); }
        .handbook-btn:hover { background: rgba(168, 85, 247, 0.2); box-shadow: 0 0 20px var(--accent-glow); }
        
        .bj-hand-area { display: flex; flex-direction: column; align-items: center; gap: 10px; z-index: 10; }
        .bj-label { font-size: 12px; text-transform: uppercase; letter-spacing: 2px; color: var(--text-secondary); display: flex; align-items: center; gap: 10px; }
        .bj-score { font-family: 'JetBrains Mono'; font-size: 20px; color: var(--accent); font-weight: 700; text-shadow: 0 0 10px var(--accent-glow); }
        .bj-cards { display: flex; position: relative; height: 120px; }
        
        .playing-card { width: 85px; height: 120px; background: linear-gradient(135deg, #1a1a1a, #0a0a0a); border-radius: 10px; display: flex; flex-direction: column; justify-content: space-between; padding: 8px; margin-left: -35px; color: #fff; font-size: 11px; font-weight: 700; box-shadow: 2px 2px 10px rgba(0,0,0,0.4), 0 0 10px rgba(168, 85, 247, 0.1); position: relative; animation: dealCard 0.4s ease; transition: all 0.3s; border: 1px solid var(--border); }
        .playing-card:first-child { margin-left: 0; }
        .playing-card:hover { transform: translateY(-15px); z-index: 20; box-shadow: 0 5px 20px rgba(168, 85, 247, 0.3); }
        @keyframes dealCard { 0% { transform: translateY(-100px) rotateY(90deg); opacity: 0; } 100% { transform: translateY(0) rotateY(0); opacity: 1; } }
        .card-red { color: #f87171; }
        .card-back { background: repeating-linear-gradient(45deg, #1a0b2e, #1a0b2e 8px, #0f0518 8px, #0f0518 16px); border: 3px solid var(--accent); }
        .card-corner { line-height: 1.2; font-size: 14px; }
        .card-center { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 40px; }
        
        .bj-betting-area { display: flex; gap: 30px; align-items: center; }
        .bj-bet-circle { width: 110px; height: 110px; border-radius: 50%; border: 3px dashed var(--border-light); display: flex; flex-direction: column; align-items: center; justify-content: center; color: var(--text-muted); transition: all 0.3s; position: relative; }
        .bj-bet-circle.main-bet { width: 130px; height: 130px; border-color: var(--accent); border-width: 3px; box-shadow: 0 0 20px var(--accent-glow); }
        .bj-bet-circle.drag-over { background: rgba(168, 85, 247, 0.15); border-color: var(--accent) !important; box-shadow: 0 0 30px var(--accent-glow); }
        .bj-bet-circle .bet-label { font-size: 10px; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 5px; font-weight: 600; }
        .bj-bet-circle .bet-amount { font-family: 'JetBrains Mono'; font-size: 16px; color: var(--accent); font-weight: 700; }
        .placed-chips { position: absolute; display: flex; flex-wrap: wrap; justify-content: center; width: 100%; padding: 10px; }
        .placed-chip { width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 9px; font-weight: 800; border: 2px dashed rgba(255,255,255,0.4); box-shadow: 0 3px 8px rgba(0,0,0,0.4), 0 0 10px var(--accent-glow); margin: -5px; animation: dropChip 0.3s ease; background: var(--accent); color: white; }
        @keyframes dropChip { 0% { transform: translateY(-40px) scale(0.5); opacity: 0; } 100% { transform: translateY(0) scale(1); opacity: 1; } }
        
        .bj-controls { display: flex; gap: 12px; flex-wrap: wrap; justify-content: center; z-index: 10; }
        .bj-control-btn { padding: 14px 32px; background: rgba(168, 85, 247, 0.1); border: 2px solid var(--accent); border-radius: var(--radius-sm); color: white; font-size: 14px; font-weight: 700; cursor: pointer; transition: all 0.2s; text-transform: uppercase; letter-spacing: 1px; box-shadow: 0 0 10px var(--accent-glow); }
        .bj-control-btn:hover:not(:disabled) { background: rgba(168, 85, 247, 0.2); box-shadow: 0 0 20px var(--accent-glow); transform: translateY(-2px); }
        .bj-control-btn:disabled { opacity: 0.3; cursor: not-allowed; box-shadow: none; }
        .bj-control-btn.primary { background: var(--accent); border-color: var(--accent); color: white; }
        .bj-control-btn.gold { background: var(--purple-dim); border-color: var(--purple-dim); color: white; }
        .bj-control-btn.red { background: var(--red); border-color: var(--red); color: white; }
        
        .chip-tray { display: flex; gap: 12px; padding: 15px; background: rgba(0,0,0,0.3); border-radius: var(--radius-sm); justify-content: center; }
        .poker-chip { width: 60px; height: 60px; border-radius: 50%; border: 4px dashed rgba(255,255,255,0.3); display: flex; align-items: center; justify-content: center; font-weight: 800; color: white; cursor: grab; transition: all 0.2s; box-shadow: 0 4px 12px rgba(0,0,0,0.4), 0 0 10px rgba(168, 85, 247, 0.2); font-size: 13px; background: var(--bg-tertiary); }
        .poker-chip:hover { transform: translateY(-5px); box-shadow: 0 4px 15px rgba(0,0,0,0.5), 0 0 15px var(--accent-glow); }
        .poker-chip:active { cursor: grabbing; transform: scale(0.95); }
        .chip-5 { background: #7f1d1d; } .chip-25 { background: #1e3a8a; } .chip-100 { background: #065f46; } .chip-500 { background: #1f2937; border-color: var(--accent); color: var(--accent); } .chip-1000 { background: #581c87; }
        
        .split-hands { display: flex; gap: 50px; justify-content: center; }
        .split-hand { display: flex; flex-direction: column; align-items: center; gap: 10px; padding: 20px; border-radius: var(--radius); transition: all 0.3s; border: 2px solid transparent; }
        .split-hand.active { border-color: var(--accent); background: rgba(168, 85, 247, 0.1); box-shadow: 0 0 20px var(--accent-glow); }
        .split-hand-label { font-size: 11px; text-transform: uppercase; letter-spacing: 1px; color: var(--text-secondary); }
        
        .bj-win-indicator { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 48px; font-weight: 700; text-shadow: 0 0 30px currentColor; opacity: 0; transition: all 0.5s; z-index: 50; pointer-events: none; }
        .bj-win-indicator.show { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
        
        .dice-container { width: 100%; max-width: 500px; }
        .dice-modes { display: flex; gap: 10px; margin-bottom: 30px; }
        .mode-btn { flex: 1; padding: 16px; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: var(--radius-sm); color: var(--text-secondary); font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s; text-transform: uppercase; letter-spacing: 1px; }
        .mode-btn.active { background: var(--accent); color: white; border-color: var(--accent); box-shadow: 0 0 15px var(--accent-glow); }
        .dice-result-box { background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: var(--radius); padding: 50px; text-align: center; margin-bottom: 25px; position: relative; overflow: hidden; box-shadow: 0 0 20px rgba(0,0,0,0.3), inset 0 0 20px rgba(168, 85, 247, 0.05); }
        .dice-result-box::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px; background: linear-gradient(90deg, transparent, var(--accent), transparent); }
        .dice-result { font-family: 'JetBrains Mono', monospace; font-size: 80px; font-weight: 700; transition: all 0.3s; background: linear-gradient(135deg, #fff, var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; filter: drop-shadow(0 0 10px var(--accent-glow)); }
        .dice-result.rolling { animation: diceRoll 0.08s infinite; filter: blur(2px); }
        @keyframes diceRoll { 0% { transform: scale(0.95); } 50% { transform: scale(1.05); } 100% { transform: scale(0.95); } }
        
        .mines-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; max-width: 420px; margin: 0 auto; }
        .mine-cell { width: 75px; height: 75px; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: var(--radius-sm); display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s; font-size: 28px; position: relative; overflow: hidden; }
        .mine-cell::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(168, 85, 247, 0.1), transparent); transition: 0.5s; }
        .mine-cell:hover::before { left: 100%; }
        .mine-cell:hover:not(.revealed):not(.bomb) { border-color: var(--accent); transform: translateY(-3px); box-shadow: 0 5px 15px var(--accent-glow); }
        .mine-cell.revealed { background: var(--accent); border-color: var(--accent); animation: revealCell 0.4s ease; color: white; box-shadow: 0 0 20px var(--accent-glow); }
        .mine-cell.bomb { background: var(--red); border-color: var(--red); animation: bombFlash 0.6s ease; color: white; box-shadow: 0 0 20px rgba(239, 68, 68, 0.5); }
        @keyframes revealCell { 0% { transform: scale(0.8) rotate(-10deg); opacity: 0; } 50% { transform: scale(1.1) rotate(5deg); } 100% { transform: scale(1) rotate(0); opacity: 1; } }
        @keyframes bombFlash { 0%, 100% { transform: scale(1); } 25% { transform: scale(1.15); } 50% { transform: scale(0.9); } 75% { transform: scale(1.05); } }
        
        .slots-menu { width: 100%; max-width: 1200px; padding: 40px; }
        .slots-menu h2 { font-size: 36px; font-family: 'Rajdhani'; margin-bottom: 10px; text-align: center; text-shadow: 0 0 20px var(--accent-glow); }
        .slots-menu > p { text-align: center; color: var(--text-secondary); margin-bottom: 40px; }
        .slots-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }
        .slot-card { background: var(--bg-secondary); border: 2px solid var(--border); border-radius: var(--radius); padding: 30px; text-align: center; transition: all 0.3s; cursor: pointer; position: relative; overflow: hidden; }
        .slot-card:hover { transform: translateY(-5px); border-color: var(--accent); box-shadow: 0 0 30px var(--accent-glow); }
        .slot-card.featured { border-color: var(--accent); background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), transparent); }
        .slot-card.featured::before { content: '★ FEATURED'; position: absolute; top: 15px; right: 15px; background: var(--accent); color: white; font-size: 10px; font-weight: 700; padding: 5px 12px; border-radius: 20px; letter-spacing: 1px; }
        .slot-preview { height: 150px; display: flex; align-items: center; justify-content: center; font-size: 80px; margin-bottom: 20px; background: var(--bg-tertiary); border-radius: var(--radius-sm); border: 1px solid var(--border); }
        .slot-name { font-size: 24px; font-weight: 700; margin-bottom: 10px; font-family: 'Rajdhani'; }
        .slot-desc { color: var(--text-muted); font-size: 13px; margin-bottom: 20px; line-height: 1.5; }
        .slot-stats { display: flex; justify-content: center; gap: 20px; margin-bottom: 20px; font-size: 12px; color: var(--text-secondary); }
        
        .huff-puff-container { width: 100%; max-width: 900px; display: flex; flex-direction: column; align-items: center; gap: 30px; }
        .huff-puff-machine { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; background: linear-gradient(135deg, #1a0b2e, #0f0518); padding: 30px; border-radius: var(--radius); border: 2px solid var(--accent); box-shadow: 0 0 40px var(--accent-glow), inset 0 0 40px rgba(168, 85, 247, 0.1); position: relative; }
        .huff-puff-machine::before { content: ''; position: absolute; top: -2px; left: -2px; right: -2px; bottom: -2px; background: linear-gradient(135deg, var(--accent), transparent, var(--accent)); border-radius: var(--radius); z-index: -1; opacity: 0.5; }
        .huff-reel { width: 140px; height: 120px; background: var(--bg); border-radius: var(--radius-sm); overflow: hidden; position: relative; border: 1px solid var(--border); box-shadow: inset 0 0 20px rgba(0,0,0,0.5); }
        .huff-reel.spinning { animation: huffSpin 0.1s linear infinite; }
        @keyframes huffSpin { 0% { filter: blur(0); } 50% { filter: blur(3px); } 100% { filter: blur(0); } }
        .huff-symbol { width: 140px; height: 120px; display: flex; align-items: center; justify-content: center; font-size: 60px; transition: all 0.3s; }
        .huff-symbol.wild { filter: drop-shadow(0 0 10px #fbbf24); animation: pulse 1s infinite; }
        .huff-symbol.bonus { filter: drop-shadow(0 0 10px var(--accent)); animation: pulse 1s infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        
        .huff-info { display: flex; gap: 30px; justify-content: center; flex-wrap: wrap; }
        .huff-stat { text-align: center; padding: 15px 25px; background: var(--bg-tertiary); border-radius: var(--radius-sm); border: 1px solid var(--border); min-width: 120px; }
        .huff-stat-label { font-size: 11px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 5px; }
        .huff-stat-value { font-family: 'JetBrains Mono'; font-size: 20px; font-weight: 700; color: var(--accent); text-shadow: 0 0 10px var(--accent-glow); }
        
        .bonus-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 30000; display: none; align-items: center; justify-content: center; flex-direction: column; backdrop-filter: blur(10px); }
        .bonus-overlay.active { display: flex; }
        .bonus-title { font-size: 48px; font-family: 'Rajdhani'; color: var(--accent); text-shadow: 0 0 30px var(--accent-glow); margin-bottom: 20px; animation: bonusPulse 1s infinite; }
        @keyframes bonusPulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        
        .bonus-grid-container { position: relative; margin-bottom: 30px; }
        .bonus-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; }
        .bonus-cell { width: 120px; height: 100px; background: var(--bg-tertiary); border: 2px solid var(--border); border-radius: var(--radius-sm); display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 40px; transition: all 0.3s; position: relative; overflow: hidden; }
        .bonus-cell.straw { background: #fef3c7; border-color: #fbbf24; box-shadow: 0 0 20px rgba(251, 191, 36, 0.3); }
        .bonus-cell.wood { background: #92400e; border-color: #b45309; box-shadow: 0 0 20px rgba(180, 83, 9, 0.3); }
        .bonus-cell.brick { background: #7f1d1d; border-color: #b91c1c; box-shadow: 0 0 20px rgba(185, 28, 28, 0.3); }
        .bonus-cell.gold { background: #fbbf24; border-color: #f59e0b; box-shadow: 0 0 30px rgba(251, 191, 36, 0.5); }
        .bonus-cell.diamond { background: #06b6d4; border-color: #22d3ee; box-shadow: 0 0 40px rgba(34, 211, 238, 0.6); animation: diamondPulse 0.5s infinite alternate; }
        @keyframes diamondPulse { from { box-shadow: 0 0 20px rgba(34, 211, 238, 0.4); } to { box-shadow: 0 0 40px rgba(34, 211, 238, 0.8); } }
        
        .bonus-cell-value { font-size: 12px; font-weight: 700; margin-top: 5px; color: rgba(0,0,0,0.6); }
        .bonus-cell.straw .bonus-cell-value { color: #92400e; }
        .bonus-cell.wood .bonus-cell-value { color: #fef3c7; }
        .bonus-cell.brick .bonus-cell-value { color: #fef3c7; }
        .bonus-cell.gold .bonus-cell-value { color: #7f1d1d; }
        .bonus-cell.diamond .bonus-cell-value { color: #fff; }
        
        .bonus-spins { font-size: 24px; color: var(--text-secondary); margin-bottom: 20px; }
        .bonus-spins span { color: var(--accent); font-weight: 700; text-shadow: 0 0 10px var(--accent-glow); }
        
        .wolf-container { position: absolute; left: -200px; top: 50%; transform: translateY(-50%); z-index: 100; }
        .wolf-emoji { font-size: 120px; filter: drop-shadow(0 0 20px rgba(168, 85, 247, 0.5)); }
        .wind-lines { position: absolute; right: -100px; top: 50%; transform: translateY(-50%); opacity: 0; }
        .wind-line { width: 80px; height: 4px; background: linear-gradient(90deg, transparent, rgba(168, 85, 247, 0.8), transparent); margin: 10px 0; border-radius: 2px; }
        
        .wolf-blow-animation .wolf-container { animation: wolfEnter 1s forwards; }
        .wolf-blow-animation .wind-lines { animation: windBlow 2s forwards; }
        .wolf-blow-animation .bonus-grid { animation: gridShake 2s forwards; }
        
        @keyframes wolfEnter { 
            0% { left: -200px; } 
            100% { left: 50px; } 
        }
        @keyframes windBlow { 
            0%, 100% { opacity: 0; } 
            20%, 80% { opacity: 1; } 
        }
        @keyframes gridShake { 
            0%, 100% { transform: translateX(0); } 
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px) rotate(-1deg); } 
            20%, 40%, 60%, 80% { transform: translateX(5px) rotate(1deg); } 
        }
        
        .bonus-win { font-size: 36px; color: var(--accent); text-shadow: 0 0 20px var(--accent-glow); margin-top: 20px; opacity: 0; transition: all 0.5s; }
        .bonus-win.show { opacity: 1; }
        
        .buy-bonus-btn { padding: 15px 40px; background: linear-gradient(135deg, #fbbf24, #f59e0b); color: #000; border: none; border-radius: var(--radius-sm); font-size: 16px; font-weight: 700; cursor: pointer; transition: all 0.3s; text-transform: uppercase; letter-spacing: 1px; box-shadow: 0 0 20px rgba(251, 191, 36, 0.4); margin-top: 20px; }
        .buy-bonus-btn:hover { transform: translateY(-2px); box-shadow: 0 0 30px rgba(251, 191, 36, 0.6); }
        .buy-bonus-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        
        .plinko-container { width: 100%; display: flex; flex-direction: column; align-items: center; gap: 20px; }
        .plinko-board { position: relative; width: 800px; height: 650px; background: linear-gradient(180deg, #0a0a0c 0%, #050505 100%); border: 2px solid var(--border); border-radius: var(--radius); overflow: hidden; box-shadow: 0 0 40px rgba(168, 85, 247, 0.1), inset 0 0 40px rgba(0,0,0,0.5); }
        .plinko-board::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px; background: linear-gradient(90deg, transparent, var(--accent), transparent); opacity: 0.5; }
        #plinkoCanvas { width: 100%; height: 100%; display: block; }
        .plinko-multipliers { display: flex; gap: 4px; margin-top: 15px; padding: 15px; background: var(--bg-tertiary); border-radius: var(--radius-sm); justify-content: center; flex-wrap: wrap; max-width: 800px; }
        .plinko-mult { min-width: 50px; height: 45px; display: flex; align-items: center; justify-content: center; font-family: 'JetBrains Mono'; font-size: 12px; font-weight: 700; border-radius: 6px; color: white; transition: all 0.3s; border: 1px solid transparent; }
        .plinko-mult.high { background: rgba(34, 197, 94, 0.2); border-color: #22c55e; color: #22c55e; }
        .plinko-mult.med { background: rgba(168, 85, 247, 0.2); border-color: var(--accent); color: var(--accent); }
        .plinko-mult.low { background: rgba(239, 68, 68, 0.2); border-color: #ef4444; color: #ef4444; }
        .plinko-mult.active { transform: scale(1.1); box-shadow: 0 0 20px currentColor; }
        .plinko-controls { display: flex; flex-direction: column; gap: 15px; width: 100%; max-width: 400px; }
        .plinko-risk-selector { display: flex; gap: 10px; }
        .plinko-risk-btn { flex: 1; padding: 12px; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: var(--radius-sm); color: var(--text-secondary); font-size: 13px; font-weight: 600; cursor: pointer; transition: all 0.2s; }
        .plinko-risk-btn.active { background: var(--accent); color: white; border-color: var(--accent); box-shadow: 0 0 15px var(--accent-glow); }
        .plinko-row-control { display: flex; align-items: center; gap: 15px; background: var(--bg-tertiary); padding: 15px; border-radius: var(--radius-sm); border: 1px solid var(--border); }
        .plinko-row-control label { font-size: 12px; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 1px; min-width: 80px; }
        .plinko-row-control input[type="range"] { flex: 1; height: 6px; -webkit-appearance: none; background: var(--border); border-radius: 3px; outline: none; }
        .plinko-row-control input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: 18px; height: 18px; background: var(--accent); border-radius: 50%; cursor: pointer; box-shadow: 0 0 10px var(--accent-glow); }
        .plinko-row-value { font-family: 'JetBrains Mono'; font-size: 18px; font-weight: 700; color: var(--accent); min-width: 30px; text-align: center; text-shadow: 0 0 10px var(--accent-glow); }
        .plinko-stats-row { display: flex; gap: 30px; justify-content: center; margin-top: 10px; }
        .plinko-stat-box { text-align: center; padding: 15px 25px; background: var(--bg-tertiary); border-radius: var(--radius-sm); border: 1px solid var(--border); }
        .plinko-stat-label { font-size: 11px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 5px; }
        .plinko-stat-value { font-family: 'JetBrains Mono'; font-size: 20px; font-weight: 700; color: var(--accent); text-shadow: 0 0 10px var(--accent-glow); }
        
        .unbox-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 20000; display: none; align-items: center; justify-content: center; flex-direction: column; backdrop-filter: blur(10px); }
        .unbox-overlay.active { display: flex; }
        .case-spinner { width: 900px; height: 220px; background: var(--bg-secondary); border: 2px solid var(--border); border-radius: var(--radius); position: relative; overflow: hidden; margin-bottom: 50px; box-shadow: 0 0 40px var(--accent-glow); }
        .case-spinner::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px; background: linear-gradient(90deg, transparent, var(--accent), transparent); }
        .spinner-line { position: absolute; left: 50%; top: 0; bottom: 0; width: 4px; background: var(--accent); transform: translateX(-50%); z-index: 10; box-shadow: 0 0 30px var(--accent-glow); }
        .spinner-items { display: flex; gap: 12px; padding: 25px; position: absolute; left: 0; height: 100%; align-items: center; }
        .spinner-item { width: 170px; height: 170px; background: var(--bg-tertiary); border: 3px solid var(--border); border-radius: var(--radius-sm); display: flex; flex-direction: column; align-items: center; justify-content: center; flex-shrink: 0; transition: all 0.3s; }
        .spinner-item .item-icon { font-size: 70px; margin-bottom: 10px; filter: drop-shadow(0 5px 15px rgba(0,0,0,0.3)); }
        .spinner-item .item-name { font-size: 13px; font-weight: 600; text-align: center; padding: 0 10px; }
        .spinner-item.winner { border-color: var(--accent); transform: scale(1.05); box-shadow: 0 0 40px var(--accent-glow); }
        
        .win-reveal { text-align: center; opacity: 0; transform: scale(0.5); transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1); }
        .win-reveal.show { opacity: 1; transform: scale(1); }
        .win-reveal .win-icon { font-size: 140px; margin-bottom: 20px; display: block; animation: winBounce 1.5s ease infinite; filter: drop-shadow(0 10px 40px rgba(0,0,0,0.5)); }
        @keyframes winBounce { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        .win-reveal .win-name { font-size: 42px; font-weight: 700; margin-bottom: 10px; font-family: 'Rajdhani'; }
        .win-reveal .win-rarity { font-size: 20px; text-transform: uppercase; letter-spacing: 4px; margin-bottom: 15px; font-weight: 600; }
        .win-reveal .win-value { font-family: 'JetBrains Mono'; font-size: 32px; color: var(--accent); font-weight: 700; text-shadow: 0 0 20px var(--accent-glow); }
        
        .batch-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 25000; display: none; align-items: center; justify-content: center; flex-direction: column; backdrop-filter: blur(10px); }
        .batch-overlay.active { display: flex; }
        .batch-container { display: grid; grid-template-columns: repeat(5, 1fr); gap: 20px; margin-bottom: 40px; }
        .batch-item { width: 200px; height: 250px; background: var(--bg-secondary); border: 2px solid var(--border); border-radius: var(--radius); display: flex; flex-direction: column; align-items: center; justify-content: center; opacity: 0; transform: translateY(20px); transition: all 0.5s; }
        .batch-item.show { opacity: 1; transform: translateY(0); }
        .batch-item .batch-icon { font-size: 80px; margin-bottom: 15px; }
        .batch-item .batch-name { font-size: 14px; font-weight: 600; text-align: center; margin-bottom: 10px; }
        .batch-item .batch-value { font-family: 'JetBrains Mono'; font-size: 18px; color: var(--accent); }
        
        .cases-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 30px; padding: 20px; width: 100%; max-width: 1400px; }
        .case-card { background: var(--bg-secondary); border: 2px solid var(--border); border-radius: var(--radius); padding: 35px; text-align: center; transition: all 0.3s; position: relative; overflow: hidden; }
        .case-card:hover { transform: translateY(-5px); border-color: var(--accent); box-shadow: 0 0 30px var(--accent-glow); }
        .case-card.featured { border-color: var(--accent); background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), transparent); }
        .case-card.featured::before { content: '★ FEATURED'; position: absolute; top: 15px; right: 15px; background: var(--accent); color: white; font-size: 10px; font-weight: 700; padding: 5px 12px; border-radius: 20px; letter-spacing: 1px; box-shadow: 0 0 10px var(--accent-glow); }
        .case-icon { font-size: 90px; margin-bottom: 20px; display: block; filter: drop-shadow(0 10px 20px rgba(0,0,0,0.3)); }
        .case-name { font-size: 26px; font-weight: 700; margin-bottom: 10px; font-family: 'Rajdhani'; letter-spacing: 1px; }
        .case-price { font-family: 'JetBrains Mono'; font-size: 28px; color: var(--accent); margin-bottom: 15px; font-weight: 700; text-shadow: 0 0 10px var(--accent-glow); }
        .case-desc { color: var(--text-muted); font-size: 13px; margin-bottom: 25px; line-height: 1.5; }
        .case-odds { display: flex; justify-content: center; gap: 8px; margin-bottom: 25px; flex-wrap: wrap; }
        .odds-dot { width: 10px; height: 10px; border-radius: 50%; }
        .case-buttons { display: flex; gap: 10px; justify-content: center; }
        .btn-open { padding: 12px 24px; background: var(--accent); color: white; border: none; border-radius: var(--radius-sm); font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s; box-shadow: 0 0 15px var(--accent-glow); }
        .btn-open:hover { background: var(--accent-hover); box-shadow: 0 0 25px var(--accent-glow); }
        .btn-open:disabled { opacity: 0.5; cursor: not-allowed; box-shadow: none; }
        .btn-open5 { padding: 12px 24px; background: var(--purple-dim); color: white; border: none; border-radius: var(--radius-sm); font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s; box-shadow: 0 0 15px rgba(124, 58, 237, 0.3); }
        .btn-open5:hover { background: var(--accent); box-shadow: 0 0 25px var(--accent-glow); }
        .btn-open5:disabled { opacity: 0.5; cursor: not-allowed; box-shadow: none; }
        
        .inventory-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: var(--bg-tertiary); border-radius: var(--radius); padding: 25px; border: 1px solid var(--border); position: relative; overflow: hidden; }
        .stat-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px; background: linear-gradient(90deg, transparent, var(--accent), transparent); opacity: 0.5; }
        .stat-label { font-size: 11px; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
        .stat-value { font-family: 'JetBrains Mono'; font-size: 28px; font-weight: 700; }
        .stat-value.gold { color: var(--accent); text-shadow: 0 0 10px var(--accent-glow); }
        .stat-value.green { color: var(--green); }
        .stat-value.red { color: var(--red); }
        
        .inventory-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; }
        .inv-item { background: var(--bg-tertiary); border-radius: var(--radius); overflow: hidden; border: 1px solid var(--border); transition: all 0.3s; position: relative; }
        .inv-item:hover { transform: translateY(-5px); border-color: var(--accent); box-shadow: 0 0 20px var(--accent-glow); }
        .inv-item-rarity { position: absolute; top: 0; left: 0; right: 0; height: 4px; }
        .inv-item-icon { height: 150px; display: flex; align-items: center; justify-content: center; font-size: 80px; background: linear-gradient(180deg, rgba(168, 85, 247, 0.05), transparent); }
        .inv-item-info { padding: 20px; }
        .inv-item-name { font-weight: 600; font-size: 15px; margin-bottom: 5px; }
        .inv-item-type { font-size: 11px; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 15px; }
        .inv-item-value { font-family: 'JetBrains Mono'; font-size: 18px; color: var(--accent); font-weight: 700; margin-bottom: 15px; text-shadow: 0 0 5px var(--accent-glow); }
        .inv-item-actions { display: flex; gap: 10px; }
        .inv-btn { flex: 1; padding: 10px; border: none; border-radius: var(--radius-sm); font-size: 12px; font-weight: 600; cursor: pointer; transition: all 0.2s; text-transform: uppercase; }
        .inv-btn-sell { background: var(--red); color: white; }
        .inv-btn-sell:hover { filter: brightness(1.1); box-shadow: 0 0 10px rgba(239, 68, 68, 0.4); }
        
        .profile-container { width: 100%; max-width: 900px; margin: 0 auto; padding: 20px; }
        .profile-header { background: var(--bg-secondary); border-radius: var(--radius); padding: 40px; border: 1px solid var(--border); margin-bottom: 30px; display: flex; align-items: center; gap: 30px; box-shadow: 0 0 20px rgba(0,0,0,0.3); }
        .profile-avatar { width: 100px; height: 100px; border-radius: 50%; background: linear-gradient(135deg, var(--accent), var(--purple-dim)); display: flex; align-items: center; justify-content: center; font-size: 40px; font-weight: 700; border: 3px solid var(--border); box-shadow: 0 0 20px var(--accent-glow); }
        .profile-info h2 { font-size: 32px; margin-bottom: 5px; font-family: 'Rajdhani'; }
        .profile-info p { color: var(--text-secondary); }
        .pnl-card { background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(124, 58, 237, 0.05)); border: 2px solid var(--border); border-radius: var(--radius); padding: 40px; text-align: center; position: relative; overflow: hidden; box-shadow: 0 0 30px rgba(168, 85, 247, 0.1); }
        .pnl-card::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(168, 85, 247, 0.02) 10px, rgba(168, 85, 247, 0.02) 20px); }
        .pnl-card::after { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px; background: linear-gradient(90deg, transparent, var(--accent), transparent); }
        .pnl-label { font-size: 14px; text-transform: uppercase; letter-spacing: 3px; color: var(--text-secondary); margin-bottom: 15px; position: relative; }
        .pnl-value { font-family: 'JetBrains Mono'; font-size: 72px; font-weight: 700; position: relative; letter-spacing: -2px; }
        .pnl-value.positive { color: var(--green); text-shadow: 0 0 40px rgba(34,197,94,0.3); }
        .pnl-value.negative { color: var(--red); text-shadow: 0 0 40px rgba(239,68,68,0.3); }
        .share-btn { margin-top: 30px; padding: 15px 40px; background: var(--accent); color: white; border: none; border-radius: var(--radius-sm); font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s; text-transform: uppercase; letter-spacing: 1px; box-shadow: 0 0 20px var(--accent-glow); }
        .share-btn:hover { background: var(--accent-hover); transform: translateY(-2px); box-shadow: 0 0 30px var(--accent-glow); }
        
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 30px; }
        .stat-box { background: var(--bg-tertiary); padding: 25px; border-radius: var(--radius); text-align: center; border: 1px solid var(--border); position: relative; overflow: hidden; }
        .stat-box::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px; background: linear-gradient(90deg, transparent, var(--accent), transparent); opacity: 0.5; }
        .stat-box-value { font-family: 'JetBrains Mono'; font-size: 24px; font-weight: 700; color: var(--text); margin-bottom: 5px; }
        .stat-box-label { font-size: 12px; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 1px; }
        
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); display: none; align-items: center; justify-content: center; z-index: 10001; backdrop-filter: blur(5px); }
        .modal-overlay.active { display: flex; }
        .modal { background: var(--bg-secondary); border: 1px solid var(--border); border-radius: var(--radius); width: 90%; max-width: 700px; max-height: 90vh; overflow-y: auto; padding: 35px; box-shadow: 0 0 40px var(--accent-glow); position: relative; }
        .modal::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px; background: linear-gradient(90deg, transparent, var(--accent), transparent); }
        .modal h2 { font-size: 28px; margin-bottom: 25px; text-align: center; font-family: 'Rajdhani'; letter-spacing: 2px; text-shadow: 0 0 20px var(--accent-glow); }
        .modal-close { position: absolute; top: 20px; right: 20px; background: none; border: none; color: var(--text-secondary); font-size: 28px; cursor: pointer; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: all 0.2s; }
        .modal-close:hover { background: var(--bg-hover); color: var(--text); box-shadow: 0 0 10px var(--accent-glow); }
        
        .handbook-section { margin-bottom: 30px; }
        .handbook-section h3 { font-size: 16px; color: var(--accent); margin-bottom: 15px; text-transform: uppercase; letter-spacing: 2px; font-family: 'Rajdhani'; text-shadow: 0 0 10px var(--accent-glow); }
        .handbook-section p { color: var(--text-secondary); line-height: 1.7; font-size: 14px; margin-bottom: 15px; }
        .handbook-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; }
        .handbook-item { background: var(--bg-tertiary); padding: 20px; border-radius: var(--radius-sm); border: 1px solid var(--border); }
        .handbook-item strong { color: var(--accent); display: block; margin-bottom: 8px; font-size: 14px; }
        .handbook-item span { color: var(--text-secondary); font-size: 13px; line-height: 1.5; display: block; }
        
        .console-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.95); z-index: 99999; display: none; align-items: center; justify-content: center; backdrop-filter: blur(10px); }
        .console-box { width: 800px; background: #050505; border: 1px solid var(--accent); border-radius: 8px; font-family: 'JetBrains Mono', monospace; overflow: hidden; box-shadow: 0 0 60px var(--accent-glow); }
        .console-header { background: #0a0a0a; padding: 20px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
        .console-title { color: var(--accent); font-size: 14px; font-weight: 600; letter-spacing: 2px; text-shadow: 0 0 10px var(--accent-glow); }
        .console-close { background: none; border: none; color: #666; font-size: 20px; cursor: pointer; transition: color 0.2s; }
        .console-close:hover { color: #fff; }
        .console-logs { height: 400px; padding: 20px; overflow-y: auto; font-size: 13px; line-height: 1.6; color: var(--accent); }
        .console-logs .log-entry { margin-bottom: 8px; }
        .console-logs .log-time { color: #555; margin-right: 10px; }
        .console-logs .log-cmd { color: #fff; cursor: pointer; }
        .console-logs .log-cmd:hover { text-decoration: underline; }
        .console-input-area { display: flex; border-top: 1px solid var(--border); background: #0a0a0a; }
        .console-prompt { padding: 20px; color: var(--accent); font-weight: bold; text-shadow: 0 0 10px var(--accent-glow); }
        .console-input { flex: 1; background: transparent; border: none; color: #fff; padding: 20px; font-family: inherit; font-size: 14px; outline: none; }
        .console-status { padding: 15px 20px; background: #0a0a0a; border-top: 1px solid var(--border); font-size: 12px; display: flex; justify-content: space-between; align-items: center; }
        .status-indicator { display: flex; align-items: center; gap: 8px; }
        .status-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--accent); animation: pulse 2s infinite; box-shadow: 0 0 10px var(--accent-glow); }
        .status-dot.rigged { background: #f00; animation: pulse 0.5s infinite; box-shadow: 0 0 10px rgba(255,0,0,0.5); }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        
        .rarity-consumer { color: #9ca3af; } .rarity-industrial { color: #60a5fa; } .rarity-milspec { color: #3b82f6; } .rarity-restricted { color: #a855f7; }
        .rarity-classified { color: #d946ef; } .rarity-covert { color: #ef4444; } .rarity-contraband { color: #fbbf24; }
        .rarity-bg-consumer { background: #9ca3af; } .rarity-bg-industrial { background: #60a5fa; } .rarity-bg-milspec { background: #3b82f6; } .rarity-bg-restricted { background: #a855f7; }
        .rarity-bg-classified { background: #d946ef; } .rarity-bg-covert { background: #ef4444; } .rarity-bg-contraband { background: #fbbf24; }

        /* NEW GAME STYLES */
        
        /* Poker Styles */
        .poker-table { width: 100%; height: 100%; background: linear-gradient(180deg, #0d3328 0%, #051a14 100%); border-radius: var(--radius); position: relative; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; box-shadow: inset 0 0 100px rgba(0,0,0,0.5); border: 3px solid #2d5a3d; }
        .poker-table::before { content: 'NOIR POKER'; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 80px; font-family: 'Rajdhani'; font-weight: 700; color: rgba(255,255,255,0.03); pointer-events: none; letter-spacing: 20px; }
        .poker-community { display: flex; gap: 10px; margin: 20px 0; padding: 20px; background: rgba(0,0,0,0.3); border-radius: var(--radius); border: 1px solid rgba(255,255,255,0.1); }
        .poker-pot { position: absolute; top: 30%; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.6); padding: 15px 30px; border-radius: 30px; border: 2px solid var(--gold); font-family: 'JetBrains Mono'; font-size: 20px; color: var(--gold); text-shadow: 0 0 10px var(--gold); }
        .poker-player { position: absolute; display: flex; flex-direction: column; align-items: center; gap: 10px; }
        .poker-player.pos-0 { bottom: 20px; left: 50%; transform: translateX(-50%); }
        .poker-player.pos-1 { top: 50%; left: 20px; transform: translateY(-50%); }
        .poker-player.pos-2 { top: 20px; left: 50%; transform: translateX(-50%); }
        .poker-player.pos-3 { top: 50%; right: 20px; transform: translateY(-50%); }
        .poker-avatar { width: 60px; height: 60px; border-radius: 50%; background: var(--bg-tertiary); border: 3px solid var(--border); display: flex; align-items: center; justify-content: center; font-size: 24px; }
        .poker-avatar.active { border-color: var(--gold); box-shadow: 0 0 20px var(--gold); }
        .poker-cards { display: flex; gap: 5px; }
        .poker-card-small { width: 50px; height: 70px; background: linear-gradient(135deg, #1a1a1a, #0a0a0a); border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 20px; border: 1px solid var(--border); }
        .poker-card-small.hidden { background: repeating-linear-gradient(45deg, #1a0b2e, #1a0b2e 5px, #0f0518 5px, #0f0518 10px); }
        .poker-info { text-align: center; font-size: 12px; }
        .poker-name { color: var(--text); font-weight: 600; }
        .poker-chips { color: var(--gold); font-family: 'JetBrains Mono'; }
        .poker-actions { display: flex; gap: 10px; margin-top: 20px; }
        .poker-btn { padding: 12px 30px; border: none; border-radius: var(--radius-sm); font-size: 14px; font-weight: 700; cursor: pointer; transition: all 0.2s; text-transform: uppercase; }
        .poker-btn.call { background: #3b82f6; color: white; }
        .poker-btn.raise { background: var(--accent); color: white; }
        .poker-btn.fold { background: var(--red); color: white; }
        .poker-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        
        /* Keno Styles */
        .keno-grid { display: grid; grid-template-columns: repeat(10, 1fr); gap: 8px; max-width: 600px; margin: 0 auto; }
        .keno-number { width: 50px; height: 50px; background: var(--bg-tertiary); border: 2px solid var(--border); border-radius: var(--radius-sm); display: flex; align-items: center; justify-content: center; font-family: 'JetBrains Mono'; font-size: 18px; font-weight: 700; cursor: pointer; transition: all 0.2s; }
        .keno-number:hover { border-color: var(--accent); transform: scale(1.1); }
        .keno-number.selected { background: var(--accent); border-color: var(--accent); box-shadow: 0 0 15px var(--accent-glow); }
        .keno-number.hit { background: var(--green); border-color: var(--green); animation: hitPulse 0.5s ease; }
        .keno-number.miss { opacity: 0.3; }
        @keyframes hitPulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.2); } }
        
        /* Dragon Tower Styles */
        .tower-container { display: flex; flex-direction: column; align-items: center; gap: 15px; }
        .tower-level { display: flex; gap: 20px; }
        .tower-tile { width: 100px; height: 80px; background: var(--bg-tertiary); border: 2px solid var(--border); border-radius: var(--radius-sm); cursor: pointer; transition: all 0.3s; display: flex; align-items: center; justify-content: center; font-size: 30px; position: relative; overflow: hidden; }
        .tower-tile:hover:not(.revealed) { border-color: var(--accent); box-shadow: 0 0 15px var(--accent-glow); }
        .tower-tile.revealed.safe { background: var(--green); border-color: var(--green); }
        .tower-tile.revealed.dragon { background: var(--red); border-color: var(--red); animation: dragonShake 0.5s ease; }
        @keyframes dragonShake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-10px); } 75% { transform: translateX(10px); } }
        .tower-multiplier { position: absolute; top: 5px; right: 5px; font-size: 10px; color: var(--text-secondary); }
        
        /* Wheel Styles */
        .wheel-container { position: relative; width: 500px; height: 500px; }
        .wheel-outer { width: 100%; height: 100%; border-radius: 50%; border: 10px solid var(--gold); position: relative; overflow: hidden; box-shadow: 0 0 40px rgba(251, 191, 36, 0.3); }
        .wheel-section { position: absolute; width: 50%; height: 50%; transform-origin: 100% 100%; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 700; color: white; text-shadow: 0 1px 2px rgba(0,0,0,0.8); }
        .wheel-pointer { position: absolute; top: -20px; left: 50%; transform: translateX(-50%); width: 0; height: 0; border-left: 20px solid transparent; border-right: 20px solid transparent; border-top: 40px solid var(--gold); z-index: 10; filter: drop-shadow(0 5px 10px rgba(0,0,0,0.5)); }
        .wheel-center { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 80px; height: 80px; background: var(--bg); border-radius: 50%; border: 5px solid var(--gold); display: flex; align-items: center; justify-content: center; font-size: 30px; z-index: 5; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
        
        /* HiLo Styles */
        .hilo-container { display: flex; flex-direction: column; align-items: center; gap: 30px; }
        .hilo-card-display { width: 200px; height: 280px; background: linear-gradient(135deg, #1a1a1a, #0a0a0a); border-radius: var(--radius); border: 3px solid var(--accent); display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 80px; box-shadow: 0 0 40px var(--accent-glow); position: relative; }
        .hilo-card-value { position: absolute; top: 15px; left: 15px; font-size: 24px; font-weight: 700; }
        .hilo-card-value.bottom { top: auto; bottom: 15px; left: auto; right: 15px; transform: rotate(180deg); }
        .hilo-buttons { display: flex; gap: 20px; }
        .hilo-btn { padding: 20px 50px; border: none; border-radius: var(--radius); font-size: 24px; font-weight: 700; cursor: pointer; transition: all 0.3s; text-transform: uppercase; }
        .hilo-btn.high { background: linear-gradient(135deg, #22c55e, #16a34a); color: white; box-shadow: 0 0 20px rgba(34, 197, 94, 0.4); }
        .hilo-btn.low { background: linear-gradient(135deg, #ef4444, #dc2626); color: white; box-shadow: 0 0 20px rgba(239, 68, 68, 0.4); }
        .hilo-btn:hover { transform: translateY(-3px); filter: brightness(1.2); }
        .hilo-history { display: flex; gap: 5px; margin-top: 20px; }
        .hilo-history-card { width: 40px; height: 56px; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 16px; }
        
        /* Baccarat Styles */
        .baccarat-table { width: 100%; max-width: 800px; background: linear-gradient(135deg, #0f172a, #020617); border-radius: var(--radius); padding: 40px; border: 2px solid var(--border); }
        .baccarat-layout { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-bottom: 30px; }
        .baccarat-bet-area { background: var(--bg-tertiary); border: 2px solid var(--border); border-radius: var(--radius); padding: 30px; text-align: center; cursor: pointer; transition: all 0.3s; position: relative; }
        .baccarat-bet-area:hover { border-color: var(--accent); box-shadow: 0 0 20px var(--accent-glow); }
        .baccarat-bet-area.selected { background: rgba(168, 85, 247, 0.2); border-color: var(--accent); }
        .baccarat-bet-area .bet-label { font-size: 20px; font-weight: 700; margin-bottom: 10px; }
        .baccarat-bet-area .bet-payout { font-size: 14px; color: var(--text-secondary); }
        .baccarat-bet-area .bet-amount { position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); font-family: 'JetBrains Mono'; color: var(--accent); font-weight: 700; }
        .baccarat-hands { display: flex; justify-content: space-around; margin-top: 30px; }
        .baccarat-hand { text-align: center; }
        .baccarat-hand h3 { margin-bottom: 15px; color: var(--text-secondary); }
        .baccarat-cards { display: flex; gap: 10px; justify-content: center; }
        
        /* Sports Betting Styles */
        .sports-container { width: 100%; max-width: 1000px; }
        .pingpong-court { width: 100%; height: 400px; background: linear-gradient(180deg, #1e3a5f 0%, #0f172a 100%); border-radius: var(--radius); position: relative; overflow: hidden; border: 3px solid #3b82f6; }
        .pingpong-net { position: absolute; left: 50%; top: 0; bottom: 0; width: 4px; background: rgba(255,255,255,0.3); transform: translateX(-50%); }
        .pingpong-line { position: absolute; left: 0; right: 0; height: 2px; background: rgba(255,255,255,0.2); }
        .pingpong-player { position: absolute; width: 20px; height: 60px; background: white; border-radius: 4px; transition: all 0.1s; }
        .pingpong-ball { position: absolute; width: 12px; height: 12px; background: var(--orange); border-radius: 50%; box-shadow: 0 0 10px var(--orange); transition: all 0.05s linear; }
        .pingpong-score { position: absolute; top: 20px; font-family: 'JetBrains Mono'; font-size: 48px; font-weight: 700; color: white; text-shadow: 0 0 20px rgba(255,255,255,0.5); }
        .pingpong-score.p1 { left: 30%; }
        .pingpong-score.p2 { right: 30%; }
        .sports-odds { display: flex; gap: 20px; margin-top: 20px; justify-content: center; }
        .odds-box { background: var(--bg-tertiary); border: 2px solid var(--border); border-radius: var(--radius); padding: 20px 40px; text-align: center; cursor: pointer; transition: all 0.3s; }
        .odds-box:hover { border-color: var(--accent); transform: translateY(-2px); }
        .odds-box.selected { background: rgba(168, 85, 247, 0.2); border-color: var(--accent); box-shadow: 0 0 20px var(--accent-glow); }
        .odds-box .player-name { font-size: 14px; color: var(--text-secondary); margin-bottom: 5px; }
        .odds-box .odds-value { font-family: 'JetBrains Mono'; font-size: 24px; font-weight: 700; color: var(--accent); }
        
        /* Pump Game Styles */
        .pump-container { display: flex; flex-direction: column; align-items: center; gap: 30px; }
        .pump-display { width: 300px; height: 400px; background: var(--bg-tertiary); border-radius: var(--radius); border: 3px solid var(--border); position: relative; overflow: hidden; }
        .pump-fill { position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(180deg, var(--green), #16a34a); transition: height 0.3s; box-shadow: 0 0 30px rgba(34, 197, 94, 0.5); }
        .pump-multiplier { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-family: 'JetBrains Mono'; font-size: 48px; font-weight: 700; color: white; text-shadow: 0 0 20px rgba(0,0,0,0.8); z-index: 10; }
        .pump-btn { width: 150px; height: 150px; border-radius: 50%; background: linear-gradient(135deg, var(--accent), var(--purple-dim)); border: 5px solid var(--border); color: white; font-size: 24px; font-weight: 700; cursor: pointer; transition: all 0.1s; box-shadow: 0 0 30px var(--accent-glow); display: flex; align-items: center; justify-content: center; user-select: none; }
        .pump-btn:active { transform: scale(0.95); box-shadow: 0 0 15px var(--accent-glow); }
        .pump-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        
        /* Slide Game Styles */
        .slide-container { width: 100%; max-width: 800px; }
        .slide-track { height: 100px; background: var(--bg-tertiary); border-radius: var(--radius); position: relative; overflow: hidden; border: 2px solid var(--border); margin-bottom: 20px; }
        .slide-target { position: absolute; top: 10px; bottom: 10px; background: rgba(34, 197, 94, 0.3); border: 2px solid var(--green); border-radius: var(--radius-sm); }
        .slide-cursor { position: absolute; top: 5px; bottom: 5px; width: 20px; background: var(--accent); border-radius: 4px; box-shadow: 0 0 20px var(--accent-glow); transition: left 0.1s linear; }
        .slide-controls { display: flex; gap: 20px; justify-content: center; }
        .slide-btn { padding: 15px 40px; border: none; border-radius: var(--radius); font-size: 18px; font-weight: 700; cursor: pointer; transition: all 0.2s; }
        .slide-btn.start { background: var(--accent); color: white; box-shadow: 0 0 20px var(--accent-glow); }
        .slide-btn.stop { background: var(--red); color: white; box-shadow: 0 0 20px rgba(239, 68, 68, 0.4); }
        
        /* Diamonds Styles */
        .diamonds-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 15px; max-width: 500px; margin: 0 auto; }
        .diamond-tile { width: 90px; height: 90px; background: var(--bg-tertiary); border: 2px solid var(--border); border-radius: var(--radius); cursor: pointer; transition: all 0.3s; display: flex; align-items: center; justify-content: center; font-size: 40px.diamond-tile:hover:not(.revealed) { border-color: var(--accent); box-shadow: 0 0 15px var(--accent-glow); transform: translateY(-3px); }
        .diamond-tile.revealed { background: var(--bg); animation: diamondFlip 0.6s ease; }
        .diamond-tile.revealed.diamond { background: linear-gradient(135deg, #06b6d4, #22d3ee); border-color: #22d3ee; box-shadow: 0 0 30px rgba(34, 211, 238, 0.5); }
        .diamond-tile.revealed.empty { opacity: 0.5; }
        @keyframes diamondFlip { 0% { transform: rotateY(0); } 50% { transform: rotateY(90deg); } 100% { transform: rotateY(0); } }
        
        /* Enhanced Dragon Bonus */
        .dragon-bonus-container { text-align: center; padding: 20px; max-width: 900px; }
        .dragon-egg { width: 200px; height: 250px; background: linear-gradient(135deg, #7c3aed, #a855f7); border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%; margin: 0 auto 30px; position: relative; box-shadow: 0 0 40px var(--accent-glow); animation: eggFloat 3s ease-in-out infinite; display: flex; align-items: center; justify-content: center; font-size: 100px; }
        @keyframes eggFloat { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
        .dragon-cracks { position: absolute; top: 0; left: 0; right: 0; bottom: 0; border-radius: inherit; overflow: hidden; opacity: 0; transition: opacity 0.3s; }
        .dragon-cracks.show { opacity: 1; }
        .crack { position: absolute; background: rgba(0,0,0,0.5); }
        .dragon-hatch { animation: hatchBreak 1s forwards; }
        @keyframes hatchBreak { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(0); opacity: 0; } }
        .dragon-reveal { display: none; font-size: 150px; animation: dragonAppear 0.5s ease; filter: drop-shadow(0 0 30px var(--accent-glow)); }
        @keyframes dragonAppear { 0% { transform: scale(0) rotate(-180deg); } 100% { transform: scale(1) rotate(0); } }
        .dragon-reveal.show { display: block; }
        .dragon-type { font-size: 24px; margin: 20px 0; text-transform: uppercase; letter-spacing: 3px; }
        .dragon-reward { font-family: 'JetBrains Mono'; font-size: 36px; color: var(--gold); text-shadow: 0 0 20px var(--gold); }
        
        /* Enhanced Cosmic Bonus */
        .cosmic-bonus-container { text-align: center; padding: 20px; }
        .rocket-launch-pad { width: 300px; height: 400px; margin: 0 auto; position: relative; }
        .rocket-ship { position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); font-size: 120px; transition: all 0.5s; filter: drop-shadow(0 10px 20px rgba(168, 85, 247, 0.5)); }
        .rocket-ship.launching { animation: rocketLaunch 3s forwards; }
        @keyframes rocketLaunch { 0% { bottom: 0; transform: translateX(-50%) scale(1); } 50% { bottom: 200px; transform: translateX(-50%) scale(0.8); } 100% { bottom: 500px; transform: translateX(-50%) scale(0.3); opacity: 0; } }
        .rocket-trail { position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 20px; height: 0; background: linear-gradient(180deg, var(--accent), transparent); opacity: 0; }
        .rocket-trail.show { animation: trailGrow 3s forwards; }
        @keyframes trailGrow { 0% { height: 0; opacity: 1; } 100% { height: 400px; opacity: 0; } }
        .orbit-reveal { display: none; position: relative; width: 400px; height: 400px; margin: 0 auto; }
        .orbit-reveal.show { display: block; animation: orbitSpin 2s linear infinite; }
        @keyframes orbitSpin { from { transform: rotate(0); } to { transform: rotate(360deg); } }
        .orbit-planet { position: absolute; width: 80px; height: 80px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 40px; box-shadow: 0 0 30px currentColor; }
        .planet-gold { background: var(--gold); color: #000; top: 0; left: 50%; transform: translateX(-50%); }
        .planet-purple { background: var(--accent); color: white; bottom: 0; left: 50%; transform: translateX(-50%); }
        .planet-blue { background: #3b82f6; color: white; left: 0; top: 50%; transform: translateY(-50%); }
        .planet-red { background: var(--red); color: white; right: 0; top: 50%; transform: translateY(-50%); }
        .orbit-center { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 120px; height: 120px; background: var(--bg-tertiary); border-radius: 50%; border: 3px solid var(--accent); display: flex; align-items: center; justify-content: center; font-size: 60px; box-shadow: 0 0 40px var(--accent-glow); }
        .orbit-result { margin-top: 30px; font-size: 24px; }
        .orbit-multiplier { font-family: 'JetBrains Mono'; font-size: 48px; color: var(--accent); text-shadow: 0 0 20px var(--accent-glow); margin-top: 10px; }
        
        /* New Slot Layouts */
        .slot-3x3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .slot-4x4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; }
        .slot-5x4 { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; }
        .slot-6x3 { display: grid; grid-template-columns: repeat(6, 1fr); gap: 8px; }
        .slot-cell-3x3 { width: 120px; height: 120px; }
        .slot-cell-4x4 { width: 100px; height: 100px; }
        .slot-cell-5x4 { width: 90px; height: 90px; }
        .slot-cell-6x3 { width: 80px; height: 100px; }
        
        .megaways-display { display: flex; gap: 5px; margin-bottom: 20px; }
        .megaways-reel { display: flex; flex-direction: column; gap: 5px; }
        .megaways-symbol { width: 80px; height: 60px; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: var(--radius-sm); display: flex; align-items: center; justify-content: center; font-size: 30px; }
        
        /* Panel for full width games */
        .panel { width: 100%; height: 100%; overflow-y: auto; }
    </style>
</head>
<body>
    <div class="auth-screen" id="authScreen">
        <div class="auth-container">
            <div class="auth-logo">
                <h1>NOIR</h1>
                <p>Premium Crypto Casino</p>
            </div>
            <div class="auth-tabs">
                <div class="auth-tab active" onclick="switchTab('login')">Login</div>
                <div class="auth-tab" onclick="switchTab('register')">Register</div>
            </div>
            <form id="loginForm" onsubmit="handleLogin(event)">
                <div class="input-group">
                    <label>Username</label>
                    <input type="text" id="loginUser" required autocomplete="username">
                </div>
                <div class="input-group">
                    <label>Password</label>
                    <input type="password" id="loginPass" required autocomplete="current-password">
                </div>
                <button type="submit" class="btn-primary">Login</button>
            </form>
            <form id="registerForm" style="display: none;" onsubmit="handleRegister(event)">
                <div class="input-group">
                    <label>Username</label>
                    <input type="text" id="regUser" required autocomplete="username">
                </div>
                <div class="input-group">
                    <label>Password</label>
                    <input type="password" id="regPass" required autocomplete="new-password">
                </div>
                <div class="input-group">
                    <label>Confirm Password</label>
                    <input type="password" id="regConfirm" required autocomplete="new-password">
                </div>
                <button type="submit" class="btn-primary">Create Account</button>
            </form>
        </div>
    </div>

    <div class="main-container" id="mainApp">
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="brand" id="brandLogo">
                    <span class="brand-icon">◈</span> NOIR
                </div>
                <div class="balance-display">
                    <div class="balance-label">Balance</div>
                    <div class="balance-amount" id="sidebarBalance">$0.00</div>
                </div>
                <div class="inventory-value">
                    <div class="inv-label">Inventory Value</div>
                    <div class="inv-amount" id="invValue">$0.00</div>
                </div>
            </div>
            
            <div class="game-list">
                <div class="game-category">Casino Games</div>
                <div class="game-item active" onclick="loadGame('roulette', this)">
                    <span style="width: 28px; text-align: center;">◈</span> Roulette
                </div>
                <div class="game-item" onclick="loadGame('blackjack', this)">
                    <span style="width: 28px; text-align: center;">♠</span> Blackjack
                </div>
                <div class="game-item" onclick="loadGame('poker', this)">
                    <span style="width: 28px; text-align: center;">🃏</span> Texas Hold'em
                </div>
                <div class="game-item" onclick="loadGame('baccarat', this)">
                    <span style="width: 28px; text-align: center;">🎴</span> Baccarat
                </div>
                <div class="game-item" onclick="loadGame('dice', this)">
                    <span style="width: 28px; text-align: center;">🎲</span> Dice
                </div>
                <div class="game-item" onclick="loadGame('mines', this)">
                    <span style="width: 28px; text-align: center;">💣</span> Mines
                </div>
                <div class="game-item" onclick="loadGame('slots', this)">
                    <span style="width: 28px; text-align: center;">🎰</span> Slots
                </div>
                <div class="game-item" onclick="loadGame('plinko', this)">
                    <span style="width: 28px; text-align: center;">●</span> Plinko
                </div>
                <div class="game-item" onclick="loadGame('keno', this)">
                    <span style="width: 28px; text-align: center;">🔢</span> Keno
                </div>
                <div class="game-item" onclick="loadGame('dragontower', this)">
                    <span style="width: 28px; text-align: center;">🐉</span> Dragon Tower
                </div>
                <div class="game-item" onclick="loadGame('wheel', this)">
                    <span style="width: 28px; text-align: center;">🎯</span> Wheel
                </div>
                <div class="game-item" onclick="loadGame('hilo', this)">
                    <span style="width: 28px; text-align: center;">↕️</span> Hi-Lo
                </div>
                <div class="game-item" onclick="loadGame('pump', this)">
                    <span style="width: 28px; text-align: center;">💨</span> Pump
                </div>
                <div class="game-item" onclick="loadGame('slide', this)">
                    <span style="width: 28px; text-align: center;">📊</span> Slide
                </div>
                <div class="game-item" onclick="loadGame('diamonds', this)">
                    <span style="width: 28px; text-align: center;">💎</span> Diamonds
                </div>
                
                <div class="game-category">Rewards</div>
                <div class="game-item" onclick="loadGame('cases', this)">
                    <span style="width: 28px; text-align: center;">🎁</span> Case Opening
                </div>
                <div class="game-item" onclick="loadGame('inventory', this)">
                    <span style="width: 28px; text-align: center;">🎒</span> Inventory
                </div>
                
                <div class="game-category">Sports</div>
                <div class="game-item" onclick="loadGame('sports', this)">
                    <span style="width: 28px; text-align: center;">🏓</span> Sports Betting
                </div>
                
                <div class="game-category">Account</div>
                <div class="game-item" onclick="loadGame('profile', this)">
                    <span style="width: 28px; text-align: center;">👤</span> Profile
                </div>
            </div>
            
            <div class="sidebar-footer">
                <button class="user-btn" onclick="loadGame('profile')">
                    <div class="user-avatar" id="userAvatar">U</div>
                    <div style="text-align: left;">
                        <div style="font-weight: 600; font-size: 14px;" id="sidebarUsername">User</div>
                        <div style="font-size: 11px; color: var(--text-muted);">View Profile</div>
                    </div>
                </button>
            </div>
        </aside>

        <main class="main-content">
            <header class="top-bar">
                <div class="top-left">
                    <div style="color: var(--text-muted); font-size: 13px;" id="currentGameDisplay">Roulette</div>
                </div>
                <div class="top-right">
                    <button class="btn-wallet" id="depositBtn" onclick="deposit()">+ Deposit $1,000</button>
                    <button class="btn-logout" onclick="logout()">Logout</button>
                </div>
            </header>
            
            <div class="game-area" id="gameArea"></div>
        </main>
    </div>

    <div class="unbox-overlay" id="unboxOverlay">
        <div class="case-spinner">
            <div class="spinner-line"></div>
            <div class="spinner-items" id="spinnerItems"></div>
        </div>
        <div class="win-reveal" id="winReveal">
            <span class="win-icon" id="winIcon">📦</span>
            <div class="win-name" id="winName">Item Name</div>
            <div class="win-rarity" id="winRarity">Rarity</div>
            <div class="win-value" id="winValue">$0.00</div>
            <button class="btn-primary" style="margin-top: 40px; padding: 18px 50px; font-size: 16px;" onclick="closeUnbox()">Collect Item</button>
        </div>
    </div>

    <div class="batch-overlay" id="batchOverlay">
        <h2 style="font-size: 36px; font-family: 'Rajdhani'; margin-bottom: 30px; text-shadow: 0 0 20px var(--accent-glow);">Batch Opening</h2>
        <div class="batch-container" id="batchContainer"></div>
        <button class="btn-primary" style="padding: 18px 50px; font-size: 16px;" onclick="closeBatch()">Collect All Items</button>
    </div>

    <div class="bonus-overlay" id="bonusOverlay">
        <div class="bonus-title" id="bonusTitle">BONUS ROUND!</div>
        <div class="bonus-spins" id="bonusSpinsDisplay">Spins Remaining: <span id="bonusSpins">5</span></div>
        <div class="bonus-grid-container" id="bonusGridContainer">
            <div class="wolf-container" id="wolfContainer">
                <div class="wolf-emoji">🐺</div>
                <div class="wind-lines">
                    <div class="wind-line"></div>
                    <div class="wind-line"></div>
                    <div class="wind-line"></div>
                </div>
            </div>
            <div class="bonus-grid" id="bonusGrid"></div>
        </div>
        <div class="bonus-win" id="bonusWin"></div>
    </div>

    <div class="modal-overlay" id="handbookModal">
        <div class="modal">
            <button class="modal-close" onclick="closeHandbook()">×</button>
            <h2 id="handbookTitle">📘 Game Handbook</h2>
            <div id="handbookContent"></div>
        </div>
    </div>

    <div class="console-overlay" id="consoleOverlay">
        <div class="console-box">
            <div class="console-header">
                <span class="console-title">◈ NOIR_ADMIN_V4.0 // ROOT ACCESS</span>
                <button class="console-close" onclick="toggleConsole()">×</button>
            </div>
            <div class="console-logs" id="consoleLogs">
                <div class="log-entry"><span class="log-time">[SYSTEM]</span> Admin console initialized</div>
                <div class="log-entry"><span class="log-time">[SYSTEM]</span> Type 'help' for commands</div>
            </div>
            <div class="console-input-area">
                <span class="console-prompt">root@noir:~$</span>
                <input type="text" class="console-input" id="consoleInput" placeholder="Enter command..." onkeydown="if(event.key==='Enter') executeCommand()">
            </div>
            <div class="console-status">
                <div class="status-indicator">
                    <div class="status-dot" id="rigStatusDot"></div>
                    <span id="rigStatusText">SYSTEM NORMAL</span>
                </div>
                <span style="color: #555; font-size: 11px;">SECURE CONNECTION</span>
            </div>
        </div>
    </div>

    <script>
        // ==========================================
        // GLOBAL STATE & CONFIGURATION
        // ==========================================
        
        const STATE = {
            currentUser: null,
            balance: 1000,
            inventory: [],
            stats: { wagered: 0, gamesPlayed: 0, wins: 0, profit: 0, totalDeposited: 0 },
            rigged: false,
            currentGame: 'roulette',
            lastDeposit: 0,
            depositCooldown: 300000,
            currentSlot: null,
            pokerHand: null,
            kenoSelected: [],
            towerLevel: 0,
            hiloHistory: []
        };

        let PLINKO_CONFIG = {
            rows: 16,
            risk: 'medium',
            balls: [],
            isDropping: false
        };

        // ==========================================
        // CASE & ITEM DATABASES
        // ==========================================
        
        const CASES = {
            budget: { 
                name: "Budget Box", 
                price: 10, 
                icon: "📦", 
                desc: "For the small time gamblers. Mostly trash.", 
                color: "#6b7280", 
                odds: { consumer: 75, industrial: 22, milspec: 2.8, restricted: 0.2, classified: 0, covert: 0, contraband: 0 } 
            },
            standard: { 
                name: "Premium Case", 
                price: 100, 
                icon: "🎁", 
                desc: "The classic. Balanced risk for casual openers.", 
                color: "#a855f7", 
                featured: true, 
                odds: { consumer: 60, industrial: 28, milspec: 8, restricted: 3, classified: 0.8, covert: 0.2, contraband: 0 } 
            },
            electronics: { 
                name: "Tech Vault", 
                price: 500, 
                icon: "💻", 
                desc: "High-end electronics. GPUs, phones, and more.", 
                color: "#3b82f6", 
                odds: { consumer: 55, industrial: 25, milspec: 14, restricted: 4.5, classified: 1.3, covert: 0.2, contraband: 0 } 
            },
            watches: { 
                name: "Timepieces", 
                price: 5000, 
                icon: "⌚", 
                desc: "Luxury watches. Roll for Rolex, AP, Patek...", 
                color: "#22c55e", 
                odds: { consumer: 50, industrial: 22, milspec: 18, restricted: 7, classified: 2.5, covert: 0.5, contraband: 0 } 
            },
            hypercar: { 
                name: "Hypercar Collection", 
                price: 50000, 
                icon: "🏎️", 
                desc: "The ultimate high roller case. Cars worth millions.", 
                color: "#ef4444", 
                odds: { consumer: 45, industrial: 20, milspec: 20, restricted: 10, classified: 4, covert: 0.9, contraband: 0.1 } 
            }
        };

        const ITEMS_DB = [
            { name: "Dust", icon: "💨", rarity: "consumer", value: 0.001, type: "Junk" },
            { name: "Trash", icon: "🗑️", rarity: "consumer", value: 0.01, type: "Junk" },
            { name: "Stick", icon: "🌿", rarity: "consumer", value: 0.05, type: "Junk" },
            { name: "Rock", icon: "🪨", rarity: "consumer", value: 0.10, type: "Junk" },
            { name: "Empty Can", icon: "🥫", rarity: "consumer", value: 0.50, type: "Junk" },
            { name: "$5 Gift Card", icon: "💳", rarity: "industrial", value: 5, type: "Gift Card" },
            { name: "USB Cable", icon: "🔌", rarity: "industrial", value: 8, type: "Accessory" },
            { name: "Phone Case", icon: "📱", rarity: "industrial", value: 15, type: "Accessory" },
            { name: "Mousepad", icon: "🖱️", rarity: "industrial", value: 25, type: "Accessory" },
            { name: "AirPods", icon: "🎧", rarity: "milspec", value: 150, type: "Audio" },
            { name: "Gaming Mouse", icon: "🖱️", rarity: "milspec", value: 80, type: "Peripheral" },
            { name: "Mechanical Keyboard", icon: "⌨️", rarity: "milspec", value: 120, type: "Peripheral" },
            { name: "Monitor 144Hz", icon: "🖥️", rarity: "milspec", value: 300, type: "Display" },
            { name: "iPad", icon: "📱", rarity: "milspec", value: 400, type: "Tablet" },
            { name: "PS5", icon: "🎮", rarity: "restricted", value: 500, type: "Console" },
            { name: "Xbox Series X", icon: "🎮", rarity: "restricted", value: 500, type: "Console" },
            { name: "iPhone 15", icon: "📱", rarity: "restricted", value: 800, type: "Phone" },
            { name: "Gaming PC", icon: "🖥️", rarity: "restricted", value: 1500, type: "Computer" },
            { name: "MacBook Air", icon: "💻", rarity: "restricted", value: 1200, type: "Laptop" },
            { name: "RTX 4090", icon: "🎴", rarity: "classified", value: 1600, type: "GPU" },
            { name: "MacBook Pro", icon: "💻", rarity: "classified", value: 2500, type: "Laptop" },
            { name: "Samsung 85\" TV", icon: "📺", rarity: "classified", value: 3000, type: "TV" },
            { name: "High-End PC Build", icon: "🖥️", rarity: "classified", value: 3500, type: "Computer" },
            { name: "Rolex Submariner", icon: "⌚", rarity: "covert", value: 15000, type: "Watch" },
            { name: "Audemars Piguet", icon: "⌚", rarity: "covert", value: 45000, type: "Watch" },
            { name: "Patek Philippe", icon: "⌚", rarity: "covert", value: 80000, type: "Watch" },
            { name: "Porsche 911", icon: "🚗", rarity: "contraband", value: 120000, type: "Car" },
            { name: "Lamborghini Huracan", icon: "🏎️", rarity: "contraband", value: 250000, type: "Car" },
            { name: "Ferrari F8", icon: "🏎️", rarity: "contraband", value: 300000, type: "Car" },
            { name: "Bugatti Chiron", icon: "🏎️", rarity: "contraband", value: 3000000, type: "Car" },
            { name: "Private Island", icon: "🏝️", rarity: "contraband", value: 5000000, type: "Property" }
        ];

        const RARITY_COLORS = {
            consumer: '#9ca3af', industrial: '#60a5fa', milspec: '#3b82f6', restricted: '#a855f7',
            classified: '#d946ef', covert: '#ef4444', contraband: '#fbbf24'
        };

        // ==========================================
        // SLOT MACHINE CONFIGURATIONS
        // ==========================================
        
        const SLOT_GAMES = {
            huffpuff: {
                name: "Huff & Puff",
                icon: "🐷",
                desc: "Build houses, blow them down, win big! 5x3 slot with bonus rounds. 6 Hard Hats = Bonus!",
                featured: true,
                type: "huffpuff",
                layout: "5x3",
                bonusCost: 500
            },
            dragon: {
                name: "Dragon's Hoard",
                icon: "🐉",
                desc: "Medieval fantasy slot with expanding wilds. 3 Dragons = Epic Dragon Bonus with hatching eggs!",
                type: "dragon",
                layout: "5x3",
                bonusCost: 750
            },
            cosmic: {
                name: "Cosmic Burst",
                icon: "🌌",
                desc: "Space-themed slot with cascading reels. 3 Rockets = Rocket Launch Bonus with orbital prizes!",
                type: "cosmic",
                layout: "5x3",
                bonusCost: 1000
            },
            classic: {
                name: "Classic Slots",
                icon: "🎰",
                desc: "Traditional 3-reel slot machine. Simple and elegant.",
                type: "classic",
                layout: "3x3",
                bonusCost: 250
            },
            megaways: {
                name: "Mega Ways",
                icon: "⚡",
                desc: "Dynamic reels with up to 117,649 ways to win! Cascading wins and increasing multipliers.",
                type: "megaways",
                layout: "dynamic",
                bonusCost: 1500
            },
            egyptian: {
                name: "Pharaoh's Riches",
                icon: "👑",
                desc: "Ancient Egypt themed 5x4 slot. 3 Scarabs = Free Spins with expanding symbols!",
                type: "egyptian",
                layout: "5x4",
                bonusCost: 800
            },
            fruitblast: {
                name: "Fruit Blast",
                icon: "🍓",
                desc: "Cluster pays slot! Match 5+ fruits for explosive wins and juice multipliers.",
                type: "cluster",
                layout: "6x6",
                bonusCost: 600
            }
        };

        const SLOT_SYMBOLS = {
            huffpuff: [
                { sym: '⛑️', name: 'hardhat', type: 'bonus', weight: 5, value: 0 },
                { sym: '🐷', name: 'pig', type: 'high', weight: 8, value: 50 },
                { sym: '🐺', name: 'wolf', type: 'high', weight: 10, value: 40 },
                { sym: '🏠', name: 'house', type: 'mid', weight: 15, value: 25 },
                { sym: '🌾', name: 'straw', type: 'low', weight: 25, value: 10 },
                { sym: '🪵', name: 'wood', type: 'low', weight: 22, value: 8 },
                { sym: '🧱', name: 'brick', type: 'low', weight: 15, value: 12 }
            ],
            dragon: [
                { sym: '🥚', name: 'egg', type: 'bonus', weight: 4, value: 0 },
                { sym: '👑', name: 'crown', type: 'high', weight: 8, value: 60 },
                { sym: '⚔️', name: 'sword', type: 'high', weight: 10, value: 45 },
                { sym: '🛡️', name: 'shield', type: 'mid', weight: 15, value: 30 },
                { sym: '💎', name: 'gem', type: 'mid', weight: 18, value: 25 },
                { sym: '🏰', name: 'castle', type: 'low', weight: 25, value: 15 },
                { sym: '💰', name: 'coins', type: 'low', weight: 20, value: 10 }
            ],
            cosmic: [
                { sym: '🚀', name: 'rocket', type: 'bonus', weight: 4, value: 0 },
                { sym: '🌟', name: 'star', type: 'high', weight: 8, value: 55 },
                { sym: '🪐', name: 'planet', type: 'high', weight: 10, value: 40 },
                { sym: '🕳️', name: 'blackhole', type: 'mid', weight: 15, value: 30 },
                { sym: '👽', name: 'alien', type: 'mid', weight: 18, value: 20 },
                { sym: '🌙', name: 'moon', type: 'low', weight: 25, value: 12 },
                { sym: '☄️', name: 'comet', type: 'low', weight: 20, value: 8 }
            ],
            classic: [
                { sym: '7️⃣', name: 'seven', type: 'high', weight: 5, value: 100 },
                { sym: '💎', name: 'diamond', type: 'high', weight: 8, value: 50 },
                { sym: '🔔', name: 'bell', type: 'mid', weight: 12, value: 25 },
                { sym: '🍒', name: 'cherry', type: 'low', weight: 25, value: 10 },
                { sym: '🍋', name: 'lemon', type: 'low', weight: 25, value: 5 },
                { sym: '🍊', name: 'orange', type: 'low', weight: 25, value: 3 }
            ],
            megaways: [
                { sym: '⚡', name: 'lightning', type: 'bonus', weight: 3, value: 0 },
                { sym: '👑', name: 'crown', type: 'high', weight: 6, value: 50 },
                { sym: '💎', name: 'diamond', type: 'high', weight: 8, value: 40 },
                { sym: '7️⃣', name: 'seven', type: 'mid', weight: 12, value: 25 },
                { sym: '🔔', name: 'bell', type: 'mid', weight: 15, value: 15 },
                { sym: '🍒', name: 'cherry', type: 'low', weight: 28, value: 8 },
                { sym: '🍋', name: 'lemon', type: 'low', weight: 28, value: 5 }
            ],
            egyptian: [
                { sym: '🔺', name: 'pyramid', type: 'bonus', weight: 4, value: 0 },
                { sym: '👁️', name: 'eye', type: 'high', weight: 8, value: 60 },
                { sym: '🐈', name: 'cat', type: 'high', weight: 10, value: 45 },
                { sym: '🪲', name: 'scarab', type: 'mid', weight: 15, value: 30 },
                { sym: '📜', name: 'scroll', type: 'mid', weight: 18, value: 20 },
                { sym: '𓀀', name: 'hieroglyph', type: 'low', weight: 25, value: 12 },
                { sym: '🏺', name: 'vase', type: 'low', weight: 20, value: 8 }
            ],
            fruitblast: [
                { sym: '🍓', name: 'strawberry', type: 'high', weight: 10, value: 20 },
                { sym: '🍇', name: 'grape', type: 'high', weight: 12, value: 15 },
                { sym: '🍊', name: 'orange', type: 'mid', weight: 15, value: 12 },
                { sym: '🍋', name: 'lemon', type: 'mid', weight: 18, value: 10 },
                { sym: '🍎', name: 'apple', type: 'low', weight: 22, value: 8 },
                { sym: '🍐', name: 'pear', type: 'low', weight: 23, value: 5 }
            ]
        };

        const HOUSE_VALUES = {
            straw: 1, wood: 3, brick: 8, gold: 20, diamond: 50
        };

        // ==========================================
        // AUTHENTICATION FUNCTIONS
        // ==========================================
        
        function switchTab(tab) {
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById('loginForm').style.display = tab === 'login' ? 'block' : 'none';
            document.getElementById('registerForm').style.display = tab === 'login' ? 'none' : 'block';
        }

        function handleRegister(e) {
            e.preventDefault();
            const user = document.getElementById('regUser').value.trim();
            const pass = document.getElementById('regPass').value;
            const confirm = document.getElementById('regConfirm').value;
            
            if (!user || !pass) return alert('Please fill all fields');
            if (pass !== confirm) return alert('Passwords do not match');
            if (pass.length < 4) return alert('Password too short');
            
            let users = JSON.parse(localStorage.getItem('noir_users') || '{}');
            if (users[user]) return alert('Username already exists');
            
            users[user] = { 
                password: pass, 
                balance: 1000, 
                inventory: [], 
                stats: { wagered: 0, gamesPlayed: 0, wins: 0, profit: 0, totalDeposited: 0 } 
            };
            localStorage.setItem('noir_users', JSON.stringify(users));
            alert('Account created! Please login.');
            switchTab('login');
            document.getElementById('loginUser').value = user;
        }

        function handleLogin(e) {
            e.preventDefault();
            const user = document.getElementById('loginUser').value.trim();
            const pass = document.getElementById('loginPass').value;
            
            let users = JSON.parse(localStorage.getItem('noir_users') || '{}');
            if (!users[user] || users[user].password !== pass) return alert('Invalid credentials');
            
            STATE.currentUser = user;
            STATE.balance = users[user].balance;
            STATE.inventory = users[user].inventory || [];
            STATE.stats = users[user].stats || { wagered: 0, gamesPlayed: 0, wins: 0, profit: 0, totalDeposited: 0 };
            
            document.getElementById('authScreen').style.display = 'none';
            document.getElementById('mainApp').classList.add('active');
            updateUI();
            loadGame('roulette');
            updateDepositButton();
        }

        function logout() {
            saveData();
            location.reload();
        }

        function saveData() {
            if (!STATE.currentUser) return;
            let users = JSON.parse(localStorage.getItem('noir_users') || '{}');
            users[STATE.currentUser] = { 
                password: users[STATE.currentUser].password, 
                balance: STATE.balance, 
                inventory: STATE.inventory, 
                stats: STATE.stats 
            };
            localStorage.setItem('noir_users', JSON.stringify(users));
        }

        // ==========================================
        // UI FUNCTIONS
        // ==========================================
        
        function updateUI() {
            document.getElementById('sidebarBalance').textContent = '$' + STATE.balance.toLocaleString('en-US', {minimumFractionDigits: 2});
            document.getElementById('sidebarUsername').textContent = STATE.currentUser || 'User';
            document.getElementById('userAvatar').textContent = STATE.currentUser ? STATE.currentUser[0].toUpperCase() : 'U';
            const invValue = STATE.inventory.reduce((sum, item) => sum + item.value, 0);
            document.getElementById('invValue').textContent = '$' + invValue.toLocaleString('en-US', {minimumFractionDigits: 2});
        }

        function updateDepositButton() {
            const btn = document.getElementById('depositBtn');
            const now = Date.now();
            const timeLeft = STATE.lastDeposit + STATE.depositCooldown - now;
            
            if (timeLeft > 0) {
                btn.disabled = true;
                const mins = Math.floor(timeLeft / 60000);
                const secs = Math.floor((timeLeft % 60000) / 1000);
                btn.innerHTML = `+ Deposit $1,000<span class="cooldown">${mins}:${secs.toString().padStart(2, '0')}</span>`;
                setTimeout(updateDepositButton, 1000);
            } else {
                btn.disabled = false;
                btn.innerHTML = '+ Deposit $1,000';
            }
        }

        function deposit() {
            const now = Date.now();
            if (now - STATE.lastDeposit < STATE.depositCooldown) {
                const mins = Math.floor((STATE.depositCooldown - (now - STATE.lastDeposit)) / 60000);
                alert(`Please wait ${mins} more minutes before depositing again.`);
                return;
            }
            STATE.balance += 1000;
            STATE.stats.totalDeposited += 1000;
            STATE.lastDeposit = now;
            updateUI();
            saveData();
            updateDepositButton();
        }

        function loadGame(game, el) {
            STATE.currentGame = game;
            if (el) {
                document.querySelectorAll('.game-item').forEach(i => i.classList.remove('active'));
                el.classList.add('active');
            }
            document.getElementById('currentGameDisplay').textContent = game.charAt(0).toUpperCase() + game.slice(1);
            const area = document.getElementById('gameArea');
            area.innerHTML = '';
            
            switch(game) {
                case 'roulette': renderRoulette(area); break;
                case 'blackjack': renderBlackjack(area); break;
                case 'poker': renderPoker(area); break;
                case 'baccarat': renderBaccarat(area); break;
                case 'dice': renderDice(area); break;
                case 'mines': renderMines(area); break;
                case 'slots': renderSlotsMenu(area); break;
                case 'plinko': renderPlinko(area); break;
                case 'keno': renderKeno(area); break;
                case 'dragontower': renderDragonTower(area); break;
                case 'wheel': renderWheel(area); break;
                case 'hilo': renderHiLo(area); break;
                case 'pump': renderPump(area); break;
                case 'slide': renderSlide(area); break;
                case 'diamonds': renderDiamonds(area); break;
                case 'cases': renderCases(area); break;
                case 'inventory': renderInventory(area); break;
                case 'sports': renderSports(area); break;
                case 'profile': renderProfile(area); break;
            }
        }

        function betPanelHtml(onBet, onCash = null) {
            return `
                <div class="bet-section">
                    <h3>Bet Amount</h3>
                    <div class="amount-input">
                        <input type="number" id="betAmount" value="10" step="0.01" min="0.01">
                        <div class="amount-btns">
                            <button class="amount-btn" onclick="const el=document.getElementById('betAmount');el.value=(parseFloat(el.value)/2).toFixed(2)">½</button>
                            <button class="amount-btn" onclick="const el=document.getElementById('betAmount');el.value=(parseFloat(el.value)*2).toFixed(2)">2×</button>
                            <button class="amount-btn" onclick="document.getElementById('betAmount').value=STATE.balance.toFixed(2)">Max</button>
                        </div>
                    </div>
                </div>
                <div class="quick-bets">
                    <button class="quick-bet" onclick="document.getElementById('betAmount').value=parseFloat(document.getElementById('betAmount').value||0)+1">+1</button>
                    <button class="quick-bet" onclick="document.getElementById('betAmount').value=parseFloat(document.getElementById('betAmount').value||0)+10">+10</button>
                    <button class="quick-bet" onclick="document.getElementById('betAmount').value=parseFloat(document.getElementById('betAmount').value||0)+100">+100</button>
                    <button class="quick-bet" onclick="document.getElementById('betAmount').value=0">Clear</button>
                </div>
                <button class="bet-btn" id="betBtn" onclick="${onBet}">Place Bet</button>
                ${onCash ? `<button class="cashout-btn" id="cashoutBtn" onclick="${onCash}" disabled>Cash Out</button>` : ''}
            `;
        }

        function weightedRandom(items) {
            const total = items.reduce((a, b) => a + (b.weight || 1), 0);
            let rand = Math.random() * total;
            for (const item of items) {
                rand -= (item.weight || 1);
                if (rand <= 0) return item;
            }
            return items[0];
        }

        function generateMultipliers(rows, risk) {
            const count = rows + 1;
            const center = Math.floor(count / 2);
            const mults = [];
            
            for (let i = 0; i < count; i++) {
                const distFromCenter = Math.abs(i - center);
                const maxDist = center;
                const ratio = distFromCenter / maxDist;
                
                let mult;
                if (risk === 'low') {
                    if (ratio < 0.2) mult = 0.5;
                    else if (ratio < 0.4) mult = 0.8;
                    else if (ratio < 0.6) mult = 1.0;
                    else if (ratio < 0.8) mult = 1.5;
                    else mult = 2.0;
                } else if (risk === 'medium') {
                    if (ratio < 0.15) mult = 0.1;
                    else if (ratio < 0.3) mult = 0.5;
                    else if (ratio < 0.45) mult = 1.0;
                    else if (ratio < 0.6) mult = 2.0;
                    else if (ratio < 0.8) mult = 5.0;
                    else mult = 10.0;
                } else {
                    if (ratio < 0.1) mult = 0.1;
                    else if (ratio < 0.2) mult = 0.2;
                    else if (ratio < 0.3) mult = 0.5;
                    else if (ratio < 0.4) mult = 1.0;
                    else if (ratio < 0.5) mult = 2.0;
                    else if (ratio < 0.7) mult = 5.0;
                    else if (ratio < 0.9) mult = 10.0;
                    else mult = 25.0;
                }
                
                mults.push(parseFloat(mult.toFixed(2)));
            }
            
            return mults;
        }

        // ==========================================
        // ROULETTE
        // ==========================================
        
        let rouletteBets = [], rouletteChip = 10;
        
        function renderRoulette(container) {
            container.innerHTML = `
                <div class="bet-panel">
                    <div class="bet-section">
                        <h3>Select Chip Value</h3>
                        <div style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center;">
                            ${[1, 5, 10, 25, 100, 500].map(v => `
                                <div class="poker-chip chip-${v}" onclick="setRouletteChip(${v})" 
                                    style="width: 55px; height: 55px; font-size: 11px; cursor: pointer; ${rouletteChip===v?'box-shadow:0 0 20px var(--accent-glow)':''}">
                                    $${v}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    <div style="margin-top: auto;">
                        <div style="display: flex; justify-content: space-between; padding: 15px; background: var(--bg-tertiary); border-radius: var(--radius-sm); margin-bottom: 15px;">
                            <span style="color: var(--text-secondary); font-size: 12px;">TOTAL BET</span>
                            <span style="font-family: 'JetBrains Mono'; font-weight: 700; color: var(--accent);" id="rouletteTotal">$0.00</span>
                        </div>
                        <button class="bet-btn" onclick="spinRoulette()">SPIN</button>
                        <button class="btn-primary" style="background: var(--red); margin-top: 10px;" onclick="clearRoulette()">CLEAR BETS</button>
                    </div>
                </div>
                <div class="game-display">
                    <div class="roulette-container">
                        <div class="roulette-wheel-area">
                            <div class="roulette-wheel" id="rouletteWheel">
                                <canvas id="rouletteCanvas" width="350" height="350"></canvas>
                                <div class="wheel-center">◈</div>
                            </div>
                            <div class="wheel-pointer"></div>
                            <div class="roulette-result-display" id="rouletteResult"></div>
                        </div>
                        <div class="roulette-table-container">
                            <div class="roulette-row">
                                <div class="roulette-cell green" style="height: 137px;" onclick="placeRouletteBet('num', 0)">0</div>
                                <div style="display: flex; flex-direction: column; gap: 2px;">
                                    ${[3,2,1].map(row => `
                                        <div class="roulette-row">
                                            ${[3,6,9,12,15,18,21,24,27,30,33,36].map((n, i) => {
                                                if (row === 2) n = [2,5,8,11,14,17,20,23,26,29,32,35][i];
                                                if (row === 1) n = [1,4,7,10,13,16,19,22,25,28,31,34][i];
                                                const isRed = [1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36].includes(n);
                                                return `<div class="roulette-cell ${isRed?'red':'black'}" onclick="placeRouletteBet('num', ${n})">${n}</div>`;
                                            }).join('')}
                                        </div>
                                    `).join('')}
                                </div>
                                <div style="display: flex; flex-direction: column; gap: 2px;">
                                    ${['3rd','2nd','1st'].map((l,i) => `<div class="roulette-cell" style="height: 45px; writing-mode: vertical-rl; text-orientation: mixed; font-size: 11px;" onclick="placeRouletteBet('column', ${3-i})">${l}</div>`).join('')}
                                </div>
                            </div>
                            <div class="roulette-row" style="margin-top: 2px;">
                                <div class="roulette-cell wide" onclick="placeRouletteBet('dozen', 1)">1st 12</div>
                                <div class="roulette-cell wide" onclick="placeRouletteBet('dozen', 2)">2nd 12</div>
                                <div class="roulette-cell wide" onclick="placeRouletteBet('dozen', 3)">3rd 12</div>
                            </div>
                            <div class="roulette-row" style="margin-top: 2px;">
                                <div class="roulette-cell" style="width: 68.5px;" onclick="placeRouletteBet('half', 'low')">1-18</div>
                                <div class="roulette-cell" style="width: 68.5px;" onclick="placeRouletteBet('even', true)">Even</div>
                                <div class="roulette-cell red" style="width: 68.5px;" onclick="placeRouletteBet('color', 'red')">Red</div>
                                <div class="roulette-cell black" style="width: 68.5px;" onclick="placeRouletteBet('color', 'black')">Black</div>
                                <div class="roulette-cell" style="width: 68.5px;" onclick="placeRouletteBet('odd', true)">Odd</div>
                                <div class="roulette-cell" style="width: 68.5px;" onclick="placeRouletteBet('half', 'high')">19-36</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            drawRouletteWheel();
        }

        function drawRouletteWheel() {
            const canvas = document.getElementById('rouletteCanvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const center = 175;
            const radius = 165;
            const numbers = [0, 32, 15, 19, 4, 21, 2, 25, 17, 34, 6, 27, 13, 36, 11, 30, 8, 23, 10, 5, 24, 16, 33, 1, 20, 14, 31, 9, 22, 18, 29, 7, 28, 12, 35, 3, 26];
            const reds = [1, 3, 5, 7, 9, 12, 14, 16, 18, 19, 21, 23, 25, 27, 30, 32, 34, 36];
            const anglePerNum = (Math.PI * 2) / 37;
            
            ctx.clearRect(0, 0, 350, 350);
            ctx.beginPath();
            ctx.arc(center, center, radius, 0, Math.PI * 2);
            ctx.fillStyle = '#111';
            ctx.fill();
            ctx.lineWidth = 8;
            ctx.strokeStyle = '#a855f7';
            ctx.stroke();
            
            numbers.forEach((num, i) => {
                const startAngle = i * anglePerNum - Math.PI / 2;
                const endAngle = (i + 1) * anglePerNum - Math.PI / 2;
                ctx.beginPath();
                ctx.moveTo(center, center);
                ctx.arc(center, center, radius - 8, startAngle, endAngle);
                ctx.closePath();
                if (num === 0) ctx.fillStyle = '#064e3b';
                else if (reds.includes(num)) ctx.fillStyle = '#7f1d1d';
                else ctx.fillStyle = '#111827';
                ctx.fill();
                ctx.stroke();
                
                const midAngle = startAngle + anglePerNum / 2;
                const textRadius = radius - 20;
                const x = center + Math.cos(midAngle) * textRadius;
                const y = center + Math.sin(midAngle) * textRadius;
                ctx.save();
                ctx.translate(x, y);
                ctx.rotate(midAngle + Math.PI / 2);
                ctx.fillStyle = 'white';
                ctx.font = 'bold 14px Inter';
                ctx.textAlign = 'center';
                ctx.fillText(num, 0, 5);
                ctx.restore();
            });
        }

        function setRouletteChip(val) {
            rouletteChip = val;
            renderRoulette(document.getElementById('gameArea'));
        }

        function placeRouletteBet(type, val) {
            if (STATE.balance < rouletteChip) return;
            STATE.balance -= rouletteChip;
            rouletteBets.push({ type, val, amount: rouletteChip });
            updateUI();
            
            const chip = document.createElement('div');
            chip.className = 'chip';
            chip.textContent = rouletteChip;
            chip.style.left = '50%';
            chip.style.top = '50%';
            chip.style.transform = `translate(-50%, -50%) translate(${(Math.random()-0.5)*15}px, ${(Math.random()-0.5)*15}px)`;
            event.target.appendChild(chip);
            document.getElementById('rouletteTotal').textContent = '$' + rouletteBets.reduce((a, b) => a + b.amount, 0).toFixed(2);
        }

        function clearRoulette() {
            STATE.balance += rouletteBets.reduce((a, b) => a + b.amount, 0);
            rouletteBets = [];
            document.querySelectorAll('.chip').forEach(c => c.remove());
            updateUI();
            document.getElementById('rouletteTotal').textContent = '$0.00';
        }

        function spinRoulette() {
            if (rouletteBets.length === 0) return;
            const wheel = document.getElementById('rouletteWheel');
            const numbers = [0, 32, 15, 19, 4, 21, 2, 25, 17, 34, 6, 27, 13, 36, 11, 30, 8, 23, 10, 5, 24, 16, 33, 1, 20, 14, 31, 9, 22, 18, 29, 7, 28, 12, 35, 3, 26];
            const reds = [1, 3, 5, 7, 9, 12, 14, 16, 18, 19, 21, 23, 25, 27, 30, 32, 34, 36];
            
            let winningNum;
            if (STATE.rigged) {
                winningNum = rouletteBets.find(b => b.type === 'num')?.val || numbers[Math.floor(Math.random() * 37)];
            } else {
                winningNum = numbers[Math.floor(Math.random() * 37)];
            }
            
            const targetIndex = numbers.indexOf(winningNum);
            const anglePerNum = 360 / 37;
            const targetAngle = 360 - (targetIndex * anglePerNum) - anglePerNum / 2;
            const finalRotation = (5 + Math.floor(Math.random() * 3)) * 360 + targetAngle;
            
            wheel.style.setProperty('--final-rotation', finalRotation + 'deg');
            wheel.classList.add('spinning');
            
            setTimeout(() => {
                const isRed = reds.includes(winningNum);
                const resultDisplay = document.getElementById('rouletteResult');
                resultDisplay.textContent = winningNum;
                resultDisplay.style.color = winningNum === 0 ? '#22c55e' : (isRed ? '#ef4444' : '#6b7280');
                resultDisplay.classList.add('show');
                
                let winAmount = 0, totalBet = 0;
                rouletteBets.forEach(bet => {
                    totalBet += bet.amount;
                    let won = false, multiplier = 0;
                    if (bet.type === 'num' && bet.val === winningNum) { won = true; multiplier = 35; }
                    else if (bet.type === 'color' && ((bet.val === 'red' && isRed) || (bet.val === 'black' && !isRed && winningNum !== 0))) { won = true; multiplier = 1; }
                    else if (bet.type === 'even' && winningNum !== 0 && winningNum % 2 === 0) { won = true; multiplier = 1; }
                    else if (bet.type === 'odd' && winningNum !== 0 && winningNum % 2 === 1) { won = true; multiplier = 1; }
                    else if (bet.type === 'half') {
                        if (bet.val === 'low' && winningNum >= 1 && winningNum <= 18) { won = true; multiplier = 1; }
                        if (bet.val === 'high' && winningNum >= 19 && winningNum <= 36) { won = true; multiplier = 1; }
                    }
                    else if (bet.type === 'dozen') {
                        const ranges = { 1: [1,12], 2: [13,24], 3: [25,36] };
                        if (winningNum >= ranges[bet.val][0] && winningNum <= ranges[bet.val][1]) { won = true; multiplier = 2; }
                    }
                    else if (bet.type === 'column') {
                        const cols = { 1: [3,6,9,12,15,18,21,24,27,30,33,36], 2: [2,5,8,11,14,17,20,23,26,29,32,35], 3: [1,4,7,10,13,16,19,22,25,28,31,34] };
                        if (cols[bet.val].includes(winningNum)) { won = true; multiplier = 2; }
                    }
                    if (won) winAmount += bet.amount * (multiplier + 1);
                });
                
                const profit = winAmount - totalBet;
                STATE.balance += winAmount;
                STATE.stats.profit += profit;
                STATE.stats.wagered += totalBet;
                STATE.stats.gamesPlayed++;
                if (profit > 0) STATE.stats.wins++;
                updateUI();
                saveData();
                
                setTimeout(() => {
                    resultDisplay.classList.remove('show');
                    clearRoulette();
                    wheel.classList.remove('spinning');
                    wheel.style.transform = 'rotate(0deg)';
                }, 3000);
            }, 6000);
        }

        // ==========================================
        // BLACKJACK
        // ==========================================
        
        let bjGame = { active: false, deck: [], player: [], dealer: [], split: [], currentHand: 0, bets: { main: 0, pairs: 0, tri: 0 } };

        function renderBlackjack(container) {
            container.innerHTML = `
                <div class="bet-panel">
                    <div class="bet-section">
                        <h3>Drag Chips to Bet</h3>
                        <div class="chip-tray" style="display: grid; grid-template-columns: repeat(3, 1fr);">
                            <div class="poker-chip chip-5" draggable="true" ondragstart="dragChip(event, 5)">$5</div>
                            <div class="poker-chip chip-25" draggable="true" ondragstart="dragChip(event, 25)">$25</div>
                            <div class="poker-chip chip-100" draggable="true" ondragstart="dragChip(event, 100)">$100</div>
                            <div class="poker-chip chip-500" draggable="true" ondragstart="dragChip(event, 500)">$500</div>
                            <div class="poker-chip chip-1000" draggable="true" ondragstart="dragChip(event, 1000)">$1k</div>
                        </div>
                    </div>
                    <div class="bet-section">
                        <h3>Current Bets</h3>
                        <div style="display: flex; flex-direction: column; gap: 10px;">
                            <div style="display: flex; justify-content: space-between; padding: 12px; background: var(--bg-tertiary); border-radius: var(--radius-sm);">
                                <span style="color: var(--text-secondary); font-size: 12px;">Main Bet</span>
                                <span style="font-family: 'JetBrains Mono'; color: var(--accent); font-weight: 600;" id="bjMainBet">$0</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 12px; background: var(--bg-tertiary); border-radius: var(--radius-sm);">
                                <span style="color: var(--text-secondary); font-size: 12px;">Perfect Pairs</span>
                                <span style="font-family: 'JetBrains Mono'; color: var(--accent); font-weight: 600;" id="bjPairsBet">$0</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 12px; background: var(--bg-tertiary); border-radius: var(--radius-sm);">
                                <span style="color: var(--text-secondary); font-size: 12px;">21+3</span>
                                <span style="font-family: 'JetBrains Mono'; color: var(--accent); font-weight: 600;" id="bj21Bet">$0</span>
                            </div>
                        </div>
                    </div>
                    <button class="bet-btn" id="bjDealBtn" onclick="dealBlackjack()">DEAL</button>
                    <button class="btn-primary" style="background: var(--red); margin-top: 10px;" onclick="clearBjBets()">CLEAR BETS</button>
                </div>
                <div class="game-display" style="padding: 0;">
                    <div class="bj-container">
                        <div class="bj-table">
                            <button class="handbook-btn" onclick="showHandbook('blackjack')">📘 Handbook</button>
                            <div class="bj-win-indicator" id="bjWinIndicator"></div>
                            <div class="bj-hand-area" style="margin-top: 30px;">
                                <div class="bj-label">Dealer <span class="bj-score" id="dealerScore"></span></div>
                                <div class="bj-cards" id="dealerCards"></div>
                            </div>
                            <div class="bj-betting-area" id="bettingArea">
                                <div class="bj-bet-circle side-bet" ondrop="dropChip(event, 'pairs')" ondragover="allowDrop(event)" ondragleave="leaveDrop(event)">
                                    <div class="bet-label">Perfect Pairs</div>
                                    <div class="bet-amount" id="displayPairs">$0</div>
                                    <div class="placed-chips" id="chipsPairs"></div>
                                </div>
                                <div class="bj-bet-circle main-bet" ondrop="dropChip(event, 'main')" ondragover="allowDrop(event)" ondragleave="leaveDrop(event)">
                                    <div class="bet-label">Main Bet</div>
                                    <div class="bet-amount" id="displayMain">$0</div>
                                    <div class="placed-chips" id="chipsMain"></div>
                                </div>
                                <div class="bj-bet-circle side-bet" ondrop="dropChip(event, 'tri')" ondragover="allowDrop(event)" ondragleave="leaveDrop(event)">
                                    <div class="bet-label">21+3</div>
                                    <div class="bet-amount" id="display21">$0</div>
                                    <div class="placed-chips" id="chips21"></div>
                                </div>
                            </div>
                            <div class="bj-hand-area" style="margin-bottom: 30px;">
                                <div class="bj-cards split-hands" id="playerArea">
                                    <div class="bj-cards" id="playerCards"></div>
                                </div>
                                <div class="bj-label" style="margin-top: 15px;">Player <span class="bj-score" id="playerScore"></span></div>
                            </div>
                            <div class="bj-controls" id="bjControls" style="display: none;">
                                <button class="bj-control-btn" onclick="bjHit()">Hit</button>
                                <button class="bj-control-btn primary" onclick="bjStand()">Stand</button>
                                <button class="bj-control-btn gold" onclick="bjDouble()">Double</button>
                                <button class="bj-control-btn" id="splitBtn" onclick="bjSplit()" style="display: none;">Split</button>
                                <button class="bj-control-btn red" id="surrenderBtn" onclick="bjSurrender()">Surrender</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function dragChip(ev, val) { ev.dataTransfer.setData("chip", val); }
        function allowDrop(ev) { ev.preventDefault(); ev.target.closest('.bj-bet-circle').classList.add('drag-over'); }
        function leaveDrop(ev) { ev.target.closest('.bj-bet-circle').classList.remove('drag-over'); }

        function dropChip(ev, type) {
            ev.preventDefault();
            const val = parseInt(ev.dataTransfer.getData("chip"));
            if (STATE.balance < val) return alert('Insufficient balance');
            STATE.balance -= val;
            bjGame.bets[type] += val;
            const circle = ev.target.closest('.bj-bet-circle');
            circle.classList.remove('drag-over');
            const chip = document.createElement('div');
            chip.className = 'placed-chip';
            chip.textContent = val;
            document.getElementById(type === 'main' ? 'chipsMain' : type === 'pairs' ? 'chipsPairs' : 'chips21').appendChild(chip);
            document.getElementById(type === 'main' ? 'displayMain' : type === 'pairs' ? 'displayPairs' : 'display21').textContent = '$' + bjGame.bets[type];
            document.getElementById(type === 'main' ? 'bjMainBet' : type === 'pairs' ? 'bjPairsBet' : 'bj21Bet').textContent = '$' + bjGame.bets[type];
            updateUI();
        }

        function clearBjBets() {
            STATE.balance += bjGame.bets.main + bjGame.bets.pairs + bjGame.bets.tri;
            bjGame.bets = { main: 0, pairs: 0, tri: 0 };
            ['Main', 'Pairs', '21'].forEach(t => {
                document.getElementById('chips' + t).innerHTML = '';
                document.getElementById('display' + t).textContent = '$0';
                document.getElementById('bj' + (t === 'Main' ? 'Main' : t === 'Pairs' ? 'Pairs' : '21') + 'Bet').textContent = '$0';
            });
            updateUI();
        }

        function createDeck() {
            const suits = ['♠', '♥', '♦', '♣'];
            const vals = ['2','3','4','5','6','7','8','9','10','J','Q','K','A'];
            let deck = [];
            for (let i = 0; i < 6; i++) for (let s of suits) for (let v of vals) deck.push({ suit: s, value: v });
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
            return deck;
        }

        function drawCard() { return bjGame.deck.pop(); }

        function getValue(hand) {
            let val = 0, aces = 0;
            for (let c of hand) {
                if (['J','Q','K'].includes(c.value)) val += 10;
                else if (c.value === 'A') { val += 11; aces++; }
                else val += parseInt(c.value);
            }
            while (val > 21 && aces--) val -= 10;
            return val;
        }

        function cardHtml(card, hidden) {
            if (hidden) return `<div class="playing-card card-back"></div>`;
            const isRed = ['♥','♦'].includes(card.suit);
            return `<div class="playing-card ${isRed?'card-red':''}">
                <div class="card-corner">${card.value}<br>${card.suit}</div>
                <div class="card-center">${card.suit}</div>
                <div class="card-corner" style="transform: rotate(180deg)">${card.value}<br>${card.suit}</div>
            </div>`;
        }

        function dealBlackjack() {
            if (bjGame.bets.main === 0) return alert('Place main bet first');
            bjGame.active = true;
            bjGame.deck = createDeck();
            bjGame.player = [drawCard(), drawCard()];
            bjGame.dealer = [drawCard(), drawCard()];
            bjGame.split = [];
            bjGame.currentHand = 0;
            
            document.getElementById('bettingArea').style.display = 'none';
            document.getElementById('bjDealBtn').style.display = 'none';
            document.querySelector('.btn-primary[onclick="clearBjBets()"]').style.display = 'none';
            document.getElementById('bjControls').style.display = 'flex';
            
            checkSideBets();
            renderBj();
            updateBjControls();
            
            if (getValue(bjGame.player) === 21) {
                showBjWin('BLACKJACK!', '#a855f7');
                setTimeout(bjStand, 1500);
            }
        }

        function showBjWin(text, color) {
            const ind = document.getElementById('bjWinIndicator');
            ind.textContent = text;
            ind.style.color = color;
            ind.classList.add('show');
            setTimeout(() => ind.classList.remove('show'), 2000);
        }

        function renderBj() {
            const dCards = document.getElementById('dealerCards');
            let dHtml = cardHtml(bjGame.dealer[0], false);
            dHtml += bjGame.active ? cardHtml(null, true) : cardHtml(bjGame.dealer[1], false);
            dCards.innerHTML = dHtml;
            document.getElementById('dealerScore').textContent = bjGame.active ? getValue([bjGame.dealer[0]]) : getValue(bjGame.dealer);
            
            const pArea = document.getElementById('playerArea');
            if (bjGame.split.length > 0) {
                pArea.innerHTML = '';
                [bjGame.player, bjGame.split].forEach((hand, idx) => {
                    const div = document.createElement('div');
                    div.className = 'split-hand ' + (idx === bjGame.currentHand ? 'active' : '');
                    div.innerHTML = `<div class="split-hand-label">Hand ${idx + 1} (${getValue(hand)})</div><div class="bj-cards">${hand.map(c => cardHtml(c, false)).join('')}</div>`;
                    pArea.appendChild(div);
                });
                document.getElementById('playerScore').textContent = '';
            } else {
                pArea.innerHTML = `<div class="bj-cards">${bjGame.player.map(c => cardHtml(c, false)).join('')}</div>`;
                document.getElementById('playerScore').textContent = getValue(bjGame.player);
            }
        }

        function checkSideBets() {
            const p = bjGame.player, d = bjGame.dealer;
            let sideWin = 0;
            
            if (bjGame.bets.pairs > 0 && p[0].value === p[1].value) {
                const perfect = p[0].suit === p[1].suit;
                const colored = !perfect && ((['♥','♦'].includes(p[0].suit) && ['♥','♦'].includes(p[1].suit)) || (['♠','♣'].includes(p[0].suit) && ['♠','♣'].includes(p[1].suit)));
                const mult = perfect ? 25 : colored ? 12 : 6;
                sideWin += bjGame.bets.pairs * mult;
                if (sideWin > 0) showBjWin(`PERFECT PAIRS! +$${sideWin}`, '#a855f7');
            }
            
            if (bjGame.bets.tri > 0) {
                const cards = [p[0], p[1], d[0]];
                const suits = cards.map(c => c.suit);
                const vals = cards.map(c => ['J','Q','K'].includes(c.value) ? 10 : c.value === 'A' ? 1 : parseInt(c.value)).sort((a,b) => a-b);
                const isFlush = suits[0] === suits[1] && suits[1] === suits[2];
                const isStraight = (vals[1] === vals[0]+1 && vals[2] === vals[1]+1) || (vals.join(',') === '1,10,11');
                const isTrips = p[0].value === p[1].value && p[1].value === d[0].value;
                
                let mult = 0;
                if (isTrips && isFlush) mult = 100;
                else if (isStraight && isFlush) mult = 40;
                else if (isTrips) mult = 30;
                else if (isStraight) mult = 10;
                else if (isFlush) mult = 5;
                
                if (mult > 0) {
                    const win = bjGame.bets.tri * mult;
                    sideWin += win;
                    showBjWin(`21+3 WIN! +$${win}`, '#22c55e');
                }
            }
            
            if (sideWin > 0) {
                STATE.balance += sideWin;
                STATE.stats.profit += sideWin;
                updateUI();
            }
        }

        function updateBjControls() {
            const hand = bjGame.split.length > 0 ? (bjGame.currentHand === 0 ? bjGame.player : bjGame.split) : bjGame.player;
            const canSplit = hand.length === 2 && hand[0].value === hand[1].value && bjGame.split.length === 0;
            document.getElementById('splitBtn').style.display = canSplit ? 'block' : 'none';
        }

        function bjHit() {
            const hand = bjGame.split.length > 0 ? (bjGame.currentHand === 0 ? bjGame.player : bjGame.split) : bjGame.player;
            hand.push(drawCard());
            renderBj();
            const val = getValue(hand);
            if (val > 21) {
                if (bjGame.split.length > 0 && bjGame.currentHand === 0) {
                    showBjWin('BUST!', '#ef4444');
                    bjGame.currentHand = 1;
                    renderBj();
                } else {
                    showBjWin('BUST!', '#ef4444');
                    endBj();
                }
            } else if (val === 21) {
                setTimeout(bjStand, 500);
            }
        }

        function bjStand() {
            if (bjGame.split.length > 0 && bjGame.currentHand === 0) {
                bjGame.currentHand = 1;
                renderBj();
            } else {
                bjGame.active = false;
                renderBj();
                dealerPlay();
            }
        }

        function dealerPlay() {
            let dVal = getValue(bjGame.dealer);
            while (dVal < 17 || (dVal === 17 && bjGame.dealer.some(c => c.value === 'A'))) {
                bjGame.dealer.push(drawCard());
                renderBj();
                dVal = getValue(bjGame.dealer);
            }
            setTimeout(endBj, 1000);
        }

        function bjDouble() {
            const currentBet = bjGame.bets.main / (bjGame.split.length > 0 ? 2 : 1);
            if (STATE.balance < currentBet) return alert('Insufficient balance');
            STATE.balance -= currentBet;
            bjGame.bets.main += currentBet;
            updateUI();
            const hand = bjGame.split.length > 0 ? (bjGame.currentHand === 0 ? bjGame.player : bjGame.split) : bjGame.player;
            hand.push(drawCard());
            renderBj();
            if (getValue(hand) <= 21) bjStand();
            else endBj();
        }

        function bjSplit() {
            const currentBet = bjGame.bets.main / 2;
            if (STATE.balance < currentBet) return alert('Insufficient balance');
            STATE.balance -= currentBet;
            bjGame.bets.main += currentBet;
            updateUI();
            bjGame.split = [bjGame.player.pop()];
            bjGame.player.push(drawCard());
            bjGame.split.push(drawCard());
            renderBj();
            updateBjControls();
        }

        function bjSurrender() {
            const refund = bjGame.bets.main / 2;
            STATE.balance += refund;
            STATE.stats.profit -= bjGame.bets.main / 2;
            showBjWin('SURRENDER - Half Returned', '#9ca3af');
            endBj(true);
        }

        function endBj(surrender = false) {
            document.getElementById('bjControls').style.display = 'none';
            const dVal = getValue(bjGame.dealer);
            const hands = bjGame.split.length > 0 ? [bjGame.player, bjGame.split] : [bjGame.player];
            const betPerHand = bjGame.bets.main / hands.length;
            let totalWin = 0;
            
            hands.forEach(hand => {
                const pVal = getValue(hand);
                let win = 0;
                if (surrender) win = betPerHand / 2;
                else if (pVal <= 21) {
                    if (dVal > 21 || pVal > dVal) {
                        win = betPerHand * 2;
                        if (pVal === 21 && hand.length === 2) win += betPerHand * 0.5;
                    } else if (pVal === dVal) win = betPerHand;
                }
                totalWin += win;
            });
            
            const profit = totalWin - bjGame.bets.main;
            STATE.balance += totalWin;
            STATE.stats.profit += profit;
            STATE.stats.wagered += bjGame.bets.main;
            STATE.stats.gamesPlayed++;
            if (profit > 0) {
                STATE.stats.wins++;
                showBjWin(`WIN! +$${profit.toFixed(0)}`, '#22c55e');
            } else if (profit < 0) showBjWin(`LOSS -$${Math.abs(profit).toFixed(0)}`, '#ef4444');
            else showBjWin('PUSH', '#9ca3af');
            
            updateUI();
            saveData();
            
            setTimeout(() => {
                document.getElementById('bettingArea').style.display = 'flex';
                document.getElementById('bjDealBtn').style.display = 'block';
                document.querySelector('.btn-primary[onclick="clearBjBets()"]').style.display = 'block';
                document.getElementById('playerArea').innerHTML = '<div class="bj-cards" id="playerCards"></div>';
                document.getElementById('dealerCards').innerHTML = '';
                document.getElementById('playerScore').textContent = '';
                document.getElementById('dealerScore').textContent = '';
                clearBjBets();
                bjGame = { active: false, deck: [], player: [], dealer: [], split: [], currentHand: 0, bets: { main: 0, pairs: 0, tri: 0 } };
            }, 3000);
        }

        // ==========================================
        // TEXAS HOLD'EM POKER
        // ==========================================
        
        let pokerGame = {
            active: false,
            deck: [],
            players: [],
            community: [],
            pot: 0,
            currentBet: 0,
            round: 0, // 0=preflop, 1=flop, 2=turn, 3=river, 4=showdown
            turn: 0
        };

        function renderPoker(container) {
            container.innerHTML = `
                <div class="bet-panel">
                    <div class="bet-section">
                        <h3>Texas Hold'em</h3>
                        <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; margin-top: 10px;">
                            Play against 3 AI opponents. Best 5-card hand wins!
                        </p>
                    </div>
                    ${betPanelHtml('startPoker()')}
                    <button class="btn-primary" style="background: var(--bg-tertiary); margin-top: 10px;" onclick="showHandbook('poker')">📘 Handbook</button>
                </div>
                <div class="game-display" style="padding: 0;">
                    <div class="poker-table" id="pokerTable">
                        <div class="poker-pot" id="pokerPot">Pot: $0</div>
                        <div class="poker-community" id="pokerCommunity"></div>
                        
                        <div class="poker-player pos-2" id="cpu2">
                            <div class="poker-avatar">🤖</div>
                            <div class="poker-info">
                                <div class="poker-name">Bot 1</div>
                                <div class="poker-chips">$1000</div>
                            </div>
                            <div class="poker-cards" id="cpu2Cards">
                                <div class="poker-card-small hidden"></div>
                                <div class="poker-card-small hidden"></div>
                            </div>
                        </div>
                        
                        <div class="poker-player pos-1" id="cpu1">
                            <div class="poker-avatar">🤖</div>
                            <div class="poker-info">
                                <div class="poker-name">Bot 2</div>
                                <div class="poker-chips">$1000</div>
                            </div>
                            <div class="poker-cards" id="cpu1Cards">
                                <div class="poker-card-small hidden"></div>
                                <div class="poker-card-small hidden"></div>
                            </div>
                        </div>
                        
                        <div class="poker-player pos-3" id="cpu3">
                            <div class="poker-avatar">🤖</div>
                            <div class="poker-info">
                                <div class="poker-name">Bot 3</div>
                                <div class="poker-chips">$1000</div>
                            </div>
                            <div class="poker-cards" id="cpu3Cards">
                                <div class="poker-card-small hidden"></div>
                                <div class="poker-card-small hidden"></div>
                            </div>
                        </div>
                        
                        <div class="poker-player pos-0" id="player0">
                            <div class="poker-avatar active">👤</div>
                            <div class="poker-info">
                                <div class="poker-name">You</div>
                                <div class="poker-chips" id="playerChips">$${STATE.balance}</div>
                            </div>
                            <div class="poker-cards" id="playerCards"></div>
                        </div>
                        
                        <div class="poker-actions" id="pokerActions" style="display: none;">
                            <button class="poker-btn fold" onclick="pokerFold()">Fold</button>
                            <button class="poker-btn call" id="pokerCallBtn" onclick="pokerCall()">Call $0</button>
                            <button class="poker-btn raise" onclick="pokerRaise()">Raise</button>
                        </div>
                    </div>
                </div>
            `;
        }

        function startPoker() {
            const bet = parseFloat(document.getElementById('betAmount').value);
            if (bet <= 0 || bet > STATE.balance) return;
            
            STATE.balance -= bet;
            updateUI();
            document.getElementById('betBtn').disabled = true;
            
            pokerGame = {
                active: true,
                deck: createDeck(),
                players: [
                    { id: 0, name: 'You', hand: [], chips: STATE.balance, bet: 0, folded: false, isAI: false },
                    { id: 1, name: 'Bot 1', hand: [], chips: 1000, bet: 0, folded: false, isAI: true },
                    { id: 2, name: 'Bot 2', hand: [], chips: 1000, bet: 0, folded: false, isAI: true },
                    { id: 3, name: 'Bot 3', hand: [], chips: 1000, bet: 0, folded: false, isAI: true }
                ],
                community: [],
                pot: bet,
                currentBet: bet,
                round: 0,
                turn: 0
            };
            
            // Deal hole cards
            for (let i = 0; i < 2; i++) {
                for (let p of pokerGame.players) {
                    p.hand.push(pokerGame.deck.pop());
                }
            }
            
            // Post blinds
            pokerGame.players[1].bet = bet / 2;
            pokerGame.players[2].bet = bet;
            
            updatePokerDisplay();
            document.getElementById('pokerActions').style.display = 'flex';
            updatePokerButtons();
        }

        function updatePokerDisplay() {
            document.getElementById('pokerPot').textContent = `Pot: $${pokerGame.pot.toFixed(0)}`;
            document.getElementById('playerChips').textContent = `$${STATE.balance}`;
            
            // Show player cards
            const pCards = document.getElementById('playerCards');
            pCards.innerHTML = pokerGame.players[0].hand.map(c => `
                <div class="poker-card-small ${['♥','♦'].includes(c.suit) ? 'card-red' : ''}">
                    ${c.value}${c.suit}
                </div>
            `).join('');
            
            // Show community cards
            const comm = document.getElementById('pokerCommunity');
            comm.innerHTML = pokerGame.community.map(c => `
                <div class="poker-card-small ${['♥','♦'].includes(c.suit) ? 'card-red' : ''}">
                    ${c.value}${c.suit}
                </div>
            `).join('');
        }

        function updatePokerButtons() {
            const toCall = pokerGame.currentBet - pokerGame.players[0].bet;
            document.getElementById('pokerCallBtn').textContent = toCall === 0 ? 'Check' : `Call $${toCall.toFixed(0)}`;
        }

        function pokerFold() {
            pokerGame.players[0].folded = true;
            nextPokerTurn();
        }

        function pokerCall() {
            const toCall = pokerGame.currentBet - pokerGame.players[0].bet;
            if (toCall > STATE.balance) return alert('Insufficient balance');
            STATE.balance -= toCall;
            pokerGame.players[0].bet += toCall;
            pokerGame.pot += toCall;
            updateUI();
            nextPokerTurn();
        }

        function pokerRaise() {
            const raise = parseFloat(prompt('Raise amount:', '50'));
            if (!raise || raise <= 0) return;
            const total = pokerGame.currentBet - pokerGame.players[0].bet + raise;
            if (total > STATE.balance) return alert('Insufficient balance');
            STATE.balance -= total;
            pokerGame.players[0].bet += total;
            pokerGame.pot += total;
            pokerGame.currentBet += raise;
            updateUI();
            nextPokerTurn();
        }

        function nextPokerTurn() {
            // AI turns
            for (let i = 1; i < 4; i++) {
                if (pokerGame.players[i].folded) continue;
                
                const toCall = pokerGame.currentBet - pokerGame.players[i].bet;
                const handStrength = Math.random(); // Simplified
                
                if (handStrength < 0.3 && toCall > 0) {
                    pokerGame.players[i].folded = true;
                } else if (handStrength > 0.7 && Math.random() > 0.5) {
                    const raise = 20;
                    pokerGame.players[i].chips -= toCall + raise;
                    pokerGame.pot += toCall + raise;
                    pokerGame.players[i].bet += toCall + raise;
                    pokerGame.currentBet += raise;
                } else {
                    pokerGame.players[i].chips -= toCall;
                    pokerGame.pot += toCall;
                    pokerGame.players[i].bet += toCall;
                }
            }
            
            // Next round
            pokerGame.round++;
            
            if (pokerGame.round === 1) { // Flop
                for (let i = 0; i < 3; i++) pokerGame.community.push(pokerGame.deck.pop());
            } else if (pokerGame.round === 2 || pokerGame.round === 3) { // Turn or River
                pokerGame.community.push(pokerGame.deck.pop());
            } else if (pokerGame.round === 4) { // Showdown
                endPoker();
                return;
            }
            
            pokerGame.currentBet = 0;
            pokerGame.players.forEach(p => p.bet = 0);
            updatePokerDisplay();
            updatePokerButtons();
        }

        function endPoker() {
            const winner = Math.floor(Math.random() * 4); // Simplified - random winner
            const winAmount = pokerGame.pot;
            
            if (winner === 0) {
                STATE.balance += winAmount;
                STATE.stats.profit += winAmount - pokerGame.players[0].bet;
                STATE.stats.wins++;
                alert(`You win $${winAmount.toFixed(0)}!`);
            } else {
                STATE.stats.profit -= pokerGame.players[0].bet;
                alert(`Bot ${winner} wins!`);
            }
            
            STATE.stats.wagered += pokerGame.players[0].bet;
            STATE.stats.gamesPlayed++;
            updateUI();
            saveData();
            
            document.getElementById('betBtn').disabled = false;
            document.getElementById('pokerActions').style.display = 'none';
        }

        // ==========================================
        // BACCARAT
        // ==========================================
        
        let baccaratGame = { bet: null, amount: 0, playerHand: [], bankerHand: [] };

        function renderBaccarat(container) {
            container.innerHTML = `
                <div class="bet-panel">
                    <div class="bet-section">
                        <h3>Baccarat</h3>
                        <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; margin-top: 10px;">
                            Bet on Player, Banker, or Tie. Closest to 9 wins!
                            <br>Player: 1:1 | Banker: 0.95:1 | Tie: 8:1
                        </p>
                    </div>
                    ${betPanelHtml('dealBaccarat()')}
                </div>
                <div class="game-display">
                    <div class="baccarat-table">
                        <div class="baccarat-layout">
                            <div class="baccarat-bet-area ${baccaratGame.bet === 'player' ? 'selected' : ''}" onclick="selectBaccaratBet('player')">
                                <div class="bet-label">PLAYER</div>
                                <div class="bet-payout">1:1</div>
                                <div class="bet-amount" id="playerBetAmt">$0</div>
                            </div>
                            <div class="baccarat-bet-area ${baccaratGame.bet === 'tie' ? 'selected' : ''}" onclick="selectBaccaratBet('tie')" style="border-color: var(--green);">
                                <div class="bet-label">TIE</div>
                                <div class="bet-payout">8:1</div>
                                <div class="bet-amount" id="tieBetAmt">$0</div>
                            </div>
                            <div class="baccarat-bet-area ${baccaratGame.bet === 'banker' ? 'selected' : ''}" onclick="selectBaccaratBet('banker')">
                                <div class="bet-label">BANKER</div>
                                <div class="bet-payout">0.95:1</div>
                                <div class="bet-amount" id="bankerBetAmt">$0</div>
                            </div>
                        </div>
                        <div class="baccarat-hands">
                            <div class="baccarat-hand">
                                <h3>PLAYER</h3>
                                <div class="baccarat-cards" id="baccaratPlayerCards"></div>
                                <div id="playerScore" style="font-family: JetBrains Mono; font-size: 24px; margin-top: 10px;"></div>
                            </div>
                            <div class="baccarat-hand">
                                <h3>BANKER</h3>
                                <div class="baccarat-cards" id="baccaratBankerCards"></div>
                                <div id="bankerScore" style="font-family: JetBrains Mono; font-size: 24px; margin-top: 10px;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function selectBaccaratBet(bet) {
            baccaratGame.bet = bet;
            document.querySelectorAll('.baccarat-bet-area').forEach(el => el.classList.remove('selected'));
            event.target.closest('.baccarat-bet-area').classList.add('selected');
        }

        function dealBaccarat() {
            if (!baccaratGame.bet) return alert('Select a bet first');
            const amount = parseFloat(document.getElementById('betAmount').value);
            if (amount <= 0 || amount > STATE.balance) return;
            
            STATE.balance -= amount;
            baccaratGame.amount = amount;
            updateUI();
            
            const deck = createDeck();
            baccaratGame.playerHand = [deck.pop(), deck.pop()];
            baccaratGame.bankerHand = [deck.pop(), deck.pop()];
            
            // Baccarat rules for third card
            const pScore = getBaccaratScore(baccaratGame.playerHand);
            const bScore = getBaccaratScore(baccaratGame.bankerHand);
            
            if (pScore < 6) baccaratGame.playerHand.push(deck.pop());
            if (bScore < 6) baccaratGame.bankerHand.push(deck.pop());
            
            const finalP = getBaccaratScore(baccaratGame.playerHand);
            const finalB = getBaccaratScore(baccaratGame.bankerHand);
            
            document.getElementById('baccaratPlayerCards').innerHTML = baccaratGame.playerHand.map(c => `
                <div class="playing-card ${['♥','♦'].includes(c.suit)?'card-red':''}" style="width: 70px; height: 100px; font-size: 10px;">
                    <div class="card-corner">${c.value}<br>${c.suit}</div>
                    <div class="card-center" style="font-size: 30px;">${c.suit}</div>
                </div>
            `).join('');
            
            document.getElementById('baccaratBankerCards').innerHTML = baccaratGame.bankerHand.map(c => `
                <div class="playing-card ${['♥','♦'].includes(c.suit)?'card-red':''}" style="width: 70px; height: 100px; font-size: 10px;">
                    <div class="card-corner">${c.value}<br>${c.suit}</div>
                    <div class="card-center" style="font-size: 30px;">${c.suit}</div>
                </div>
            `).join('');
            
            document.getElementById('playerScore').textContent = finalP;
            document.getElementById('bankerScore').textContent = finalB;
            
            let win = false;
            let multiplier = 0;
            
            if (finalP > finalB && baccaratGame.bet === 'player') { win = true; multiplier = 2; }
            else if (finalB > finalP && baccaratGame.bet === 'banker') { win = true; multiplier = 1.95; }
            else if (finalP === finalB && baccaratGame.bet === 'tie') { win = true; multiplier = 9; }
            
            if (win) {
                const winAmount = amount * multiplier;
                STATE.balance += winAmount;
                STATE.stats.profit += winAmount - amount;
                STATE.stats.wins++;
                setTimeout(() => alert(`You win $${(winAmount - amount).toFixed(0)}!`), 500);
            } else {
                STATE.stats.profit -= amount;
                setTimeout(() => alert('You lose!'), 500);
            }
            
            STATE.stats.wagered += amount;
            STATE.stats.gamesPlayed++;
            updateUI();
            saveData();
        }

        function getBaccaratScore(hand) {
            let score = 0;
            for (let c of hand) {
                if (['J','Q','K','10'].includes(c.value)) score += 0;
                else if (c.value === 'A') score += 1;
                else score += parseInt(c.value);
            }
            return score % 10;
        }

        // ==========================================
        // DICE
        // ==========================================
        
        let diceMode = 'over', diceTarget = 50;
        
        function renderDice(container) {
            container.innerHTML = `
                <div class="bet-panel">${betPanelHtml('rollDice()')}</div>
                <div class="game-display">
                    <div class="dice-container">
                        <div class="dice-modes">
                            <button class="mode-btn ${diceMode === 'over' ? 'active' : ''}" onclick="diceMode='over'; renderDice(document.getElementById('gameArea'))">Roll Over</button>
                            <button class="mode-btn ${diceMode === 'under' ? 'active' : ''}" onclick="diceMode='under'; renderDice(document.getElementById('gameArea'))">Roll Under</button>
                        </div>
                        <div class="dice-result-box">
                            <div class="dice-result" id="diceResult">50.00</div>
                        </div>
                        <div style="background: var(--bg-tertiary); border-radius: var(--radius); padding: 30px;">
                            <input type="range" min="2" max="98" value="${diceTarget}" oninput="updateDice(this.value)" style="width: 100%; margin-bottom: 25px; height: 8px; -webkit-appearance: none; background: var(--border); border-radius: 4px; outline: none;">
                            <div style="display: flex; justify-content: space-between; text-align: center;">
                                <div>
                                    <div style="font-size: 11px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px;">Target</div>
                                    <div style="font-family: 'JetBrains Mono'; font-size: 24px; font-weight: 700;" id="diceTarget">50.00</div>
                                </div>
                                <div>
                                    <div style="font-size: 11px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px;">Win Chance</div>
                                    <div style="font-family: 'JetBrains Mono'; font-size: 24px; font-weight: 700;" id="diceChance">50%</div>
                                </div>
                                <div>
                                    <div style="font-size: 11px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px;">Multiplier</div>
                                    <div style="font-family: 'JetBrains Mono'; font-size: 24px; font-weight: 700; color: var(--accent);" id="diceMult">1.94x</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function updateDice(val) {
            diceTarget = parseInt(val);
            const chance = diceMode === 'over' ? 100 - diceTarget : diceTarget;
            const mult = (94 / chance).toFixed(2);
            document.getElementById('diceTarget').textContent = diceTarget.toFixed(2);
            document.getElementById('diceChance').textContent = chance + '%';
            document.getElementById('diceMult').textContent = mult + 'x';
        }

        function rollDice() {
            const bet = parseFloat(document.getElementById('betAmount').value);
            if (bet <= 0 || bet > STATE.balance) return;
            STATE.balance -= bet;
            updateUI();
            
            const resEl = document.getElementById('diceResult');
            resEl.classList.add('rolling');
            let rolls = 0;
            const interval = setInterval(() => {
                resEl.textContent = (Math.random() * 100).toFixed(2);
                if (++rolls > 20) {
                    clearInterval(interval);
                    const result = Math.random() * 100;
                    const win = diceMode === 'over' ? result > diceTarget : result < diceTarget;
                    const mult = parseFloat(document.getElementById('diceMult').textContent);
                    resEl.textContent = result.toFixed(2);
                    resEl.classList.remove('rolling');
                    resEl.style.color = win ? '#22c55e' : '#ef4444';
                    if (win) {
                        STATE.balance += bet * mult;
                        STATE.stats.profit += bet * (mult - 1);
                        STATE.stats.wins++;
                    } else STATE.stats.profit -= bet;
                    STATE.stats.wagered += bet;
                    STATE.stats.gamesPlayed++;
                    updateUI();
                    saveData();
                    setTimeout(() => resEl.style.color = '', 2000);
                }
            }, 50);
        }

        // ==========================================
        // MINES
        // ==========================================
        
        let minesGame = { active: false, grid: [], revealed: [], mines: [], bet: 0, minesCount: 3 };
        
        function renderMines(container) {
            container.innerHTML = `
                <div class="bet-panel">
                    <div class="bet-section">
                        <h3>Mines</h3>
                        <select id="minesCount" onchange="minesGame.minesCount=parseInt(this.value)" style="width: 100%; padding: 12px; background: var(--bg-tertiary); border: 1px solid var(--border); color: white; border-radius: var(--radius-sm);">
                            ${[1,3,5,10,15,20].map(n => `<option value="${n}" ${n===3?'selected':''}>${n} Mines</option>`).join('')}
                        </select>
                    </div>
                    <div class="bet-section">
                        <h3>Current Game</h3>
                        <div style="display: flex; justify-content: space-between; padding: 15px; background: var(--bg-tertiary); border-radius: var(--radius-sm); margin-bottom: 10px;">
                            <span style="color: var(--text-secondary); font-size: 12px;">Multiplier</span>
                            <span style="font-family: 'JetBrains Mono'; color: var(--accent); font-weight: 700;" id="minesMult">1.00x</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 15px; background: var(--bg-tertiary); border-radius: var(--radius-sm);">
                            <span style="color: var(--text-secondary); font-size: 12px;">Potential Win</span>
                            <span style="font-family: 'JetBrains Mono'; color: var(--accent); font-weight: 700;" id="minesWin">$0.00</span>
                        </div>
                    </div>
                    ${betPanelHtml('startMines()', 'cashoutMines()')}
                </div>
                <div class="game-display">
                    <div class="mines-grid" id="minesGrid"></div>
                </div>
            `;
            initMines();
        }

        function initMines() {
            minesGame = { active: false, grid: Array(25).fill(null), revealed: [], mines: [], bet: 0, minesCount: 3 };
            const grid = document.getElementById('minesGrid');
            grid.innerHTML = '';
            for (let i = 0; i < 25; i++) {
                const cell = document.createElement('div');
                cell.className = 'mine-cell';
                cell.onclick = () => clickMine(i);
                grid.appendChild(cell);
            }
            updateMinesDisplay();
        }

        function startMines() {
            const bet = parseFloat(document.getElementById('betAmount').value);
            if (bet <= 0 || bet > STATE.balance) return;
            minesGame.minesCount = parseInt(document.getElementById('minesCount').value);
            STATE.balance -= bet;
            minesGame.bet = bet;
            minesGame.active = true;
            
            let placed = 0;
            while (placed < minesGame.minesCount) {
                const idx = Math.floor(Math.random() * 25);
                if (!minesGame.mines.includes(idx)) {
                    minesGame.mines.push(idx);
                    placed++;
                }
            }
            
            updateUI();
            document.getElementById('betBtn').disabled = true;
            document.getElementById('cashoutBtn').disabled = false;
        }

        function clickMine(idx) {
            if (!minesGame.active) {
                const bet = parseFloat(document.getElementById('betAmount').value);
                if (bet > 0) startMines(); else return;
            }
            if (minesGame.revealed.includes(idx)) return;
            const cells = document.querySelectorAll('.mine-cell');
            if (minesGame.mines.includes(idx)) {
                cells[idx].classList.add('bomb');
                cells[idx].textContent = '💣';
                endMines(false);
            } else {
                cells[idx].classList.add('revealed');
                cells[idx].textContent = '💎';
                minesGame.revealed.push(idx);
                updateMinesDisplay();
                if (minesGame.revealed.length === 25 - minesGame.minesCount) cashoutMines();
            }
        }

        function updateMinesDisplay() {
            if (!minesGame.active) {
                document.getElementById('minesMult').textContent = '1.00x';
                document.getElementById('minesWin').textContent = '$0.00';
                return;
            }
            const safe = 25 - minesGame.minesCount;
            const baseMult = Math.pow(25 / safe, minesGame.revealed.length + 1);
            const mult = baseMult * 0.85;
            document.getElementById('minesMult').textContent = mult.toFixed(2) + 'x';
            document.getElementById('minesWin').textContent = '$' + (minesGame.bet * mult).toFixed(2);
        }

        function cashoutMines() {
            if (!minesGame.active) return;
            const mult = parseFloat(document.getElementById('minesMult').textContent);
            const win = minesGame.bet * mult;
            STATE.balance += win;
            STATE.stats.profit += win - minesGame.bet;
            STATE.stats.wins++;
            STATE.stats.wagered += minesGame.bet;
            STATE.stats.gamesPlayed++;
            endMines(true);
        }

        function endMines(won) {
            minesGame.active = false;
            if (!won) {
                STATE.stats.profit -= minesGame.bet;
                STATE.stats.wagered += minesGame.bet;
                STATE.stats.gamesPlayed++;
                const cells = document.querySelectorAll('.mine-cell');
                minesGame.mines.forEach((m, i) => {
                    setTimeout(() => {
                        if (!cells[m].classList.contains('bomb')) {
                            cells[m].classList.add('bomb');
                            cells[m].textContent = '💣';
                        }
                    }, i * 50);
                });
            }
            updateUI();
            saveData();
            document.getElementById('betBtn').disabled = false;
            document.getElementById('cashoutBtn').disabled = true;
            setTimeout(initMines, won ? 1500 : 2500);
        }

        // ==========================================
        // SLOTS MENU & MACHINES
        // ==========================================
        
        function renderSlotsMenu(container) {
            container.innerHTML = `
                <div class="slots-menu">
                    <h2>Slot Machines</h2>
                    <p>Choose your game. Each slot offers unique features and bonuses.</p>
                    <div class="slots-grid">
                        ${Object.entries(SLOT_GAMES).map(([key, slot]) => `
                            <div class="slot-card ${slot.featured ? 'featured' : ''}" onclick="loadSlotGame('${key}')" 
                                style="cursor: pointer;">
                                <div class="slot-preview">${slot.icon}</div>
                                <div class="slot-name">${slot.name}</div>
                                <div class="slot-desc">${slot.desc}</div>
                                <div class="slot-stats">
                                    <span>Layout: ${slot.layout}</span>
                                    <span>Bonus: $${slot.bonusCost}</span>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function loadSlotGame(slotKey) {
            STATE.currentSlot = slotKey;
            const area = document.getElementById('gameArea');
            area.innerHTML = '';
            const slot = SLOT_GAMES[slotKey];
            
            if (slot.type === 'huffpuff') renderHuffPuff(area);
            else if (slot.type === 'dragon') renderDragon(area);
            else if (slot.type === 'cosmic') renderCosmic(area);
            else if (slot.type === 'classic') renderClassicSlots(area);
            else if (slot.type === 'megaways') renderMegaways(area);
            else if (slot.type === 'egyptian') renderEgyptian(area);
            else if (slot.type === 'cluster') renderFruitBlast(area);
        }

        // Huff & Puff Slot
        let huffState = { grid: [], spinning: false, bonusActive: false, bonusSpins: 0, houses: [], bet: 0 };

        function renderHuffPuff(container) {
            container.innerHTML = `
                <div class="bet-panel">
                    <div class="bet-section">
                        <h3>Huff & Puff</h3>
                        <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; margin-top: 10px;">
                            Match symbols to win. 6 Hard Hats in ONE spin trigger 5 bonus spins!<br>
                            In bonus: Hard Hats upgrade houses. 3+ Hard Hats reset spins to 5.<br>
                            Wolf blows down houses at end for big wins!
                        </p>
                    </div>
                    ${betPanelHtml('spinHuffPuff()')}
                    <button class="buy-bonus-btn" id="buyBonusBtn" onclick="buyBonusHuff()">
                        Buy Bonus ($500)
                    </button>
                    <button class="btn-primary" style="background: var(--bg-tertiary); margin-top: 10px;" onclick="loadGame('slots')">← Back to Slots</button>
                </div>
                <div class="game-display">
                    <div class="huff-puff-container">
                        <div class="huff-puff-machine" id="huffMachine">
                            ${Array(15).fill(0).map((_, i) => `
                                <div class="huff-reel" id="huffReel${i}">
                                    <div class="huff-symbol">⛑️</div>
                                </div>
                            `).join('')}
                        </div>
                        <div class="huff-info">
                            <div class="huff-stat">
                                <div class="huff-stat-label">Last Win</div>
                                <div class="huff-stat-value" id="huffLastWin">$0</div>
                            </div>
                            <div class="huff-stat">
                                <div class="huff-stat-label">Bonus Meter</div>
                                <div class="huff-stat-value" id="huffBonusMeter">0/6</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function buyBonusHuff() {
            const cost = 500;
            if (STATE.balance < cost) return alert('Insufficient balance!');
            STATE.balance -= cost;
            updateUI();
            saveData();
            startBonusRound();
        }

        function spinHuffPuff() {
            if (huffState.spinning) return;
            const bet = parseFloat(document.getElementById('betAmount').value);
            if (bet <= 0 || bet > STATE.balance) return;
            
            STATE.balance -= bet;
            huffState.bet = bet;
            huffState.spinning = true;
            updateUI();
            document.getElementById('betBtn').disabled = true;
            document.getElementById('buyBonusBtn').disabled = true;
            
            const results = [];
            for (let i = 0; i < 15; i++) {
                results.push(weightedRandom(SLOT_SYMBOLS.huffpuff));
            }
            
            const reels = document.querySelectorAll('.huff-reel');
            reels.forEach((reel, i) => {
                reel.classList.add('spinning');
                setTimeout(() => {
                    reel.classList.remove('spinning');
                    const sym = results[i];
                    reel.innerHTML = `<div class="huff-symbol ${sym.type === 'bonus' ? 'bonus' : ''}">${sym.sym}</div>`;
                }, 500 + (i % 5) * 200 + Math.floor(i / 5) * 100);
            });
            
            setTimeout(() => finishHuffSpin(results), 1500);
        }

        function finishHuffSpin(results) {
            huffState.spinning = false;
            document.getElementById('betBtn').disabled = false;
            document.getElementById('buyBonusBtn').disabled = false;
            
            const hardHats = results.filter(r => r.name === 'hardhat').length;
            document.getElementById('huffBonusMeter').textContent = `${hardHats}/6`;
            
            if (hardHats >= 6) {
                document.getElementById('huffBonusMeter').textContent = 'BONUS!';
                document.getElementById('huffBonusMeter').style.color = '#fbbf24';
                setTimeout(() => {
                    document.getElementById('huffBonusMeter').style.color = '';
                    startBonusRound();
                }, 1000);
                return;
            }
            
            let win = calculateHuffWin(results);
            if (win > 0) {
                STATE.balance += win;
                STATE.stats.profit += win - huffState.bet;
                STATE.stats.wins++;
                document.getElementById('huffLastWin').textContent = '$' + win.toFixed(2);
                document.getElementById('huffLastWin').style.color = '#22c55e';
            } else {
                STATE.stats.profit -= huffState.bet;
                document.getElementById('huffLastWin').textContent = '$0';
                document.getElementById('huffLastWin').style.color = '#ef4444';
            }
            
            STATE.stats.wagered += huffState.bet;
            STATE.stats.gamesPlayed++;
            updateUI();
            saveData();
        }

        function calculateHuffWin(results) {
            let totalWin = 0;
            const lines = [
                [0,1,2,3,4], [5,6,7,8,9], [10,11,12,13,14],
                [0,6,12,8,4], [10,6,2,8,14]
            ];
            
            lines.forEach(line => {
                const syms = line.map(i => results[i].name);
                const first = syms[0];
                if (first !== 'hardhat' && syms.every(s => s === first)) {
                    const mult = first === 'wolf' ? 15 : first === 'pig' ? 12 : first === 'house' ? 8 : 4;
                    totalWin += huffState.bet * mult;
                }
            });
            
            return totalWin;
        }

        function startBonusRound() {
            huffState.bonusActive = true;
            huffState.bonusSpins = 5;
            huffState.houses = Array(5).fill('straw');
            
            const overlay = document.getElementById('bonusOverlay');
            overlay.classList.add('active');
            document.getElementById('bonusGridContainer').classList.remove('wolf-blow-animation');
            document.getElementById('bonusTitle').textContent = 'BONUS ROUND!';
            document.getElementById('bonusSpinsDisplay').style.display = 'block';
            updateBonusDisplay();
            
            setTimeout(() => spinBonus(), 2000);
        }

        function updateBonusDisplay() {
            document.getElementById('bonusSpins').textContent = huffState.bonusSpins;
            const grid = document.getElementById('bonusGrid');
            grid.innerHTML = huffState.houses.map((level, i) => `
                <div class="bonus-cell ${level}" id="bonusCell${i}">
                    <div>${level === 'straw' ? '🌾' : level === 'wood' ? '🪵' : level === 'brick' ? '🧱' : level === 'gold' ? '🏆' : '💎'}</div>
                    <div class="bonus-cell-value">${HOUSE_VALUES[level]}x</div>
                </div>
            `).join('');
        }

        function spinBonus() {
            if (huffState.bonusSpins <= 0) {
                endBonusRound();
                return;
            }
            
            huffState.bonusSpins--;
            document.getElementById('bonusSpins').textContent = huffState.bonusSpins;
            
            const results = [];
            for (let i = 0; i < 5; i++) {
                results.push(weightedRandom(SLOT_SYMBOLS.huffpuff));
            }
            
            results.forEach((res, i) => {
                setTimeout(() => {
                    const cell = document.getElementById(`bonusCell${i}`);
                    cell.innerHTML = `<div>${res.sym}</div>`;
                    cell.style.transform = 'scale(1.2)';
                    setTimeout(() => cell.style.transform = 'scale(1)', 200);
                    
                    if (res.name === 'hardhat') {
                        const levels = ['straw', 'wood', 'brick', 'gold', 'diamond'];
                        const currentIdx = levels.indexOf(huffState.houses[i]);
                        if (currentIdx < 4) {
                            huffState.houses[i] = levels[currentIdx + 1];
                            cell.className = `bonus-cell ${huffState.houses[i]}`;
                            cell.innerHTML = `
                                <div>${huffState.houses[i] === 'straw' ? '🌾' : huffState.houses[i] === 'wood' ? '🪵' : huffState.houses[i] === 'brick' ? '🧱' : huffState.houses[i] === 'gold' ? '🏆' : '💎'}</div>
                                <div class="bonus-cell-value">${HOUSE_VALUES[huffState.houses[i]]}x</div>
                            `;
                        }
                    }
                }, i * 300);
            });
            
            const bonusHats = results.filter(r => r.name === 'hardhat').length;
            if (bonusHats >= 3) {
                huffState.bonusSpins = 5;
                setTimeout(() => {
                    alert('3+ Hard Hats! Spins reset to 5!');
                    document.getElementById('bonusSpins').textContent = huffState.bonusSpins;
                }, 2000);
            }
            
            setTimeout(() => {
                if (huffState.bonusSpins > 0) {
                    setTimeout(() => spinBonus(), 1000);
                } else {
                    setTimeout(() => endBonusRound(), 1000);
                }
            }, 2000);
        }

        function endBonusRound() {
            const container = document.getElementById('bonusGridContainer');
            container.classList.add('wolf-blow-animation');
            
            setTimeout(() => {
                let totalMult = 0;
                let breakdown = [];
                huffState.houses.forEach((level, idx) => {
                    const val = HOUSE_VALUES[level];
                    totalMult += val;
                    breakdown.push(`${level}: ${val}x`);
                });
                
                const win = huffState.bet * totalMult;
                STATE.balance += win;
                
                const profit = win - huffState.bet;
                STATE.stats.profit += profit;
                if (win > huffState.bet) STATE.stats.wins++;
                
                const winDisplay = document.getElementById('bonusWin');
                winDisplay.innerHTML = `
                    <div style="font-size: 24px; margin-bottom: 10px;">WOLF BLOW!</div>
                    <div style="font-size: 18px; color: var(--text-secondary); margin-bottom: 15px;">
                        ${breakdown.join(' + ')} = ${totalMult}x
                    </div>
                    <div style="font-size: 48px; color: ${win > huffState.bet ? '#22c55e' : '#ef4444'};">
                        ${win > huffState.bet ? '+' : ''}$${win.toFixed(2)}
                    </div>
                `;
                winDisplay.classList.add('show');
                
                updateUI();
                saveData();
                
                setTimeout(() => {
                    document.getElementById('bonusOverlay').classList.remove('active');
                    container.classList.remove('wolf-blow-animation');
                    winDisplay.classList.remove('show');
                    huffState.bonusActive = false;
                    document.getElementById('huffLastWin').textContent = '$' + win.toFixed(2);
                    document.getElementById('huffLastWin').style.color = win > huffState.bet ? '#22c55e' : '#ef4444';
                    document.getElementById('huffBonusMeter').textContent = '0/6';
                }, 4000);
            }, 2500);
        }

        // Enhanced Dragon Slot with Hatching Egg Bonus
        let dragonState = { spinning: false, bonusActive: false, bet: 0 };

        function renderDragon(container) {
            container.innerHTML = `
                <div class="bet-panel">
                    <div class="bet-section">
                        <h3>Dragon's Hoard</h3>
                        <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; margin-top: 10px;">
                            Match symbols to win. 3 Dragon Eggs in ONE spin trigger the Epic Hatch Bonus!<br>
                            Watch the egg crack and reveal your dragon for massive multipliers!
                        </p>
                    </div>
                    ${betPanelHtml('spinDragon()')}
                    <button class="buy-bonus-btn" id="buyBonusBtn" onclick="buyBonusDragon()">
                        Buy Bonus ($750)
                    </button>
                    <button class="btn-primary" style="background: var(--bg-tertiary); margin-top: 10px;" onclick="loadGame('slots')">← Back to Slots</button>
                </div>
                <div class="game-display">
                    <div class="huff-puff-container">
                        <div class="huff-puff-machine" id="dragonMachine">
                            ${Array(15).fill(0).map((_, i) => `
                                <div class="huff-reel" id="dragonReel${i}">
                                    <div class="huff-symbol">🥚</div>
                                </div>
                            `).join('')}
                        </div>
                        <div class="huff-info">
                            <div class="huff-stat">
                                <div class="huff-stat-label">Last Win</div>
                                <div class="huff-stat-value" id="dragonLastWin">$0</div>
                            </div>
                            <div class="huff-stat">
                                <div class="huff-stat-label">Bonus Meter</div>
                                <div class="huff-stat-value" id="dragonBonusMeter">0/3</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function buyBonusDragon() {
            const cost = 750;
            if (STATE.balance < cost) {
                alert('Insufficient balance!');
                return;
            }
            STATE.balance -= cost;
            updateUI();
            saveData();
            startDragonBonus();
        }

        function spinDragon() {
            if (dragonState.spinning) return;
            const bet = parseFloat(document.getElementById('betAmount').value);
            if (bet <= 0 || bet > STATE.balance) return;
            
            STATE.balance -= bet;
            dragonState.bet = bet;
            dragonState.spinning = true;
            updateUI();
            document.getElementById('betBtn').disabled = true;
            document.getElementById('buyBonusBtn').disabled = true;
            
            const results = [];
            for (let i = 0; i < 15; i++) {
                results.push(weightedRandom(SLOT_SYMBOLS.dragon));
            }
            
            const reels = document.querySelectorAll('.huff-reel');
            reels.forEach((reel, i) => {
                reel.classList.add('spinning');
                setTimeout(() => {
                    reel.classList.remove('spinning');
                    const sym = results[i];
                    reel.innerHTML = `<div class="huff-symbol ${sym.type === 'bonus' ? 'bonus' : ''}">${sym.sym}</div>`;
                }, 500 + (i % 5) * 200 + Math.floor(i / 5) * 100);
            });
            
            setTimeout(() => finishDragonSpin(results), 1500);
        }

        function finishDragonSpin(results) {
            dragonState.spinning = false;
            document.getElementById('betBtn').disabled = false;
            document.getElementById('buyBonusBtn').disabled = false;
            
            const eggs = results.filter(r => r.name === 'egg').length;
            document.getElementById('dragonBonusMeter').textContent = `${eggs}/3`;
            
            if (eggs >= 3) {
                document.getElementById('dragonBonusMeter').textContent = 'BONUS!';
                setTimeout(() => startDragonBonus(), 1000);
                return;
            }
            
            let win = calculateDragonWin(results);
            if (win > 0) {
                STATE.balance += win;
                STATE.stats.profit += win - dragonState.bet;
                STATE.stats.wins++;
                document.getElementById('dragonLastWin').textContent = '$' + win.toFixed(2);
                document.getElementById('dragonLastWin').style.color = '#22c55e';
            } else {
                STATE.stats.profit -= dragonState.bet;
                document.getElementById('dragonLastWin').textContent = '$0';
                document.getElementById('dragonLastWin').style.color = '#ef4444';
            }
            
            STATE.stats.wagered += dragonState.bet;
            STATE.stats.gamesPlayed++;
            updateUI();
            saveData();
        }

        function calculateDragonWin(results) {
            let totalWin = 0;
            const lines = [
                [0,1,2,3,4], [5,6,7,8,9], [10,11,12,13,14],
                [0,6,12,8,4], [10,6,2,8,14]
            ];
            
            lines.forEach(line => {
                const syms = line.map(i => results[i].name);
                const first = syms[0];
                if (syms.every(s => s === first)) {
                    const mult = first === 'crown' ? 20 : first === 'sword' ? 12 : first === 'shield' ? 8 : first === 'gem' ? 6 : 3;
                    totalWin += dragonState.bet * mult;
                }
            });
            
            return totalWin;
        }

        function startDragonBonus() {
            dragonState.bonusActive = true;
            
            const overlay = document.getElementById('bonusOverlay');
            overlay.classList.add('active');
            document.getElementById('bonusTitle').textContent = 'EPIC DRAGON HATCH!';
            document.getElementById('bonusSpinsDisplay').style.display = 'none';
            document.getElementById('bonusGridContainer').style.display = 'none';
            
            const bonusContent = document.createElement('div');
            bonusContent.id = 'dragonBonusContent';
            bonusContent.className = 'dragon-bonus-container';
            bonusContent.innerHTML = `
                <div class="dragon-egg" id="dragonEgg">
                    🥚
                    <div class="dragon-cracks" id="dragonCracks">
                        <div class="crack" style="top: 30%; left: 20%; width: 30%; height: 2px; transform: rotate(45deg);"></div>
                        <div class="crack" style="top: 50%; right: 20%; width: 25%; height: 2px; transform: rotate(-30deg);"></div>
                        <div class="crack" style="bottom: 30%; left: 30%; width: 20%; height: 2px; transform: rotate(60deg);"></div>
                    </div>
                </div>
                <div class="dragon-reveal" id="dragonReveal">🐉</div>
                <div class="dragon-type" id="dragonType"></div>
                <div class="dragon-reward" id="dragonReward"></div>
                <button class="btn-primary" id="crackBtn" style="margin-top: 20px;" onclick="crackEgg()">CRACK THE EGG!</button>
            `;
            
            overlay.appendChild(bonusContent);
        }

        let crackCount = 0;
        function crackEgg() {
            crackCount++;
            const cracks = document.getElementById('dragonCracks');
            const btn = document.getElementById('crackBtn');
            
            cracks.classList.add('show');
            
            if (crackCount === 1) {
                btn.textContent = 'CRACK AGAIN!';
            } else if (crackCount === 2) {
                btn.textContent = 'HATCH!';
            } else if (crackCount >= 3) {
                hatchDragon();
            }
        }

        function hatchDragon() {
            const egg = document.getElementById('dragonEgg');
            const reveal = document.getElementById('dragonReveal');
            const typeDiv = document.getElementById('dragonType');
            const rewardDiv = document.getElementById('dragonReward');
            
            egg.classList.add('dragon-hatch');
            
            const dragons = [
                { emoji: '🐲', name: 'Ancient Dragon', mult: 100, color: '#fbbf24' },
                { emoji: '🦕', name: 'Royal Dragon', mult: 50, color: '#a855f7' },
                { emoji: '🐉', name: 'Fire Dragon', mult: 25, color: '#ef4444' },
                { emoji: '🦖', name: 'Baby Dragon', mult: 10, color: '#22c55e' }
            ];
            
            const dragon = weightedRandom(dragons.map((d, i) => ({...d, weight: i === 0 ? 5 : i === 1 ? 15 : i === 2 ? 30 : 50})));
            const win = dragonState.bet * dragon.mult;
            
            setTimeout(() => {
                reveal.textContent = dragon.emoji;
                reveal.classList.add('show');
                reveal.style.filter = `drop-shadow(0 0 30px ${dragon.color})`;
                typeDiv.textContent = dragon.name;
                typeDiv.style.color = dragon.color;
                rewardDiv.textContent = `${dragon.mult}x = $${win.toFixed(2)}`;
                
                STATE.balance += win;
                STATE.stats.profit += win - dragonState.bet;
                STATE.stats.wins++;
                STATE.stats.wagered += dragonState.bet;
                STATE.stats.gamesPlayed++;
                updateUI();
                saveData();
                
                setTimeout(() => {
                    document.getElementById('bonusOverlay').classList.remove('active');
                    document.getElementById('dragonBonusContent').remove();
                    document.getElementById('bonusGridContainer').style.display = 'block';
                    document.getElementById('bonusSpinsDisplay').style.display = 'block';
                    dragonState.bonusActive = false;
                    crackCount = 0;
                    document.getElementById('dragonLastWin').textContent = '$' + win.toFixed(2);
                    document.getElementById('dragonLastWin').style.color = '#22c55e';
                    document.getElementById('dragonBonusMeter').textContent = '0/3';
                }, 4000);
            }, 1000);
        }

        // Enhanced Cosmic Slot with Rocket Launch Bonus
        let cosmicState = { spinning: false, bonusActive: false, bet: 0 };

        function renderCosmic(container) {
            container.innerHTML = `
                <div class="bet-panel">
                    <div class="bet-section">
                        <h3>Cosmic Burst</h3>
                        <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; margin-top: 10px;">
                            Match symbols to win. 3 Rockets in ONE spin trigger Rocket Launch Bonus!<br>
                            Launch the rocket and watch it reach orbit for astronomical prizes!
                        </p>
                    </div>
                    ${betPanelHtml('spinCosmic()')}
                    <button class="buy-bonus-btn" id="buyBonusBtn" onclick="buyBonusCosmic()">
                        Buy Bonus ($1000)
                    </button>
                    <button class="btn-primary" style="background: var(--bg-tertiary); margin-top: 10px;" onclick="loadGame('slots')">← Back to Slots</button>
                </div>
                <div class="game-display">
                    <div class="huff-puff-container">
                        <div class="huff-puff-machine" id="cosmicMachine">
                            ${Array(15).fill(0).map((_, i) => `
                                <div class="huff-reel" id="cosmicReel${i}">
                                    <div class="huff-symbol">🚀</div>
                                </div>
                            `).join('')}
                        </div>
                        <div class="huff-info">
                            <div class="huff-stat">
                                <div class="huff-stat-label">Last Win</div>
                                <div class="huff-stat-value" id="cosmicLastWin">$0</div>
                            </div>
                            <div class="huff-stat">
                                <div class="huff-stat-label">Bonus Meter</div>
                                <div class="huff-stat-value" id="cosmicBonusMeter">0/3</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function buyBonusCosmic() {
            const cost = 1000;
            if (STATE.balance < cost) {
                alert('Insufficient balance!');
                return;
            }
            STATE.balance -= cost;
            updateUI();
            saveData();
            startCosmicBonus();
        }

        function spinCosmic() {
            if (cosmicState.spinning) return;
            const bet = parseFloat(document.getElementById('betAmount').value);
            if (bet <= 0 || bet > STATE.balance) return;
            
            STATE.balance -= bet;
            cosmicState.bet = bet;
            cosmicState.spinning = true;
            updateUI();
            document.getElementById('betBtn').disabled = true;
            document.getElementById('buyBonusBtn').disabled = true;
            
            const results = [];
            for (let i = 0; i < 15; i++) {
                results.push(weightedRandom(SLOT_SYMBOLS.cosmic));
            }
            
            const reels = document.querySelectorAll('.huff-reel');
            reels.forEach((reel, i) => {
                reel.classList.add('spinning');
                setTimeout(() => {
                    reel.classList.remove('spinning');
                    const sym = results[i];
                    reel.innerHTML = `<div class="huff-symbol ${sym.type === 'bonus' ? 'bonus' : ''}">${sym.sym}</div>`;
                }, 500 + (i % 5) * 200 + Math.floor(i / 5) * 100);
            });
            
            setTimeout(() => finishCosmicSpin(results), 1500);
        }

        function finishCosmicSpin(results) {
            cosmicState.spinning = false;
            document.getElementById('betBtn').disabled = false;
            document.getElementById('buyBonusBtn').disabled = false;
            
            const rockets = results.filter(r => r.name === 'rocket').length;
            document.getElementById('cosmicBonusMeter').textContent = `${rockets}/3`;
            
            if (rockets >= 3) {
                document.getElementById('cosmicBonusMeter').textContent = 'BONUS!';
                setTimeout(() => startCosmicBonus(), 1000);
                return;
            }
            
            let win = calculateCosmicWin(results);
            if (win > 0) {
                STATE.balance += win;
                STATE.stats.profit += win - cosmicState.bet;
                STATE.stats.wins++;
                document.getElementById('cosmicLastWin').textContent = '$' + win.toFixed(2);
                document.getElementById('cosmicLastWin').style.color = '#22c55e';
            } else {
                STATE.stats.profit -= cosmicState.bet;
                document.getElementById('cosmicLastWin').textContent = '$0';
                document.getElementById('cosmicLastWin').style.color = '#ef4444';
            }
            
            STATE.stats.wagered += cosmicState.bet;
            STATE.stats.gamesPlayed++;
            updateUI();
            saveData();
        }

        function calculateCosmicWin(results) {
            let totalWin = 0;
            const lines = [
                [0,1,2,3,4], [5,6,7,8,9], [10,11,12,13,14],
                [0,6,12,8,4], [10,6,2,8,14]
            ];
            
            lines.forEach(line => {
                const syms = line.map(i => results[i].name);
                const first = syms[0];
                if (first !== 'rocket' && syms.every(s => s === first)) {
                    const mult = first === 'star' ? 20 : first === 'planet' ? 12 : first === 'blackhole' ? 8 : first === 'alien' ? 6 : 4;
                    totalWin += cosmicState.bet * mult;
                }
            });
            
            return totalWin;
        }

        function startCosmicBonus() {
            cosmicState.bonusActive = true;
            
            const overlay = document.getElementById('bonusOverlay');
            overlay.classList.add('active');
            document.getElementById('bonusTitle').textContent = 'ROCKET LAUNCH!';
            document.getElementById('bonusSpinsDisplay').style.display = 'none';
            document.getElementById('bonusGridContainer').style.display = 'none';
            
            const bonusContent = document.createElement('div');
            bonusContent.id = 'cosmicBonusContent';
            bonusContent.className = 'cosmic-bonus-container';
            bonusContent.innerHTML = `
                <div class="rocket-launch-pad">
                    <div class="rocket-trail" id="rocketTrail"></div>
                    <div class="rocket-ship" id="rocketShip">🚀</div>
                </div>
                <button class="rocket-spin-btn" id="launchBtn" onclick="launchRocket()">LAUNCH ROCKET!</button>
                <div class="orbit-reveal" id="orbitReveal">
                    <div class="orbit-planet planet-gold">🪙</div>
                    <div class="orbit-planet planet-purple">💎</div>
                    <div class="orbit-planet planet-blue">🌍</div>
                    <div class="orbit-planet planet-red">🔴</div>
                    <div class="orbit-center">🌟</div>
                </div>
                <div class="orbit-result" id="orbitResult"></div>
                <div class="orbit-multiplier" id="orbitMultiplier"></div>
            `;
            
            overlay.appendChild(bonusContent);
        }

        function launchRocket() {
            const btn = document.getElementById('launchBtn');
            const rocket = document.getElementById('rocketShip');
            const trail = document.getElementById('rocketTrail');
            
            btn.disabled = true;
            btn.style.opacity = '0.5';
            
            rocket.classList.add('launching');
            trail.classList.add('show');
            
            setTimeout(() => {
                document.getElementById('orbitReveal').classList.add('show');
                setTimeout(() => selectPlanet(), 2000);
            }, 3000);
        }

        function selectPlanet() {
            const planets = [
                { type: 'gold', mult: 100, name: 'Golden Planet' },
                { type: 'purple', mult: 50, name: 'Crystal Planet' },
                { type: 'blue', mult: 25, name: 'Earth Bonus' },
                { type: 'red', mult: 10, name: 'Mars Mini' }
            ];
            
            const planet = weightedRandom(planets.map((p, i) => ({...p, weight: [5, 15, 30, 50][i]})));
            const win = cosmicState.bet * planet.mult;
            
            document.getElementById('orbitResult').textContent = `Landed on ${planet.name}!`;
            document.getElementById('orbitMultiplier').textContent = `${planet.mult}x = $${win.toFixed(2)}`;
            
            STATE.balance += win;
            STATE.stats.profit += win - cosmicState.bet;
            STATE.stats.wins++;
            STATE.stats.wagered += cosmicState.bet;
            STATE.stats.gamesPlayed++;
            updateUI();
            saveData();
            
            setTimeout(() => {
                document.getElementById('bonusOverlay').classList.remove('active');
                document.getElementById('cosmicBonusContent').remove();
                document.getElementById('bonusGridContainer').style.display = 'block';
                document.getElementById('bonusSpinsDisplay').style.display = 'block';
                cosmicState.bonusActive = false;
                document.getElementById('cosmicLastWin').textContent = '$' + win.toFixed(2);
                document.getElementById('cosmicLastWin').style.color = '#22c55e';
                document.getElementById('cosmicBonusMeter').textContent = '0/3';
            }, 4000);
        }

        // Classic 3-Reel Slot
        function renderClassicSlots(container) {
            container.innerHTML = `
                <div class="bet-panel">
                    <div class="bet-section">
                        <h3>Classic Slots</h3>
                        <p style="font-size: 12px; color: var(--text-secondary); margin-top: 10px;">
                            Traditional 3-reel slot. Match 3 symbols to win!<br>
                            7️⃣ 7️⃣ 7️⃣ = 100x | 💎 💎 💎 = 50x | 🔔 🔔 🔔 = 25x
                        </p>
                    </div>
                    ${betPanelHtml('spinClassic()')}
                    <button class="btn-primary" style="background: var(--bg-tertiary); margin-top: 10px;" onclick="loadGame('slots')">← Back to Slots</button>
                </div>
                <div class="game-display">
                    <div style="display: flex; flex-direction: column; align-items: center; gap: 30px;">
                        <div style="display: flex; gap: 20px; background: linear-gradient(135deg, #1a0b2e, #0f0518); padding: 40px; border-radius: var(--radius); border: 2px solid var(--accent); box-shadow: 0 0 40px var(--accent-glow);">
                            ${[0,1,2].map(i => `
                                <div class="huff-reel" id="classicReel${i}" style="width: 150px; height: 180px;">
                                    <div class="huff-symbol" style="font-size: 80px;">7️⃣</div>
                                </div>
                            `).join('')}
                        </div>
                        <div id="classicWinDisplay" style="font-family: 'JetBrains Mono'; font-size: 32px; color: var(--accent); text-shadow: 0 0 20px var(--accent-glow);">$0</div>
                    </div>
                </div>
            `;
        }

        function spinClassic() {
            const bet = parseFloat(document.getElementById('betAmount').value);
            if (bet <= 0 || bet > STATE.balance) return;
            
            STATE.balance -= bet;
            updateUI();
            document.getElementById('betBtn').disabled = true;
            
            const reels = [0,1,2].map(i => document.getElementById(`classicReel${i}`));
            const results = [];
            
            reels.forEach((reel, i) => {
                reel.classList.add('spinning');
                setTimeout(() => {
                    const sym = weightedRandom(SLOT_SYMBOLS.classic);
                    results[i] = sym;
                    reel.classList.remove('spinning');
                    reel.innerHTML = `<div class="huff-symbol" style="font-size: 80px;">${sym.sym}</div>`;
                    
                    if (i === 2) finishClassic(results, bet);
                }, 800 + i * 400);
            });
        }

        function finishClassic(results, bet) {
            document.getElementById('betBtn').disabled = false;
            let win = 0;
            
            if (results[0].name === results[1].name && results[1].name === results[2].name) {
                win = bet * results[0].value;
            }
            
            if (win > 0) {
                STATE.balance += win;
                STATE.stats.profit += win - bet;
                STATE.stats.wins++;
                document.getElementById('classicWinDisplay').textContent = '+$' + win.toFixed(2);
                document.getElementById('classicWinDisplay').style.color = '#22c55e';
            } else {
                STATE.stats.profit -= bet;
                document.getElementById('classicWinDisplay').textContent = '-$' + bet.toFixed(2);
                document.getElementById('classicWinDisplay').style.color = '#ef4444';
            }
            
            STATE.stats.wagered += bet;
            STATE.stats.gamesPlayed++;
            updateUI();
            saveData();
        }

        // Megaways Slot
        function renderMegaways(container) {
            container.innerHTML = `
                <div class="bet-panel">
                    <div class="bet-section">
                        <h3>Mega Ways</h3>
                        <p style="font-size: 12px; color: var(--text-secondary); margin-top: 10px;">
                            Up to 117,649 ways to win! Cascading reels with increasing multipliers.
                        </p>
                    </div>
                    ${betPanelHtml('spinMegaways()')}
                    <button class="btn-primary" style="background: var(--bg-tertiary); margin-top: 10px;" onclick="loadGame('slots')">← Back to Slots</button>
                </div>
                <div class="game-display">
                    <div style="display: flex; flex-direction: column; align-items: center; gap: 20px;">
                        <div style="font-family: 'JetBrains Mono'; font-size: 18px; color: var(--accent);">
                            Ways to Win: <span id="waysToWin">0</span>
                        </div>
                        <div class="megaways-display" id="megawaysReels">
                            ${Array(6).fill(0).map((_, i) => `
                                <div class="megaways-reel" id="megaReel${i}"></div>
                            `).join('')}
                        </div>
                        <div id="megaWinDisplay" style="font-family: 'JetBrains Mono'; font-size: 32px; color: var(--accent); text-shadow: 0 0 20px var(--accent-glow);">$0</div>
                    </div>
                </div>
            `;
            initMegaways();
        }

        function initMegaways() {
            for (let i = 0; i < 6; i++) {
                const reel = document.getElementById(`megaReel${i}`);
                const symbols = [];
                const height = 3 + Math.floor(Math.random() * 4); // 3-6 symbols per reel
                for (let j = 0; j < height; j++) {
                    const sym = weightedRandom(SLOT_SYMBOLS.megaways);
                    symbols.push(`<div class="megaways-symbol">${sym.sym}</div>`);
                }
                reel.innerHTML = symbols.join('');
            }
            updateWaysToWin();
        }

        function updateWaysToWin() {
            let ways = 1;
            for (let i = 0; i < 6; i++) {
                ways *= document.getElementById(`megaReel${i}`).children.length;
            }
            document.getElementById('waysToWin').textContent = ways.toLocaleString();
        }

        function spinMegaways() {
            const bet = parseFloat(document.getElementById('betAmount').value);
            if (bet <= 0 || bet > STATE.balance) return;
            
            STATE.balance -= bet;
            updateUI();
            document.getElementById('betBtn').disabled = true;
            
            // Animate reels
            for (let i = 0; i < 6; i++) {
                const reel = document.getElementById(`megaReel${i}`);
                reel.style.opacity = '0.5';
                setTimeout(() => {
                    const height = 3 + Math.floor(Math.random() * 4);
                    const symbols = [];
                    for (let j = 0; j < height; j++) {
                        const sym = weightedRandom(SLOT_SYMBOLS.megaways);
                        symbols.push(`<div class="megaways-symbol">${sym.sym}</div>`);
                    }
                    reel.innerHTML = symbols.join('');
                    reel.style.opacity = '1';
                    if (i === 5) finishMegaways(bet);
                }, i * 200);
            }
        }

        function finishMegaways(bet) {
            document.getElementById('betBtn').disabled = false;
            updateWaysToWin();
            
            // Simplified win calculation
            const ways = parseInt(document.getElementById('waysToWin').textContent.replace(/,/g, ''));
            const winChance = Math.min(ways / 100000, 0.5);
            const win = Math.random() < winChance ? bet * (1 + Math.random() * 10) : 0;
            
            if (win > 0) {
                STATE.balance += win;
                STATE.stats.profit += win - bet;
                STATE.stats.wins++;
                document.getElementById('megaWinDisplay').textContent = '+$' + win.toFixed(2);
                document.getElementById('megaWinDisplay').style.color = '#22c55e';
            } else {
                STATE.stats.profit -= bet;
                document.getElementById('megaWinDisplay').textContent = '-$' + bet.toFixed(2);
                document.getElementById('megaWinDisplay').style.color = '#ef4444';
            }
            
            STATE.stats.wagered += bet;
            STATE.stats.gamesPlayed++;
            updateUI();
            saveData();
        }

        // Egyptian Slot (5x4)
        function renderEgyptian(container) {
            container.innerHTML = `
                <div class="bet-panel">
                    <div class="bet-section">
                        <h3>Pharaoh's Riches</h3>
                        <p style="font-size: 12px; color: var(--text-secondary); margin-top: 10px;">
                            5x4 slot with expanding symbols in free spins!
                        </p>
                    </div>
                    ${betPanelHtml('spinEgyptian()')}
                    <button class="btn-primary" style="background: var(--bg-tertiary); margin-top: 10px;" onclick="loadGame('slots')">← Back to Slots</button>
                </div>
                <div class="game-display">
                    <div class="huff-puff-container">
                        <div class="huff-puff-machine slot-5x4" id="egyptianMachine" style="grid-template-columns: repeat(5, 1fr);">
                            ${Array(20).fill(0).map((_, i) => `
                                <div class="huff-reel slot-cell-5x4" id="egyptReel${i}">
                                    <div class="huff-symbol" style="font-size: 40px;">🔺</div>
                                </div>
                            `).join('')}
                        </div>
                        <div class="huff-info">
                            <div class="huff-stat">
                                <div class="huff-stat-label">Last Win</div>
                                <div class="huff-stat-value" id="egyptLastWin">$0</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function spinEgyptian() {
            const bet = parseFloat(document.getElementById('betAmount').value);
            if (bet <= 0 || bet > STATE.balance) return;
            
            STATE.balance -= bet;
            updateUI();
            document.getElementById('betBtn').disabled = true;
            
            const results = [];
            for (let i = 0; i < 20; i++) {
                results.push(weightedRandom(SLOT_SYMBOLS.egyptian));
            }
            
            const reels = document.querySelectorAll('.huff-reel');
            reels.forEach((reel, i) => {
                reel.style.opacity = '0.5';
                setTimeout(() => {
                    reel.style.opacity = '1';
                    const sym = results[i];
                    reel.innerHTML = `<div class="huff-symbol slot-cell-5x4 ${sym.type === 'bonus' ? 'bonus' : ''}" style="font-size: 40px;">${sym.sym}</div>`;
                    if (i === 19) finishEgyptian(results, bet);
                }, Math.random() * 500);
            });
        }

        function finishEgyptian(results, bet) {
            document.getElementById('betBtn').disabled = false;
            
            // Check for pyramid bonus
            const pyramids = results.filter(r => r.name === 'pyramid').length;
            let win = 0;
            
            if (pyramids >= 3) {
                // Free spins with expanding symbol
                const expandingSym = weightedRandom(SLOT_SYMBOLS.egyptian.filter(s => s.type !== 'bonus'));
                win = bet * 20; // Simplified bonus
                alert(`Free Spins! Expanding symbol: ${expandingSym.sym}`);
            } else {
                // Regular line wins
                win = bet * (Math.random() > 0.7 ? Math.random() * 10 : 0);
            }
            
            if (win > 0) {
                STATE.balance += win;
                STATE.stats.profit += win - bet;
                STATE.stats.wins++;
                document.getElementById('egyptLastWin').textContent = '$' + win.toFixed(2);
                document.getElementById('egyptLastWin').style.color = '#22c55e';
            } else {
                STATE.stats.profit -= bet;
                document.getElementById('egyptLastWin').textContent = '$0';
                document.getElementById('egyptLastWin').style.color = '#ef4444';
            }
            
            STATE.stats.wagered += bet;
            STATE.stats.gamesPlayed++;
            updateUI();
            saveData();
        }

        // Fruit Blast Cluster Pays (6x6)
        function renderFruitBlast(container) {
            container.innerHTML = `
                <div class="bet-panel">
                    <div class="bet-section">
                        <h3>Fruit Blast</h3>
                        <p style="font-size: 12px; color: var(--text-secondary); margin-top: 10px;">
                            Cluster pays! Match 5+ adjacent fruits for explosive wins!
                        </p>
                    </div>
                    ${betPanelHtml('spinFruitBlast()')}
                    <button class="btn-primary" style="background: var(--bg-tertiary); margin-top: 10px;" onclick="loadGame('slots')">← Back to Slots</button>
                </div>
                <div class="game-display">
                    <div style="display: flex; flex-direction: column; align-items: center; gap: 20px;">
                        <div class="huff-puff-machine slot-4x4" id="fruitGrid" style="grid-template-columns: repeat(6, 1fr);">
                            ${Array(36).fill(0).map((_, i) => `
                                <div class="huff-reel slot-cell-4x4 fruit-cell" id="fruitCell${i}" style="width: 70px; height: 70px; cursor: pointer;" onclick="selectFruitCluster(${i})">
                                    <div class="huff-symbol" style="font-size: 35px;">🍓</div>
                                </div>
                            `).join('')}
                        </div>
                        <div style="display: flex; gap: 20px;">
                            <div class="huff-stat">
                                <div class="huff-stat-label">Selected</div>
                                <div class="huff-stat-value" id="selectedCount">0</div>
                            </div>
                            <div class="huff-stat">
                                <div class="huff-stat-label">Multiplier</div>
                                <div class="huff-stat-value" id="clusterMult">1x</div>
                            </div>
                            <div class="huff-stat">
                                <div class="huff-stat-label">Win</div>
                                <div class="huff-stat-value" id="fruitWin">$0</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            initFruitGrid();
        }

        let fruitGrid = [];
        let selectedCluster = [];

        function initFruitGrid() {
            fruitGrid = [];
            for (let i = 0; i < 36; i++) {
                const sym = weightedRandom(SLOT_SYMBOLS.fruitblast);
                fruitGrid.push(sym);
                document.getElementById(`fruitCell${i}`).innerHTML = `<div class="huff-symbol" style="font-size: 35px;">${sym.sym}</div>`;
                document.getElementById(`fruitCell${i}`).style.background = '';
            }
            selectedCluster = [];
            updateClusterDisplay();
        }

        function selectFruitCluster(idx) {
            if (selectedCluster.includes(idx)) {
                selectedCluster = selectedCluster.filter(i => i !== idx);
                document.getElementById(`fruitCell${idx}`).style.background = '';
            } else {
                // Check if adjacent to existing selection
                if (selectedCluster.length > 0) {
                    const last = selectedCluster[selectedCluster.length - 1];
                    const row = Math.floor(idx / 6);
                    const col = idx % 6;
                    const lastRow = Math.floor(last / 6);
                    const lastCol = last % 6;
                    const adjacent = Math.abs(row - lastRow) + Math.abs(col - lastCol) === 1;
                    if (!adjacent) return;
                    
                    // Must be same symbol
                    if (fruitGrid[idx].name !== fruitGrid[selectedCluster[0]].name) return;
                }
                selectedCluster.push(idx);
                document.getElementById(`fruitCell${idx}`).style.background = 'rgba(168, 85, 247, 0.5)';
            }
            updateClusterDisplay();
        }

        function updateClusterDisplay() {
            document.getElementById('selectedCount').textContent = selectedCluster.length;
            const mult = selectedCluster.length >= 5 ? Math.pow(1.5, selectedCluster.length - 4) : 0;
            document.getElementById('clusterMult').textContent = mult.toFixed(1) + 'x';
            
            const bet = parseFloat(document.getElementById('betAmount').value) || 0;
            document.getElementById('fruitWin').textContent = '$' + (bet * mult).toFixed(0);
        }

        function spinFruitBlast() {
            const bet = parseFloat(document.getElementById('betAmount').value);
            if (bet <= 0 || bet > STATE.balance) return;
            
            if (selectedCluster.length < 5) {
                alert('Select at least 5 adjacent matching fruits!');
                return;
            }
            
            STATE.balance -= bet;
            updateUI();
            
            const mult = Math.pow(1.5, selectedCluster.length - 4);
            const win = bet * mult;
            
            // Animate explosion
            selectedCluster.forEach((idx, i) => {
                setTimeout(() => {
                    document.getElementById(`fruitCell${idx}`).style.transform = 'scale(0)';
                    setTimeout(() => {
                        const newSym = weightedRandom(SLOT_SYMBOLS.fruitblast);
                        fruitGrid[idx] = newSym;
                        const cell = document.getElementById(`fruitCell${idx}`);
                        cell.innerHTML = `<div class="huff-symbol" style="font-size: 35px;">${newSym.sym}</div>`;
                        cell.style.background = '';
                        cell.style.transform = 'scale(1)';
                    }, 300);
                }, i * 50);
            });
            
            setTimeout(() => {
                STATE.balance += win;
                STATE.stats.profit += win - bet;
                if (win > bet) STATE.stats.wins++;
                STATE.stats.wagered += bet;
                STATE.stats.gamesPlayed++;
                updateUI();
                saveData();
                
                document.getElementById('fruitWin').textContent = '$' + win.toFixed(0);
                document.getElementById('fruitWin').style.color = '#22c55e';
                selectedCluster = [];
                updateClusterDisplay();
            }, selectedCluster.length * 50 + 500);
        }

        // ==========================================
        // PLINKO
        // ==========================================
        
        function renderPlinko(container) {
            container.innerHTML = `
                <div class="bet-panel">
                    <div class="bet-section">
                        <h3>Risk Level</h3>
                        <div class="plinko-risk-selector">
                            <button class="plinko-risk-btn ${PLINKO_CONFIG.risk === 'low' ? 'active' : ''}" onclick="setPlinkoRisk('low')">Low</button>
                            <button class="plinko-risk-btn ${PLINKO_CONFIG.risk === 'medium' ? 'active' : ''}" onclick="setPlinkoRisk('medium')">Medium</button>
                            <button class="plinko-risk-btn ${PLINKO_CONFIG.risk === 'high' ? 'active' : ''}" onclick="setPlinkoRisk('high')">High</button>
                        </div>
                    </div>
                    <div class="bet-section">
                        <h3>Rows</h3>
                        <div class="plinko-row-control">
                            <label>Rows</label>
                            <input type="range" min="8" max="16" value="${PLINKO_CONFIG.rows}" oninput="setPlinkoRows(this.value)">
                            <div class="plinko-row-value" id="plinkoRowVal">${PLINKO_CONFIG.rows}</div>
                        </div>
                    </div>
                    ${betPanelHtml('dropPlinkoBall()')}
                </div>
                <div class="game-display">
                    <div class="plinko-container">
                        <div class="plinko-board">
                            <canvas id="plinkoCanvas" width="800" height="650"></canvas>
                        </div>
                        <div class="plinko-multipliers" id="plinkoMultipliers"></div>
                        <div class="plinko-stats-row">
                            <div class="plinko-stat-box">
                                <div class="plinko-stat-label">Last Win</div>
                                <div class="plinko-stat-value" id="plinkoLastWin">-</div>
                            </div>
                            <div class="plinko-stat-box">
                                <div class="plinko-stat-label">Total Balls</div>
                                <div class="plinko-stat-value" id="plinkoTotalBalls">0</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            initPlinko();
        }

        function setPlinkoRisk(risk) {
            PLINKO_CONFIG.risk = risk;
            renderPlinko(document.getElementById('gameArea'));
        }

        function setPlinkoRows(rows) {
            PLINKO_CONFIG.rows = parseInt(rows);
            document.getElementById('plinkoRowVal').textContent = rows;
            initPlinko();
        }

        function initPlinko() {
            const mults = generateMultipliers(PLINKO_CONFIG.rows, PLINKO_CONFIG.risk);
            const multContainer = document.getElementById('plinkoMultipliers');
            
            multContainer.innerHTML = '';
            mults.forEach((m, i) => {
                const div = document.createElement('div');
                div.className = 'plinko-mult';
                if (m >= 2) div.classList.add('high');
                else if (m >= 0.8) div.classList.add('med');
                else div.classList.add('low');
                div.textContent = m + 'x';
                multContainer.appendChild(div);
            });
            
            drawPlinkoBoard();
        }

        function drawPlinkoBoard() {
            const canvas = document.getElementById('plinkoCanvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, 800, 650);
            
            const rows = PLINKO_CONFIG.rows;
            const pegRadius = 6;
            const startY = 80;
            const endY = 500;
            const boardWidth = 700;
            const startX = (800 - boardWidth) / 2;
            
            const pegs = [];
            for (let r = 0; r < rows; r++) {
                const pegsInRow = r + 3;
                const rowWidth = (pegsInRow - 1) * (boardWidth / (rows + 2));
                const rowStartX = 400 - rowWidth / 2;
                const y = startY + (r / (rows - 1)) * (endY - startY);
                
                for (let c = 0; c < pegsInRow; c++) {
                    const x = rowStartX + c * (boardWidth / (rows + 2));
                    pegs.push({ x, y, r: pegRadius });
                }
            }
            
            ctx.fillStyle = '#444';
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 2;
            
            pegs.forEach(peg => {
                ctx.beginPath();
                ctx.arc(peg.x, peg.y, peg.r, 0, Math.PI * 2);
                ctx.fill();
                ctx.stroke();
            });
            
            window.plinkoPegs = pegs;
            
            const mults = generateMultipliers(rows, PLINKO_CONFIG.risk);
            const bucketWidth = boardWidth / mults.length;
            
            mults.forEach((m, i) => {
                const x = startX + i * bucketWidth;
                const y = 550;
                
                ctx.fillStyle = m >= 2 ? 'rgba(34, 197, 94, 0.2)' : m >= 0.8 ? 'rgba(168, 85, 247, 0.2)' : 'rgba(239, 68, 68, 0.2)';
                ctx.fillRect(x + 2, y, bucketWidth - 4, 80);
                
                ctx.fillStyle = m >= 2 ? '#22c55e' : m >= 0.8 ? '#a855f7' : '#ef4444';
                ctx.font = 'bold 16px JetBrains Mono';
                ctx.textAlign = 'center';
                ctx.fillText(m + 'x', x + bucketWidth / 2, y + 45);
            });
        }

        function dropPlinkoBall() {
            const bet = parseFloat(document.getElementById('betAmount').value);
            if (bet <= 0 || bet > STATE.balance) return;
            STATE.balance -= bet;
            updateUI();
            document.getElementById('betBtn').disabled = true;
            
            const canvas = document.getElementById('plinkoCanvas');
            const ctx = canvas.getContext('2d');
            const pegs = window.plinkoPegs || [];
            
            let x = 400;
            let y = 20;
            let vx = (Math.random() - 0.5) * 2;
            let vy = 0;
            const radius = 8;
            const gravity = 0.4;
            const bounce = 0.6;
            const friction = 0.99;
            
            let landed = false;
            let path = [{x, y}];
            
            function animate() {
                if (landed) return;
                
                drawPlinkoBoard();
                
                vy += gravity;
                vx *= friction;
                x += vx;
                y += vy;
                
                for (let peg of pegs) {
                    const dx = x - peg.x;
                    const dy = y - peg.y;
                    const dist = Math.sqrt(dx * dx + dy * dy);
                    const minDist = radius + peg.r;
                    
                    if (dist < minDist) {
                        const angle = Math.atan2(dy, dx);
                        const speed = Math.sqrt(vx * vx + vy * vy);
                        
                        const bounceAngle = angle + (Math.random() - 0.5) * 0.5;
                        const newSpeed = speed * bounce;
                        
                        vx = Math.cos(bounceAngle) * newSpeed;
                        vy = Math.abs(Math.sin(bounceAngle) * newSpeed) * -1;
                        
                        const overlap = minDist - dist;
                        x += Math.cos(angle) * overlap;
                        y += Math.sin(angle) * overlap;
                        
                        break;
                    }
                }
                
                if (x < radius) {
                    x = radius;
                    vx *= -0.8;
                }
                if (x > 800 - radius) {
                    x = 800 - radius;
                    vx *= -0.8;
                }
                
                ctx.strokeStyle = 'rgba(168, 85, 247, 0.3)';
                ctx.lineWidth = 3;
                ctx.beginPath();
                path.forEach((p, i) => {
                    if (i === 0) ctx.moveTo(p.x, p.y);
                    else ctx.lineTo(p.x, p.y);
                });
                ctx.stroke();
                
                ctx.fillStyle = '#a855f7';
                ctx.shadowBlur = 15;
                ctx.shadowColor = '#a855f7';
                ctx.beginPath();
                ctx.arc(x, y, radius, 0, Math.PI * 2);
                ctx.fill();
                ctx.shadowBlur = 0;
                
                path.push({x, y});
                
                if (y > 550) {
                    landed = true;
                    const mults = generateMultipliers(PLINKO_CONFIG.rows, PLINKO_CONFIG.risk);
                    const boardWidth = 700;
                    const startX = (800 - boardWidth) / 2;
                    const bucketWidth = boardWidth / mults.length;
                    const relativeX = x - startX;
                    const bucketIdx = Math.max(0, Math.min(Math.floor(relativeX / bucketWidth), mults.length - 1));
                    const mult = mults[bucketIdx];
                    const win = bet * mult;
                    
                    STATE.balance += win;
                    STATE.stats.profit += win - bet;
                    STATE.stats.wagered += bet;
                    STATE.stats.gamesPlayed++;
                    if (win > bet) STATE.stats.wins++;
                    updateUI();
                    saveData();
                    document.getElementById('betBtn').disabled = false;
                    
                    document.getElementById('plinkoLastWin').textContent = (win > bet ? '+' : '') + (win - bet).toFixed(2);
                    document.getElementById('plinkoLastWin').style.color = win > bet ? '#22c55e' : '#ef4444';
                    const totalBalls = parseInt(document.getElementById('plinkoTotalBalls').textContent) + 1;
                    document.getElementById('plinkoTotalBalls').textContent = totalBalls;
                    
                    const slotDivs = document.querySelectorAll('.plinko-mult');
                    if (slotDivs[bucketIdx]) {
                        slotDivs[bucketIdx].classList.add('active');
                        setTimeout(() => slotDivs[bucketIdx].classList.remove('active'), 500);
                    }
                    return;
                }
                
                requestAnimationFrame(animate);
            }
            
            animate();
        }

        // ==========================================
        // KENO
        // ==========================================
        
        function renderKeno(container) {
            container.innerHTML = `
                <div class="bet-panel">
                    <div class="bet-section">
                        <h3>Keno</h3>
                        <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; margin-top: 10px;">
                            Pick 1-10 numbers. Match more to win bigger prizes!
                        </p>
                    </div>
                    <div class="bet-section">
                        <h3>Selected: <span id="kenoCount">0</span>/10</h3>
                        <button class="btn-primary" style="background: var(--red); margin-top: 10px;" onclick="clearKeno()">Clear</button>
                    </div>
                    ${betPanelHtml('playKeno()')}
                </div>
                <div class="game-display">
                    <div class="keno-grid" id="kenoGrid"></div>
                    <div id="kenoResult" style="margin-top: 30px; font-family: 'JetBrains Mono'; font-size: 24px;"></div>
                </div>
            `;
            initKeno();
        }

        function initKeno() {
            STATE.kenoSelected = [];
            const grid = document.getElementById('kenoGrid');
            grid.innerHTML = '';
            for (let i = 1; i <= 80; i++) {
                const cell = document.createElement('div');
                cell.className = 'keno-number';
                cell.textContent = i;
                cell.onclick = () => toggleKenoNumber(i, cell);
                grid.appendChild(cell);
            }
        }

        function toggleKenoNumber(num, cell) {
            if (STATE.kenoSelected.includes(num)) {
                STATE.kenoSelected = STATE.kenoSelected.filter(n => n !== num);
                cell.classList.remove('selected');
            } else {
                if (STATE.kenoSelected.length >= 10) return alert('Max 10 numbers!');
                STATE.kenoSelected.push(num);
                cell.classList.add('selected');
            }
            document.getElementById('kenoCount').textContent = STATE.kenoSelected.length;
        }

        function clearKeno() {
            STATE.kenoSelected = [];
            document.querySelectorAll('.keno-number').forEach(c => {
                c.classList.remove('selected', 'hit', 'miss');
            });
            document.getElementById('kenoCount').textContent = '0';
        }

        function playKeno() {
            const bet = parseFloat(document.getElementById('betAmount').value);
            if (bet <= 0 || bet > STATE.balance) return;
            if (STATE.kenoSelected.length === 0) return alert('Select at least 1 number!');
            
            STATE.balance -= bet;
            updateUI();
            
            // Draw 20 random numbers
            const drawn = [];
            while (drawn.length < 20) {
                const n = Math.floor(Math.random() * 80) + 1;
                if (!drawn.includes(n)) drawn.push(n);
            }
            
            // Show results
            const cells = document.querySelectorAll('.keno-number');
            let matches = 0;
            
            cells.forEach((cell, i) => {
                const num = i + 1;
                if (drawn.includes(num)) {
                    if (STATE.kenoSelected.includes(num)) {
                        cell.classList.add('hit');
                        matches++;
                    } else {
                        cell.classList.add('miss');
                    }
                }
            });
            
            // Calculate win
            const payTable = {
                0: [0, 0], 1: [0, 3], 2: [0, 12], 3: [0, 42], 4: [0, 155],
                5: [0, 820], 6: [0, 1600], 7: [0, 7000], 8: [0, 25000],
                9: [0, 50000], 10: [0, 100000]
            };
            
            const mult = (payTable[matches] || [0, 0])[1] / 10;
            const win = bet * mult;
            
            if (win > 0) {
                STATE.balance += win;
                STATE.stats.profit += win - bet;
                STATE.stats.wins++;
                document.getElementById('kenoResult').textContent = `Matched ${matches}! Won $${win.toFixed(2)}`;
                document.getElementById('kenoResult').style.color = '#22c55e';
            } else {
                STATE.stats.profit -= bet;
                document.getElementById('kenoResult').textContent = `Matched ${matches}. No win.`;
                document.getElementById('kenoResult').style.color = '#ef4444';
            }
            
            STATE.stats.wagered += bet;
            STATE.stats.gamesPlayed++;
            updateUI();
            saveData();
        }

        // ==========================================
        // DRAGON TOWER
        // ==========================================
        
        let towerGame = { level: 0, bet: 0, active: false, dragons: [] };

        function renderDragonTower(container) {
            container.innerHTML = `
                <div class="bet-panel">
                    <div class="bet-section">
                        <h3>Dragon Tower</h3>
                        <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; margin-top: 10px;">
                            Climb the tower! Find the safe path, avoid the dragon.<br>
                            Each level increases your multiplier. Cash out anytime!
                        </p>
                    </div>
                    <div class="bet-section">
                        <h3>Current Level</h3>
                        <div style="font-family: 'JetBrains Mono'; font-size: 36px; color: var(--accent); text-align: center;" id="towerLevel">0</div>
                        <div style="text-align: center; color: var(--text-secondary); margin-top: 5px;">Multiplier: <span id="towerMult">1.00</span>x</div>
                    </div>
                    ${betPanelHtml('startTower()', 'cashoutTower()')}
                </div>
                <div class="game-display">
                    <div class="tower-container" id="towerContainer">
                        ${Array(10).fill(0).map((_, i) => `
                            <div class="tower-level" id="towerLevel${i}">
                                ${[0,1,2].map(j => `
                                    <div class="tower-tile" id="towerTile${i}_${j}" onclick="clickTowerTile(${i}, ${j})">
                                        <span style="opacity: 0.3;">?</span>
                                        <div class="tower-multiplier">${(1 + i * 0.5).toFixed(1)}x</div>
                                    </div>
                                `).join('')}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function startTower() {
            const bet = parseFloat(document.getElementById('betAmount').value);
            if (bet <= 0 || bet > STATE.balance) return;
            
            STATE.balance -= bet;
            towerGame = { level: 0, bet: bet, active: true, dragons: [] };
            updateUI();
            
            // Place dragons randomly (1 per level)
            for (let i = 0; i < 10; i++) {
                towerGame.dragons.push(Math.floor(Math.random() * 3));
            }
            
            document.getElementById('betBtn').disabled = true;
            document.getElementById('cashoutBtn').disabled = false;
            updateTowerDisplay();
        }

        function updateTowerDisplay() {
            document.getElementById('towerLevel').textContent = towerGame.level;
            document.getElementById('towerMult').textContent = (1 + towerGame.level * 0.5).toFixed(2);
        }

        function clickTowerTile(level, tile) {
            if (!towerGame.active || level !== towerGame.level) return;
            
            const cell = document.getElementById(`towerTile${level}_${tile}`);
            
            if (towerGame.dragons[level] === tile) {
                // Hit dragon!
                cell.classList.add('revealed', 'dragon');
                cell.innerHTML = '🐉';
                endTower(false);
            } else {
                // Safe!
                cell.classList.add('revealed', 'safe');
                cell.innerHTML = '💎';
                towerGame.level++;
                updateTowerDisplay();
                
                if (towerGame.level === 10) {
                    endTower(true);
                }
            }
        }

        function cashoutTower() {
            if (!towerGame.active || towerGame.level === 0) return;
            endTower(true);
        }

        function endTower(won) {
            towerGame.active = false;
            const mult = 1 + (towerGame.level - (won ? 0 : 1)) * 0.5;
            const win = won ? towerGame.bet * mult : 0;
            
            if (win > 0) {
                STATE.balance += win;
                STATE.stats.profit += win - towerGame.bet;
                STATE.stats.wins++;
                alert(`Cashed out at level ${towerGame.level}! Won $${(win - towerGame.bet).toFixed(2)}`);
            } else {
                STATE.stats.profit -= towerGame.bet;
                alert('Dragon got you! Better luck next time.');
            }
            
            STATE.stats.wagered += towerGame.bet;
            STATE.stats.gamesPlayed++;
            updateUI();
            saveData();
            
            document.getElementById('betBtn').disabled = false;
            document.getElementById('cashoutBtn').disabled = true;
            
            // Reset tiles
            for (let i = 0; i < 10; i++) {
                for (let j = 0; j < 3; j++) {
                    const cell = document.getElementById(`towerTile${i}_${j}`);
                    cell.classList.remove('revealed', 'safe', 'dragon');
                    cell.innerHTML = '<span style="opacity: 0.3;">?</span><div class="tower-multiplier">' + (1 + i * 0.5).toFixed(1) + 'x</div>';
                }
            }
            towerGame.level = 0;
            updateTowerDisplay();
        }

        // ==========================================
        // WHEEL
        // ==========================================
        
        let wheelGame = { spinning: false };

        function renderWheel(container) {
            const sections = [
                { label: '0.5x', color: '#ef4444', mult: 0.5 },
                { label: '1x', color: '#3b82f6', mult: 1 },
                { label: '2x', color: '#22c55e', mult: 2 },
                { label: '5x', color: '#a855f7', mult: 5 },
                { label: '10x', color: '#fbbf24', mult: 10 },
                { label: '0.5x', color: '#ef4444', mult: 0.5 },
                { label: '3x', color: '#06b6d4', mult: 3 },
                { label: '0.5x', color: '#ef4444', mult: 0.5 }
            ];
            
            container.innerHTML = `
                <div class="bet-panel">
                    <div class="bet-section">
                        <h3>Wheel of Fortune</h3>
                        <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; margin-top: 10px;">
                            Spin the wheel and multiply your bet!<br>
                            Gold = 10x | Purple = 5x | Cyan = 3x | Green = 2x
                        </p>
                    </div>
                    ${betPanelHtml('spinWheel()')}
                </div>
                <div class="game-display">
                    <div class="wheel-container">
                        <div class="wheel-pointer"></div>
                        <div class="wheel-outer" id="wheelOuter">
                            ${sections.map((s, i) => {
                                const angle = (360 / sections.length) * i;
                                return `<div class="wheel-section" style="transform: rotate(${angle}deg) skewY(-45deg); background: ${s.color};">
                                    <span style="transform: skewY(45deg) rotate(22.5deg) translate(60px, 20px); display: block;">${s.label}</span>
                                </div>`;
                            }).join('')}
                        </div>
                        <div class="wheel-center">🎯</div>
                        <div id="wheelResult" style="margin-top: 30px; font-family: 'JetBrains Mono'; font-size: 36px; color: var(--accent);"></div>
                    </div>
                </div>
            `;
        }

        function spinWheel() {
            if (wheelGame.spinning) return;
            const bet = parseFloat(document.getElementById('betAmount').value);
            if (bet <= 0 || bet > STATE.balance) return;
            
            STATE.balance -= bet;
            updateUI();
            wheelGame.spinning = true;
            document.getElementById('betBtn').disabled = true;
            
            const wheel = document.getElementById('wheelOuter');
            const sections = 8;
            const winningSection = Math.floor(Math.random() * sections);
            const baseRotation = 5 * 360;
            const sectionAngle = 360 / sections;
            const finalRotation = baseRotation + (winningSection * sectionAngle) + (sectionAngle / 2);
            
            wheel.style.transition = 'transform 5s cubic-bezier(0.25, 0.1, 0.25, 1)';
            wheel.style.transform = `rotate(${finalRotation}deg)`;
            
            setTimeout(() => {
                const mults = [0.5, 1, 2, 5, 10, 0.5, 3, 0.5];
                const mult = mults[winningSection];
                const win = bet * mult;
                
                STATE.balance += win;
                STATE.stats.profit += win - bet;
                if (win > bet) STATE.stats.wins++;
                STATE.stats.wagered += bet;
                STATE.stats.gamesPlayed++;
                updateUI();
                saveData();
                
                const resultDiv = document.getElementById('wheelResult');
                resultDiv.textContent = `${mult}x = $${win.toFixed(2)}`;
                resultDiv.style.color = win > bet ? '#22c55e' : '#ef4444';
                
                wheelGame.spinning = false;
                document.getElementById('betBtn').disabled = false;
                
                setTimeout(() => {
                    wheel.style.transition = 'none';
                    wheel.style.transform = 'rotate(0deg)';
                }, 2000);
            }, 5000);
        }

        // ==========================================
        // HI-LO
        // ==========================================
        
        let hiloGame = { currentCard: null, bet: 0, streak: 0 };

        function renderHiLo(container) {
            container.innerHTML = `
                <div class="bet-panel">
                    <div class="bet-section">
                        <h3>Hi-Lo</h3>
                        <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; margin-top: 10px;">
                            Guess if the next card is Higher or Lower!<br>
                            Build your streak for bigger multipliers.
                        </p>
                    </div>
                    <div class="bet-section">
                        <h3>Streak: <span id="hiloStreak">0</span></h3>
                        <div style="font-family: 'JetBrains Mono'; font-size: 24px; color: var(--accent); text-align: center;" id="hiloMult">1.00x</div>
                    </div>
                    ${betPanelHtml('startHiLo()', 'cashoutHiLo()')}
                </div>
                <div class="game-display">
                    <div class="hilo-container">
                        <div class="hilo-card-display" id="hiloCard">
                            <div class="hilo-card-value" id="hiloValue">?</div>
                            <div style="font-size: 100px;">🎴</div>
                            <div class="hilo-card-value bottom">?</div>
                        </div>
                        <div class="hilo-buttons" id="hiloButtons" style="display: none;">
                            <button class="hilo-btn high" onclick="guessHiLo('high')">HIGHER ⬆️</button>
                            <button class="hilo-btn low" onclick="guessHiLo('low')">LOWER ⬇️</button>
                        </div>
                        <div class="hilo-history" id="hiloHistory"></div>
                    </div>
                </div>
            `;
        }

        function startHiLo() {
            const bet = parseFloat(document.getElementById('betAmount').value);
            if (bet <= 0 || bet > STATE.balance) return;
            
            STATE.balance -= bet;
            hiloGame = { currentCard: null, bet: bet, streak: 0 };
            updateUI();
            
            document.getElementById('betBtn').disabled = true;
            document.getElementById('cashoutBtn').disabled = false;
            document.getElementById('hiloButtons').style.display = 'flex';
            
            nextHiLoCard();
        }

        function nextHiLoCard() {
            const values = ['2','3','4','5','6','7','8','9','10','J','Q','K','A'];
            const suits = ['♠','♥','♦','♣'];
            const value = values[Math.floor(Math.random() * values.length)];
            const suit = suits[Math.floor(Math.random() * suits.length)];
            
            hiloGame.currentCard = { value, suit, num: values.indexOf(value) + 2 };
            
            const card = document.getElementById('hiloCard');
            const isRed = ['♥','♦'].includes(suit);
            card.innerHTML = `
                <div class="hilo-card-value ${isRed ? 'card-red' : ''}">${value}<br>${suit}</div>
                <div style="font-size: 100px;">${suit}</div>
                <div class="hilo-card-value bottom ${isRed ? 'card-red' : ''}">${value}<br>${suit}</div>
            `;
        }

        function guessHiLo(guess) {
            const values = ['2','3','4','5','6','7','8','9','10','J','Q','K','A'];
            const oldCard = hiloGame.currentCard;
            
            // Draw new card
            const value = values[Math.floor(Math.random() * values.length)];
            const suits = ['♠','♥','♦','♣'];
            const suit = suits[Math.floor(Math.random() * suits.length)];
            const newCard = { value, suit, num: values.indexOf(value) + 2 };
            
            const isRed = ['♥','♦'].includes(suit);
            const card = document.getElementById('hiloCard');
            card.innerHTML = `
                <div class="hilo-card-value ${isRed ? 'card-red' : ''}">${value}<br>${suit}</div>
                <div style="font-size: 100px;">${suit}</div>
                <div class="hilo-card-value bottom ${isRed ? 'card-red' : ''}">${value}<br>${suit}</div>
            `;
            
            // Check result
            const correct = (guess === 'high' && newCard.num > oldCard.num) || 
                          (guess === 'low' && newCard.num < oldCard.num);
            
            if (correct) {
                hiloGame.streak++;
                hiloGame.currentCard = newCard;
                updateHiLoDisplay();
                
                // Add to history
                const history = document.getElementById('hiloHistory');
                const div = document.createElement('div');
                div.className = 'hilo-history-card ' + (isRed ? 'card-red' : '');
                div.textContent = value;
                history.appendChild(div);
            } else {
                endHiLo(false);
            }
        }

        function updateHiLoDisplay() {
            document.getElementById('hiloStreak').textContent = hiloGame.streak;
            const mult = 1 + (hiloGame.streak * 0.5);
            document.getElementById('hiloMult').textContent = mult.toFixed(2) + 'x';
        }

        function cashoutHiLo() {
            if (hiloGame.streak === 0) return;
            endHiLo(true);
        }

        function endHiLo(won) {
            const mult = won ? 1 + (hiloGame.streak * 0.5) : 0;
            const win = hiloGame.bet * mult;
            
            if (win > 0) {
                STATE.balance += win;
                STATE.stats.profit += win - hiloGame.bet;
                STATE.stats.wins++;
                alert(`Cashed out! Streak: ${hiloGame.streak}, Won $${(win - hiloGame.bet).toFixed(2)}`);
            } else {
                STATE.stats.profit -= hiloGame.bet;
                alert('Wrong guess! You lose.');
            }
            
            STATE.stats.wagered += hiloGame.bet;
            STATE.stats.gamesPlayed++;
            updateUI();
            saveData();
            
            document.getElementById('betBtn').disabled = false;
            document.getElementById('cashoutBtn').disabled = true;
            document.getElementById('hiloButtons').style.display = 'none';
            document.getElementById('hiloCard').innerHTML = `
                <div class="hilo-card-value">?</div>
                <div style="font-size: 100px;">🎴</div>
                <div class="hilo-card-value bottom">?</div>
            `;
            document.getElementById('hiloHistory').innerHTML = '';
            hiloGame = { currentCard: null, bet: 0, streak: 0 };
            updateHiLoDisplay();
        }

        // ==========================================
        // PUMP GAME
        // ==========================================
        
        let pumpGame = { active: false, multiplier: 1, bet: 0, pumpCount: 0 };

        function renderPump(container) {
            container.innerHTML = `
                <div class="bet-panel">
                    <div class="bet-section">
                        <h3>Pump</h3>
                        <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; margin-top: 10px;">
                            Pump to increase multiplier! But don't overpump or it will burst!<br>
                            Random burst between 1.5x and 50x
                        </p>
                    </div>
                    <div class="bet-section">
                        <h3>Current Multiplier</h3>
                        <div style="font-family: 'JetBrains Mono'; font-size: 48px; color: var(--accent); text-align: center;" id="pumpMult">1.00x</div>
                    </div>
                    ${betPanelHtml('startPump()', 'cashoutPump()')}
                </div>
                <div class="game-display">
                    <div class="pump-container">
                        <div class="pump-display">
                            <div class="pump-fill" id="pumpFill" style="height: 10%;"></div>
                            <div class="pump-multiplier" id="pumpDisplayMult">1.00x</div>
                        </div>
                        <button class="pump-btn" id="pumpBtn" onclick="doPump()" disabled>PUMP!</button>
                    </div>
                </div>
            `;
        }

        function startPump() {
            const bet = parseFloat(document.getElementById('betAmount').value);
            if (bet <= 0 || bet > STATE.balance) return;
            
            STATE.balance -= bet;
            pumpGame = { active: true, multiplier: 1, bet: bet, pumpCount: 0, burstAt: 1.5 + Math.random() * 48.5 };
            updateUI();
            
            document.getElementById('betBtn').disabled = true;
            document.getElementById('cashoutBtn').disabled = false;
            document.getElementById('pumpBtn').disabled = false;
            updatePumpDisplay();
        }

        function doPump() {
            if (!pumpGame.active) return;
            
            pumpGame.pumpCount++;
            const increase = 0.5 + Math.random() * 2;
            pumpGame.multiplier += increase;
            
            updatePumpDisplay();
            
            if (pumpGame.multiplier >= pumpGame.burstAt) {
                // Burst!
                document.getElementById('pumpFill').style.background = '#ef4444';
                document.getElementById('pumpDisplayMult').textContent = 'BURST!';
                setTimeout(() => endPump(false), 500);
            }
        }

        function updatePumpDisplay() {
            const fillPercent = Math.min((pumpGame.multiplier / 50) * 100, 100);
            document.getElementById('pumpFill').style.height = fillPercent + '%';
            document.getElementById('pumpMult').textContent = pumpGame.multiplier.toFixed(2) + 'x';
            document.getElementById('pumpDisplayMult').textContent = pumpGame.multiplier.toFixed(2) + 'x';
        }

        function cashoutPump() {
            if (!pumpGame.active) return;
            endPump(true);
        }

        function endPump(won) {
            pumpGame.active = false;
            const win = won ? pumpGame.bet * pumpGame.multiplier : 0;
            
            if (win > 0) {
                STATE.balance += win;
                STATE.stats.profit += win - pumpGame.bet;
                STATE.stats.wins++;
                alert(`Cashed out at ${pumpGame.multiplier.toFixed(2)}x! Won $${(win - pumpGame.bet).toFixed(2)}`);
            } else {
                STATE.stats.profit -= pumpGame.bet;
                alert(`BURST at ${pumpGame.multiplier.toFixed(2)}x! You lose.`);
            }
            
            STATE.stats.wagered += pumpGame.bet;
            STATE.stats.gamesPlayed++;
            updateUI();
            saveData();
            
            document.getElementById('betBtn').disabled = false;
            document.getElementById('cashoutBtn').disabled = true;
            document.getElementById('pumpBtn').disabled = true;
            document.getElementById('pumpFill').style.height = '10%';
            document.getElementById('pumpFill').style.background = 'linear-gradient(180deg, var(--green), #16a34a)';
            document.getElementById('pumpMult').textContent = '1.00x';
            document.getElementById('pumpDisplayMult').textContent = '1.00x';
        }

        // ==========================================
        // SLIDE GAME
        // ==========================================
        
        let slideGame = { active: false, position: 0, direction: 1, speed: 5, bet: 0, targetStart: 0, targetEnd: 0 };

        function renderSlide(container) {
            container.innerHTML = `
                <div class="bet-panel">
                    <div class="bet-section">
                        <h3>Slide</h3>
                        <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; margin-top: 10px;">
                            Stop the cursor in the green zone!<br>
                        Closer to center = higher multiplier (up to 10x)
                        </p>
                    </div>
                    ${betPanelHtml('startSlide()')}
                </div>
                <div class="game-display">
                    <div class="slide-container">
                        <div class="slide-track" id="slideTrack">
                            <div class="slide-target" id="slideTarget" style="left: 35%; width: 30%;"></div>
                            <div class="slide-cursor" id="slideCursor" style="left: 0%;"></div>
                        </div>
                        <div class="slide-controls">
                            <button class="slide-btn start" id="slideStartBtn" onclick="startSlideAnim()">START</button>
                            <button class="slide-btn stop" id="slideStopBtn" onclick="stopSlide()" style="display: none;">STOP!</button>
                        </div>
                        <div id="slideResult" style="margin-top: 30px; font-family: 'JetBrains Mono'; font-size: 36px; color: var(--accent);"></div>
                    </div>
                </div>
            `;
        }

        function startSlide() {
            const bet = parseFloat(document.getElementById('betAmount').value);
            if (bet <= 0 || bet > STATE.balance) return;
            
            STATE.balance -= bet;
            slideGame = { active: false, position: 0, direction: 1, speed: 8, bet: bet, targetStart: 35, targetEnd: 65 };
            updateUI();
            
            document.getElementById('betBtn').disabled = true;
            document.getElementById('slideStartBtn').style.display = 'block';
            document.getElementById('slideStopBtn').style.display = 'none';
            document.getElementById('slideResult').textContent = '';
        }

        function startSlideAnim() {
            slideGame.active = true;
            document.getElementById('slideStartBtn').style.display = 'none';
            document.getElementById('slideStopBtn').style.display = 'block';
            
            animateSlide();
        }

        function animateSlide() {
            if (!slideGame.active) return;
            
            slideGame.position += slideGame.speed * slideGame.direction;
            
            if (slideGame.position >= 95 || slideGame.position <= 0) {
                slideGame.direction *= -1;
            }
            
            document.getElementById('slideCursor').style.left = slideGame.position + '%';
            requestAnimationFrame(animateSlide);
        }

        function stopSlide() {
            if (!slideGame.active) return;
            slideGame.active = false;
            
            const cursorCenter = slideGame.position + 1; // 2% width
            const targetCenter = 50;
            const inTarget = cursorCenter >= slideGame.targetStart && cursorCenter <= slideGame.targetEnd;
            
            let mult = 0;
            if (inTarget) {
                const distFromCenter = Math.abs(cursorCenter - targetCenter);
                mult = 10 - (distFromCenter / 15) * 9; // 10x at center, 1x at edge
                mult = Math.max(1, mult);
            }
            
            const win = slideGame.bet * mult;
            
            if (win > 0) {
                STATE.balance += win;
                STATE.stats.profit += win - slideGame.bet;
                STATE.stats.wins++;
                document.getElementById('slideResult').textContent = `${mult.toFixed(2)}x = $${win.toFixed(2)}`;
                document.getElementById('slideResult').style.color = '#22c55e';
            } else {
                STATE.stats.profit -= slideGame.bet;
                document.getElementById('slideResult').textContent = 'Missed! You lose.';
                document.getElementById('slideResult').style.color = '#ef4444';
            }
            
            STATE.stats.wagered += slideGame.bet;
            STATE.stats.gamesPlayed++;
            updateUI();
            saveData();
            
            document.getElementById('betBtn').disabled = false;
            document.getElementById('slideStartBtn').style.display = 'none';
            document.getElementById('slideStopBtn').style.display = 'none';
        }

        // ==========================================
        // DIAMONDS (MINES VARIANT)
        // ==========================================
        
        let diamondsGame = { active: false, grid: [], revealed: [], diamonds: [], bet: 0 };

        function renderDiamonds(container) {
            container.innerHTML = `
                <div class="bet-panel">
                    <div class="bet-section">
                        <h3>Diamonds</h3>
                        <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; margin-top: 10px;">
                            Find the diamonds! 5 hidden gems on a 5x5 grid.<br>
                            Each find increases your multiplier. Avoid the coal!
                        </p>
                    </div>
                    <div class="bet-section">
                        <h3>Progress</h3>
                        <div style="display: flex; justify-content: space-between; padding: 15px; background: var(--bg-tertiary); border-radius: var(--radius-sm);">
                            <span style="color: var(--text-secondary); font-size: 12px;">Diamonds Found</span>
                            <span style="font-family: 'JetBrains Mono'; color: var(--accent); font-weight: 700;" id="diamondsFound">0/5</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 15px; background: var(--bg-tertiary); border-radius: var(--radius-sm); margin-top: 10px;">
                            <span style="color: var(--text-secondary); font-size: 12px;">Multiplier</span>
                            <span style="font-family: 'JetBrains Mono'; color: var(--accent); font-weight: 700;" id="diamondsMult">1.00x</span>
                        </div>
                    </div>
                    ${betPanelHtml('startDiamonds()', 'cashoutDiamonds()')}
                </div>
                <div class="game-display">
                    <div class="diamonds-grid" id="diamondsGrid"></div>
                </div>
            `;
            initDiamonds();
        }

        function initDiamonds() {
            diamondsGame = { active: false, grid: Array(25).fill(null), revealed: [], diamonds: [], bet: 0 };
            const grid = document.getElementById('diamondsGrid');
            grid.innerHTML = '';
            for (let i = 0; i < 25; i++) {
                const cell = document.createElement('div');
                cell.className = 'diamond-tile';
                cell.onclick = () => clickDiamond(i);
                grid.appendChild(cell);
            }
            updateDiamondsDisplay();
        }

        function startDiamonds() {
            const bet = parseFloat(document.getElementById('betAmount').value);
            if (bet <= 0 || bet > STATE.balance) return;
            
            STATE.balance -= bet;
            diamondsGame.bet = bet;
            diamondsGame.active = true;
            
            // Place 5 diamonds
            while (diamondsGame.diamonds.length < 5) {
                const idx = Math.floor(Math.random() * 25);
                if (!diamondsGame.diamonds.includes(idx)) {
                    diamondsGame.diamonds.push(idx);
                }
            }
            
            updateUI();
            document.getElementById('betBtn').disabled = true;
            document.getElementById('cashoutBtn').disabled = false;
        }

        function clickDiamond(idx) {
            if (!diamondsGame.active || diamondsGame.revealed.includes(idx)) return;
            
            const cells = document.querySelectorAll('.diamond-tile');
            const cell = cells[idx];
            
            if (diamondsGame.diamonds.includes(idx)) {
                // Found diamond!
                cell.classList.add('revealed', 'diamond');
                cell.innerHTML = '💎';
                diamondsGame.revealed.push(idx);
                updateDiamondsDisplay();
                
                if (diamondsGame.revealed.length === 5) {
                    cashoutDiamonds();
                }
            } else {
                // Coal - game over
                cell.classList.add('revealed', 'empty');
                cell.innerHTML = '⚫';
                endDiamonds(false);
            }
        }

        function updateDiamondsDisplay() {
            const found = diamondsGame.revealed.length;
            document.getElementById('diamondsFound').textContent = `${found}/5`;
            
            const mults = [1, 1.5, 2.5, 5, 10, 25];
            const mult = mults[found];
            document.getElementById('diamondsMult').textContent = mult.toFixed(2) + 'x';
        }

        function cashoutDiamonds() {
            if (!diamondsGame.active) return;
            const mult = parseFloat(document.getElementById('diamondsMult').textContent);
            const win = diamondsGame.bet * mult;
            endDiamonds(true, win);
        }

        function endDiamonds(won, winAmount = 0) {
            diamondsGame.active = false;
            
            if (won) {
                STATE.balance += winAmount;
                STATE.stats.profit += winAmount - diamondsGame.bet;
                STATE.stats.wins++;
            } else {
                STATE.stats.profit -= diamondsGame.bet;
            }
            
            STATE.stats.wagered += diamondsGame.bet;
            STATE.stats.gamesPlayed++;
            updateUI();
            saveData();
            
            document.getElementById('betBtn').disabled = false;
            document.getElementById('cashoutBtn').disabled = true;
            
            // Reveal all
            const cells = document.querySelectorAll('.diamond-tile');
            diamondsGame.diamonds.forEach(idx => {
                if (!cells[idx].classList.contains('revealed')) {
                    cells[idx].classList.add('revealed', 'diamond');
                    cells[idx].innerHTML = '💎';
                }
            });
            
            setTimeout(initDiamonds, 2000);
        }

        // ==========================================
        // CASE OPENING
        // ==========================================
        
        function renderCases(container) {
            container.innerHTML = `
                <div class="panel" style="width: 100%; padding: 40px; overflow-y: auto;">
                    <h2 style="font-size: 36px; font-family: 'Rajdhani'; margin-bottom: 10px; text-align: center; text-shadow: 0 0 20px var(--accent-glow);">Case Opening</h2>
                    <p style="text-align: center; color: var(--text-muted); margin-bottom: 40px;">Select a case to open. Higher tiers have better odds but cost more.</p>
                    <div class="cases-grid">
                        ${Object.entries(CASES).map(([key, c]) => `
                            <div class="case-card ${c.featured ? 'featured' : ''}" style="border-color: ${c.color}">
                                <span class="case-icon">${c.icon}</span>
                                <div class="case-name" style="color: ${c.color}">${c.name}</div>
                                <div class="case-price">$${c.price.toLocaleString()}</div>
                                <div class="case-desc">${c.desc}</div>
                                <div class="case-odds">
                                    ${Object.entries(c.odds).filter(([k,v]) => v > 0).map(([rarity, chance]) => 
                                        `<div class="odds-dot rarity-bg-${rarity}" title="${rarity}: ${chance}%"></div>`
                                    ).join('')}
                                </div>
                                <div class="case-buttons">
                                    <button class="btn-open ${c.price > STATE.balance ? 'disabled' : ''}" 
                                        onclick="openCase('${key}')" 
                                        ${c.price > STATE.balance ? 'disabled' : ''}>
                                        Open 1
                                    </button>
                                    <button class="btn-open5 ${c.price * 5 > STATE.balance ? 'disabled' : ''}" 
                                        onclick="openBatch('${key}')" 
                                        ${c.price * 5 > STATE.balance ? 'disabled' : ''}>
                                        Open 5
                                    </button>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function openCase(caseKey) {
            const caseData = CASES[caseKey];
            if (STATE.balance < caseData.price) return;
            STATE.balance -= caseData.price;
            updateUI();
            saveData();
            
            const overlay = document.getElementById('unboxOverlay');
            const spinner = document.getElementById('spinnerItems');
            const winReveal = document.getElementById('winReveal');
            overlay.classList.add('active');
            winReveal.classList.remove('show');
            spinner.innerHTML = '';
            spinner.style.transition = 'none';
            spinner.style.transform = 'translateX(0)';
            
            const items = [];
            for (let i = 0; i < 60; i++) items.push(generateItemFromCase(caseData));
            
            if (!STATE.rigged && Math.random() < 0.7) {
                const badRarities = ['consumer', 'industrial'];
                items[50] = ITEMS_DB.filter(i => i.rarity === badRarities[Math.floor(Math.random() * badRarities.length)])[0];
            } else if (STATE.rigged) {
                const goodRarities = ['classified', 'covert', 'contraband'];
                const forcedRarity = goodRarities[Math.floor(Math.random() * goodRarities.length)];
                items[50] = ITEMS_DB.filter(i => i.rarity === forcedRarity)[0];
            }
            
            const wonItem = items[50];
            
            items.forEach((item, idx) => {
                const div = document.createElement('div');
                div.className = 'spinner-item ' + (idx === 50 ? 'winner' : '');
                div.style.borderColor = RARITY_COLORS[item.rarity];
                div.innerHTML = `<div class="item-icon">${item.icon}</div><div class="item-name" style="color: ${RARITY_COLORS[item.rarity]}">${item.name}</div>`;
                spinner.appendChild(div);
            });
            
            setTimeout(() => {
                spinner.style.transition = 'transform 7s cubic-bezier(0.15, 0.9, 0.25, 1)';
                const itemWidth = 182;
                const targetPos = 50 * itemWidth - 450 + 91;
                spinner.style.transform = `translateX(-${targetPos}px)`;
            }, 100);
            
            setTimeout(() => {
                winReveal.classList.add('show');
                document.getElementById('winIcon').textContent = wonItem.icon;
                document.getElementById('winName').textContent = wonItem.name;
                document.getElementById('winName').style.color = RARITY_COLORS[wonItem.rarity];
                document.getElementById('winRarity').textContent = wonItem.rarity;
                document.getElementById('winRarity').style.color = RARITY_COLORS[wonItem.rarity];
                document.getElementById('winValue').textContent = '$' + wonItem.value.toLocaleString();
                STATE.inventory.push(wonItem);
                updateUI();
                saveData();
            }, 7200);
        }

        function openBatch(caseKey) {
            const caseData = CASES[caseKey];
            const totalCost = caseData.price * 5;
            if (STATE.balance < totalCost) return;
            
            STATE.balance -= totalCost;
            updateUI();
            
            const overlay = document.getElementById('batchOverlay');
            const container = document.getElementById('batchContainer');
            overlay.classList.add('active');
            container.innerHTML = '';
            
            const wonItems = [];
            for (let i = 0; i < 5; i++) {
                wonItems.push(generateItemFromCase(caseData));
            }
            
            wonItems.forEach((item, idx) => {
                const div = document.createElement('div');
                div.className = 'batch-item';
                div.style.borderColor = RARITY_COLORS[item.rarity];
                div.innerHTML = `
                    <div class="batch-icon">${item.icon}</div>
                    <div class="batch-name" style="color: ${RARITY_COLORS[item.rarity]}">${item.name}</div>
                    <div class="batch-value">$${item.value.toLocaleString()}</div>
                `;
                container.appendChild(div);
                
                setTimeout(() => {
                    div.classList.add('show');
                }, idx * 300);
                
                STATE.inventory.push(item);
            });
            
            saveData();
        }

        function closeUnbox() { 
            document.getElementById('unboxOverlay').classList.remove('active'); 
        }

        function closeBatch() {
            document.getElementById('batchOverlay').classList.remove('active');
            updateUI();
        }

        function generateItemFromCase(caseData) {
            const rand = Math.random() * 100;
            let cumulative = 0, selectedRarity = 'consumer';
            for (const [rarity, chance] of Object.entries(caseData.odds)) {
                cumulative += chance;
                if (rand <= cumulative) { selectedRarity = rarity; break; }
            }
            const pool = ITEMS_DB.filter(i => i.rarity === selectedRarity);
            return pool[Math.floor(Math.random() * pool.length)];
        }

        // ==========================================
        // INVENTORY
        // ==========================================
        
        function renderInventory(container) {
            const totalValue = STATE.inventory.reduce((a, b) => a + b.value, 0);
            container.innerHTML = `
                <div class="panel" style="width: 100%; padding: 40px; overflow-y: auto;">
                    <div class="inventory-stats">
                        <div class="stat-card"><div class="stat-label">Total Items</div><div class="stat-value">${STATE.inventory.length}</div></div>
                        <div class="stat-card"><div class="stat-label">Total Value</div><div class="stat-value gold">$${totalValue.toLocaleString()}</div></div>
                        <div class="stat-card"><div class="stat-label">Best Item</div><div class="stat-value" style="color: ${STATE.inventory.length > 0 ? RARITY_COLORS[STATE.inventory.reduce((a,b) => a.value > b.value ? a : b).rarity] : 'var(--text-secondary)'}">${STATE.inventory.length > 0 ? STATE.inventory.reduce((a,b) => a.value > b.value ? a : b).name : 'None'}</div></div>
                    </div>
                    <h3 style="margin-bottom: 20px; font-size: 20px; font-family: 'Rajdhani';">Your Items</h3>
                    <div class="inventory
                        </div>
                    </div>
                </div>
            `;
            
            // Add event listeners for sell buttons after rendering
            setTimeout(() => {
                document.querySelectorAll('.inv-btn-sell').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const idx = parseInt(e.target.dataset.index);
                        sellItem(idx);
                    });
                });
            }, 0);
        }

        function sellItem(index) {
            const item = STATE.inventory[index];
            if (!item) return;
            
            const sellPrice = Math.floor(item.value * 0.7); // 70% of value
            STATE.balance += sellPrice;
            STATE.inventory.splice(index, 1);
            
            updateUI();
            saveData();
            renderInventory(document.getElementById('gameArea'));
        }

        // ==========================================
        // SPORTS BETTING (Ping Pong)
        // ==========================================
        
        let sportsGame = { active: false, bet: 0, playerChoice: null, odds: { p1: 1.8, p2: 2.2 } };

        function renderSports(container) {
            container.innerHTML = `
                <div class="bet-panel">
                    <div class="bet-section">
                        <h3>Sports Betting</h3>
                        <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; margin-top: 10px;">
                            Bet on the ping pong match! Watch the AI battle it out.
                        </p>
                    </div>
                    <div class="bet-section">
                        <h3>Select Winner</h3>
                        <div class="sports-odds">
                            <div class="odds-box ${sportsGame.playerChoice === 'p1' ? 'selected' : ''}" onclick="selectSportsBet('p1')">
                                <div class="player-name">Player 1</div>
                                <div class="odds-value" id="oddsP1">1.80x</div>
                            </div>
                            <div class="odds-box ${sportsGame.playerChoice === 'p2' ? 'selected' : ''}" onclick="selectSportsBet('p2')">
                                <div class="player-name">Player 2</div>
                                <div class="odds-value" id="oddsP2">2.20x</div>
                            </div>
                        </div>
                    </div>
                    ${betPanelHtml('startSportsMatch()')}
                </div>
                <div class="game-display">
                    <div class="sports-container">
                        <div class="pingpong-court" id="pingPongCourt">
                            <div class="pingpong-net"></div>
                            <div class="pingpong-line" style="top: 50%;"></div>
                            <div class="pingpong-player" id="p1" style="left: 20px; top: 170px;"></div>
                            <div class="pingpong-player" id="p2" style="right: 20px; top: 170px;"></div>
                            <div class="pingpong-ball" id="pongBall" style="left: 390px; top: 190px;"></div>
                            <div class="pingpong-score p1" id="scoreP1">0</div>
                            <div class="pingpong-score p2" id="scoreP2">0</div>
                        </div>
                        <div id="sportsResult" style="margin-top: 20px; font-family: 'JetBrains Mono'; font-size: 24px; text-align: center;"></div>
                    </div>
                </div>
            `;
        }

        function selectSportsBet(player) {
            sportsGame.playerChoice = player;
            document.querySelectorAll('.odds-box').forEach(box => box.classList.remove('selected'));
            event.target.closest('.odds-box').classList.add('selected');
        }

        function startSportsMatch() {
            if (!sportsGame.playerChoice) return alert('Select a player to bet on!');
            const bet = parseFloat(document.getElementById('betAmount').value);
            if (bet <= 0 || bet > STATE.balance) return;
            
            STATE.balance -= bet;
            sportsGame.bet = bet;
            sportsGame.active = true;
            updateUI();
            
            document.getElementById('betBtn').disabled = true;
            
            // Reset scores
            let p1Score = 0, p2Score = 0;
            document.getElementById('scoreP1').textContent = '0';
            document.getElementById('scoreP2').textContent = '0';
            
            const p1 = document.getElementById('p1');
            const p2 = document.getElementById('p2');
            const ball = document.getElementById('pongBall');
            
            let ballX = 390, ballY = 190;
            let ballVX = (Math.random() > 0.5 ? 1 : -1) * (3 + Math.random() * 2);
            let ballVY = (Math.random() - 0.5) * 4;
            let p1Y = 170, p2Y = 170;
            
            const gameLoop = setInterval(() => {
                // Move ball
                ballX += ballVX;
                ballY += ballVY;
                
                // AI movement
                const p1Target = ballY - 30;
                const p2Target = ballY - 30;
                p1Y += (p1Target - p1Y) * 0.08;
                p2Y += (p2Target - p2Y) * 0.08;
                
                // Clamp paddle positions
                p1Y = Math.max(10, Math.min(340, p1Y));
                p2Y = Math.max(10, Math.min(340, p2Y));
                
                // Ball collision with top/bottom
                if (ballY <= 5 || ballY >= 395) ballVY *= -1;
                
                // Ball collision with paddles
                if (ballX <= 45 && ballY >= p1Y && ballY <= p1Y + 60) {
                    ballVX = Math.abs(ballVX) * 1.05;
                    ballVY += (Math.random() - 0.5) * 2;
                }
                if (ballX >= 745 && ballY >= p2Y && ballY <= p2Y + 60) {
                    ballVX = -Math.abs(ballVX) * 1.05;
                    ballVY += (Math.random() - 0.5) * 2;
                }
                
                // Score
                if (ballX < 0) {
                    p2Score++;
                    document.getElementById('scoreP2').textContent = p2Score;
                    resetBall();
                } else if (ballX > 800) {
                    p1Score++;
                    document.getElementById('scoreP1').textContent = p1Score;
                    resetBall();
                }
                
                // Check winner
                if (p1Score >= 11 || p2Score >= 11) {
                    clearInterval(gameLoop);
                    endSportsMatch(p1Score > p2Score ? 'p1' : 'p2');
                }
                
                // Update positions
                ball.style.left = ballX + 'px';
                ball.style.top = ballY + 'px';
                p1.style.top = p1Y + 'px';
                p2.style.top = p2Y + 'px';
                
                function resetBall() {
                    ballX = 390;
                    ballY = 190;
                    ballVX = (Math.random() > 0.5 ? 1 : -1) * (3 + Math.random() * 2);
                    ballVY = (Math.random() - 0.5) * 4;
                }
            }, 16);
        }

        function endSportsMatch(winner) {
            sportsGame.active = false;
            const win = winner === sportsGame.playerChoice;
            const odds = sportsGame.playerChoice === 'p1' ? 1.8 : 2.2;
            const winAmount = win ? sportsGame.bet * odds : 0;
            
            if (win) {
                STATE.balance += winAmount;
                STATE.stats.profit += winAmount - sportsGame.bet;
                STATE.stats.wins++;
                document.getElementById('sportsResult').textContent = `You win $${(winAmount - sportsGame.bet).toFixed(2)}!`;
                document.getElementById('sportsResult').style.color = '#22c55e';
            } else {
                STATE.stats.profit -= sportsGame.bet;
                document.getElementById('sportsResult').textContent = 'You lose!';
                document.getElementById('sportsResult').style.color = '#ef4444';
            }
            
            STATE.stats.wagered += sportsGame.bet;
            STATE.stats.gamesPlayed++;
            updateUI();
            saveData();
            
            document.getElementById('betBtn').disabled = false;
        }

        // ==========================================
        // PROFILE
        // ==========================================
        
        function renderProfile(container) {
            const profit = STATE.stats.profit;
            const winRate = STATE.stats.gamesPlayed > 0 ? (STATE.stats.wins / STATE.stats.gamesPlayed * 100).toFixed(1) : 0;
            
            container.innerHTML = `
                <div class="profile-container">
                    <div class="profile-header">
                        <div class="profile-avatar">${STATE.currentUser ? STATE.currentUser[0].toUpperCase() : 'U'}</div>
                        <div class="profile-info">
                            <h2>${STATE.currentUser || 'User'}</h2>
                            <p>Member since ${new Date().toLocaleDateString()}</p>
                        </div>
                    </div>
                    
                    <div class="pnl-card">
                        <div class="pnl-label">Total Profit / Loss</div>
                        <div class="pnl-value ${profit >= 0 ? 'positive' : 'negative'}">
                            ${profit >= 0 ? '+' : ''}$${profit.toLocaleString('en-US', {minimumFractionDigits: 2})}
                        </div>
                        <button class="share-btn" onclick="sharePnL()">Share P&L</button>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-box-value">${STATE.stats.gamesPlayed}</div>
                            <div class="stat-box-label">Games Played</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-box-value">${STATE.stats.wins}</div>
                            <div class="stat-box-label">Wins</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-box-value">${winRate}%</div>
                            <div class="stat-box-label">Win Rate</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-box-value">$${STATE.stats.wagered.toLocaleString('en-US', {minimumFractionDigits: 0})}</div>
                            <div class="stat-box-label">Total Wagered</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-box-value">$${STATE.stats.totalDeposited.toLocaleString('en-US', {minimumFractionDigits: 0})}</div>
                            <div class="stat-box-label">Total Deposited</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-box-value">${STATE.inventory.length}</div>
                            <div class="stat-box-label">Items Owned</div>
                        </div>
                    </div>
                </div>
            `;
        }

        function sharePnL() {
            const profit = STATE.stats.profit;
            const text = `I just ${profit >= 0 ? 'made' : 'lost'} $${Math.abs(profit).toFixed(2)} on NOIR Casino! ${profit >= 0 ? '🚀' : '😢'}`;
            navigator.clipboard.writeText(text).then(() => alert('Copied to clipboard!'));
        }

        // ==========================================
        // HANDBOOK / HELP SYSTEM
        // ==========================================
        
        function showHandbook(game) {
            const modal = document.getElementById('handbookModal');
            const title = document.getElementById('handbookTitle');
            const content = document.getElementById('handbookContent');
            
            modal.classList.add('active');
            
            const handbooks = {
                blackjack: {
                    title: '📘 Blackjack Handbook',
                    content: `
                        <div class="handbook-section">
                            <h3>Objective</h3>
                            <p>Get a hand value closer to 21 than the dealer without going over 21.</p>
                        </div>
                        <div class="handbook-section">
                            <h3>Card Values</h3>
                            <div class="handbook-grid">
                                <div class="handbook-item"><strong>2-10</strong><span>Face value</span></div>
                                <div class="handbook-item"><strong>J, Q, K</strong><span>10 points</span></div>
                                <div class="handbook-item"><strong>A</strong><span>1 or 11 points</span></div>
                            </div>
                        </div>
                        <div class="handbook-section">
                            <h3>Actions</h3>
                            <div class="handbook-grid">
                                <div class="handbook-item"><strong>Hit</strong><span>Take another card</span></div>
                                <div class="handbook-item"><strong>Stand</strong><span>Keep current hand</span></div>
                                <div class="handbook-item"><strong>Double</strong><span>Double bet, take one more card</span></div>
                                <div class="handbook-item"><strong>Split</strong><span>Split pair into two hands</span></div>
                                <div class="handbook-item"><strong>Surrender</strong><span>Give up, lose half bet</span></div>
                            </div>
                        </div>
                        <div class="handbook-section">
                            <h3>Side Bets</h3>
                            <p><strong>Perfect Pairs:</strong> Win if your first two cards are a pair. Mixed pair (6x), Colored pair (12x), Perfect pair (25x).</p>
                            <p><strong>21+3:</strong> Win based on your two cards + dealer's up card. Flush (5x), Straight (10x), Three of a kind (30x), Straight flush (40x), Suited triple (100x).</p>
                        </div>
                    `
                },
                poker: {
                    title: '📘 Texas Hold\'em Handbook',
                    content: `
                        <div class="handbook-section">
                            <h3>Objective</h3>
                            <p>Make the best 5-card hand using your 2 hole cards and 5 community cards.</p>
                        </div>
                        <div class="handbook-section">
                            <h3>Hand Rankings (Highest to Lowest)</h3>
                            <div class="handbook-grid">
                                <div class="handbook-item"><strong>Royal Flush</strong><span>A-K-Q-J-10 same suit</span></div>
                                <div class="handbook-item"><strong>Straight Flush</strong><span>5 consecutive same suit</span></div>
                                <div class="handbook-item"><strong>Four of a Kind</strong><span>4 cards same rank</span></div>
                                <div class="handbook-item"><strong>Full House</strong><span>Three + Pair</span></div>
                                <div class="handbook-item"><strong>Flush</strong><span>5 cards same suit</span></div>
                                <div class="handbook-item"><strong>Straight</strong><span>5 consecutive ranks</span></div>
                                <div class="handbook-item"><strong>Three of a Kind</strong><span>3 cards same rank</span></div>
                                <div class="handbook-item"><strong>Two Pair</strong><span>2 different pairs</span></div>
                                <div class="handbook-item"><strong>Pair</strong><span>2 cards same rank</span></div>
                                <div class="handbook-item"><strong>High Card</strong><span>Highest single card</span></div>
                            </div>
                        </div>
                    `
                }
            };
            
            const hb = handbooks[game] || { title: '📘 Game Guide', content: '<p>No guide available for this game.</p>' };
            title.textContent = hb.title;
            content.innerHTML = hb.content;
        }

        function closeHandbook() {
            document.getElementById('handbookModal').classList.remove('active');
        }

        // ==========================================
        // ADMIN CONSOLE
        // ==========================================
        
        function toggleConsole() {
            const overlay = document.getElementById('consoleOverlay');
            overlay.style.display = overlay.style.display === 'flex' ? 'none' : 'flex';
            if (overlay.style.display === 'flex') {
                document.getElementById('consoleInput').focus();
            }
        }

        function logToConsole(msg, type = 'info') {
            const logs = document.getElementById('consoleLogs');
            const time = new Date().toLocaleTimeString();
            const color = type === 'error' ? '#ef4444' : type === 'success' ? '#22c55e' : '#a855f7';
            logs.innerHTML += `<div class="log-entry"><span class="log-time">[${time}]</span> <span style="color: ${color}">${msg}</span></div>`;
            logs.scrollTop = logs.scrollHeight;
        }

        function executeCommand() {
            const input = document.getElementById('consoleInput');
            const cmd = input.value.trim().toLowerCase();
            input.value = '';
            
            if (!cmd) return;
            
            logToConsole(`> ${cmd}`, 'info');
            
            const commands = {
                help: () => {
                    logToConsole('Available commands:', 'success');
                    logToConsole('  help - Show this help', 'info');
                    logToConsole('  balance [amount] - Set balance', 'info');
                    logToConsole('  rig - Toggle rigged mode', 'info');
                    logToConsole('  give [item] - Give item', 'info');
                    logToConsole('  clear - Clear console', 'info');
                    logToConsole('  exit - Close console', 'info');
                },
                balance: (args) => {
                    if (args && !isNaN(args)) {
                        STATE.balance = parseFloat(args);
                        updateUI();
                        saveData();
                        logToConsole(`Balance set to $${STATE.balance}`, 'success');
                    } else {
                        logToConsole(`Current balance: $${STATE.balance}`, 'info');
                    }
                },
                rig: () => {
                    STATE.rigged = !STATE.rigged;
                    const dot = document.getElementById('rigStatusDot');
                    const text = document.getElementById('rigStatusText');
                    if (STATE.rigged) {
                        dot.classList.add('rigged');
                        text.textContent = 'RIGGED MODE ACTIVE';
                        text.style.color = '#ef4444';
                        logToConsole('RIGGED MODE ENABLED - House advantage removed', 'error');
                    } else {
                        dot.classList.remove('rigged');
                        text.textContent = 'SYSTEM NORMAL';
                        text.style.color = '';
                        logToConsole('Rigged mode disabled', 'success');
                    }
                },
                give: (args) => {
                    if (!args) return logToConsole('Usage: give [item_name]', 'error');
                    const item = ITEMS_DB.find(i => i.name.toLowerCase().includes(args.toLowerCase()));
                    if (item) {
                        STATE.inventory.push({...item});
                        updateUI();
                        saveData();
                        logToConsole(`Gave ${item.name}`, 'success');
                    } else {
                        logToConsole('Item not found', 'error');
                    }
                },
                clear: () => {
                    document.getElementById('consoleLogs').innerHTML = '';
                },
                exit: () => {
                    toggleConsole();
                }
            };
            
            const [baseCmd, ...args] = cmd.split(' ');
            if (commands[baseCmd]) {
                commands[baseCmd](args.join(' '));
            } else {
                logToConsole(`Unknown command: ${cmd}`, 'error');
            }
        }

        // Keyboard shortcut for console (Ctrl + `)
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.key === '`') {
                e.preventDefault();
                toggleConsole();
            }
        });

        // Initialize on load
        window.addEventListener('load', () => {
            // Check for existing session
            const lastUser = localStorage.getItem('noir_last_user');
            if (lastUser) {
                document.getElementById('loginUser').value = lastUser;
            }
        });
    </script>
</body>
</html>
